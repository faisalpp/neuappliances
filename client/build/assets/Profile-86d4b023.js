import{j as e,u as y,e as N,f as P,r as s,k as x,i as O,Q as g}from"./index-4f7bd113.js";import{M as w}from"./MyAccount-c69aa56e.js";import{C as r}from"./CustomInput-039ccfb5.js";import{C as F}from"./CustomButton-e81fdcaf.js";import{c as k}from"./countries-156e514f.js";import{i as B}from"./ScrollToTop-008a3bda.js";/* empty css                      */import{G as E}from"./profile-853fd284.js";import"./MainLayout-ad0041ab.js";import"./index.esm-8e632965.js";import"./index-dd138650.js";const K=()=>e.jsx(e.Fragment,{children:e.jsx(w,{children:e.jsx(L,{})})}),L=()=>{const j=y(),b=N(),c=P(t=>t.user._id),[m,o]=s.useState(""),[p,i]=s.useState(""),[d,n]=s.useState("yourusername@email.com"),[h,l]=s.useState("+1 000-000-0000"),[a,u]=s.useState(""),[C,D]=s.useState(k),v=async()=>{const t=await E({_id:c});t.status===200?(o(t.data.user.firstName),i(t.data.user.lastName),n(t.data.user.email),l(t.data.user.phone),u(t.data.user.country)):(b(O()),j("/"))},S=async t=>{t.preventDefault();const f=await(await fetch("http://localhost:5000/api/user/update-profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:c,firstName:m,lastName:p,email:d,country:a,phone:h}),credentials:"include"})).json();f.status===200?g.success("Profile Updated!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}):g.error(f.message,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})};return s.useEffect(()=>{v()},[o,i,n,l,u]),e.jsxs(e.Fragment,{children:[e.jsx(x,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"}),e.jsxs("form",{onSubmit:S,className:"flex flex-col gap-6 lg:max-w-[432px] w-full",children:[e.jsx(r,{label:"First name",state:m,setState:o}),e.jsx(r,{label:"Last name",state:p,setState:i}),e.jsx(r,{label:"Email Address",type:"email",state:d,setState:n}),e.jsxs("div",{children:[e.jsx("label",{className:"text-b16 font-semibold text-xs block mb-2",children:"Country"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:a,onChange:t=>u(t.target.value),className:"border border-[rgba(0,0,0,0.16)] rounded-lg h-10 text-sm px-4 w-full outline-none appearance-none",children:[e.jsx("option",{value:a,default:!0,children:a}),C.map(t=>e.jsx("option",{children:t}))]}),e.jsx(B,{className:"absolute right-4 top-3"})]})]}),e.jsx(r,{label:"Phone",state:h,setState:l}),e.jsx(F,{ButtonName:"Save Changes"})]}),e.jsx(x,{})]})};export{L as ProfileData,K as default};
