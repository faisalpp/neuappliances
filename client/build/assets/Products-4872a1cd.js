import{j as e,N as A,h as M,i as N,r as t,l as _,m as O,n as F,P as R,o as z,p as V,G as q,q as K,s as U,e as H,t as Y,v as J,w as W,x as X,y as Z,z as Q}from"./index-300c0d14.js";import{$ as ee}from"./transition-fd23c80d.js";const se=({isGrid:l,product:s})=>{const r=({numberOfTimes:h})=>{const c=Array.from({length:h},(a,o)=>e.jsx(N,{className:"text-b7 text-lg"},o));return e.jsx("div",{className:"flex mt-2 items-center",children:c})},d=s.media.find(h=>h.file==="image");return e.jsx(e.Fragment,{children:l?e.jsx("div",{className:"flex flex-col items-center border-[1px] border-gray-200 rounded-2xl w-12/12 h-fit py-5 cursor-pointer",children:e.jsxs(A,{to:`/product/${s.slug}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:d.data,alt:"Product Feature Image",className:"h-[330px] w-[355px] object-contain"}),s.salePrice!==""?e.jsxs("span",{className:"absolute -top-2 right-0 bg-b7 rounded-2xl font-semibold px-5 py-2 text-xs",children:[(100-s.salePrice/s.regPrice*100).toFixed(0),"% OFF"]}):null]}),e.jsx("p",{className:"font-semibold text-sm px-5 line-clamp-3",children:s.title}),s.salePrice!==""?e.jsxs("div",{className:"flex space-x-20 mt-5",children:[e.jsxs("h4",{className:"text-b3 font-semibold",children:["$",s.salePrice]}),e.jsxs("div",{className:"flex justify-end w-full space-x-2 items-center",children:[e.jsxs("strike",{children:["$",s.regPrice]}),e.jsxs("span",{className:"bg-b4 rounded-xl font-semibold px-2 py-1 text-xs",children:["-",(100-s.salePrice/s.regPrice*100).toFixed(0),"%"]})]})]}):e.jsx("div",{className:"flex space-x-20 mt-5",children:e.jsxs("h4",{className:"text-b3 font-semibold",children:["$",s.regPrice]})}),e.jsxs("div",{className:"flex space-x-20 mt-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h4",{className:"text-sm font-semibold min-w-20 w-20",children:"Cosmetic Rating"}),e.jsx(M,{})]}),e.jsx(r,{numberOfTimes:parseInt(s.rating)})," "]}),e.jsxs("div",{className:"flex items-center space-x-10 mt-2",children:[e.jsxs("div",{className:"flex font-semibold text-sm",children:[e.jsx("h4",{children:"Discount"})," %"]}),e.jsx("div",{className:"w-[150px] bg-gray-100 rounded-lg",children:e.jsx("span",{className:"flex rounded-lg bg-gradient-to-r from-b4 to-b7 w-28 h-2"})})]})]})}):e.jsx(A,{className:"h-fit",to:`/product/${s.slug}`,children:e.jsxs("div",{className:"flex lg:space-x-10 space-x-2 border-[1px] border-gray-200 rounded-2xl w-full lg:py-10 py-5 lg:px-8 px-2 cursor-pointer",children:[e.jsxs("div",{className:"relative w-44 coxs:w-52",children:[e.jsx("img",{src:d.data,alt:"Product Feature Image",className:"w-60 h-60 object-contain"}),s.salePrice!==""?e.jsxs("span",{className:"absolute flex lg:-top-5 -top-4 right-0 lg:-right-6 bg-b4 rounded-2xl font-semibold px-3 py-1 lg:py-2 sm:text-xs text-[8px] coxs:text-[11px]",children:[(100-s.salePrice/s.regPrice*100).toFixed(0),"% OFF"]}):null]}),e.jsxs("div",{className:"flex flex-col lg:px-5 px-1 w-[60%] 3xl:w-[55%]",children:[e.jsx("div",{className:"relative",children:e.jsx("p",{className:"font-semibold text-sm lg:text-lg 3xl:text-xl",children:s.title})}),e.jsxs("div",{className:"flex maxcosm:flex-col sm:items-center gap-1 coxs:gap-2 lg:mt-5 mt-1 xs:mt-2",children:[e.jsxs("div",{className:"flex items-center gap-6 sm:gap-10",children:[e.jsxs("h4",{className:"text-b3 font-semibold lg:text-[16px] text-xs",children:["$",s.salePrice!=""?s.salePrice:s.regPrice]}),s.salePrice!==""?e.jsx("span",{className:"lg:text-[16px] text-xs",children:e.jsxs("strike",{children:["$",s.regPrice]})}):null]}),e.jsx("div",{children:s.salePrice!==""?e.jsxs("span",{className:"bg-b4 rounded-xl font-semibold px-2 py-1 text-xs",children:["- ",(100-s.salePrice/s.regPrice*100).toFixed(0),"%"]}):null})]}),e.jsxs("div",{className:"flex maxxs:flex-col flex-wrap coxs:items-center gap-x-6 lg:mt-4 mt-1 coxs:mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsxs("h4",{className:"text-xs lg:text-sm font-semibold w-max",children:["Cosmetic ",e.jsx("br",{})," Rating"]}),e.jsx(M,{})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(r,{numberOfTimes:s.rating})})]}),e.jsxs("div",{className:"xs:flex hidden items-center gap-3 sm:gap-x-6 mt-2",children:[e.jsxs("div",{className:"flex font-semibold text-xs lg:text-sm gap-1 sm:gap-2 items-center",children:[e.jsx("h4",{children:"Discount"})," %"]}),e.jsx("div",{className:"w-full bg-gray-100 rounded-lg",children:e.jsx("span",{className:"flex rounded-lg bg-gradient-to-r from-b4 to-b7 w-32 h-2"})})]})]})]})})})},C=({title:l,children:s})=>{t.useState(!1);const[r,d]=t.useState(!0);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col w-full border-b-[1px] py-4 h-auto",children:[e.jsxs("div",{className:"flex items-center border-b-gray-300 cursor-pointer",onClick:()=>d(h=>!h),children:[e.jsx("h6",{className:"font-bold w-72 text-sm",children:l}),e.jsx("div",{className:"flex items-center w-full justify-end",children:r?e.jsx(_,{className:"text-2xl"}):e.jsx(O,{className:"text-2xl"})})]}),e.jsx(ee,{show:r,className:"flex flex-col gap-2 h-auto mt-3 cursor-pointer",children:s})]})})},te=({filters:l,setFilt:s,filt:r})=>{const d=l.reduce((c,a)=>c+a.productCount,0),h=(c,a)=>{c.preventDefault(),a==="all"?(delete r.category,s(o=>({...o}))):s(o=>({...o,category:a}))};return e.jsx(e.Fragment,{children:e.jsxs(C,{title:"Appliance Type",children:[e.jsxs("div",{className:"flex text-sm hover:underline",children:[e.jsx("h6",{onClick:c=>h(c,"all"),children:"All"}),e.jsx("div",{className:"flex justify-end w-full text-xs",children:e.jsxs("span",{children:["(",d,")"]})})]}),l?l.map(c=>c.productCount>0?e.jsx("span",{onClick:a=>h(a,c.slug),children:e.jsxs("div",{className:"flex text-sm hover:underline",children:[e.jsx("h6",{className:"w-full ",children:c.title}),e.jsx("div",{className:"flex justify-end w-full text-xs",children:e.jsxs("span",{children:["(",c.productCount,")"]})})]})}):null):null]})})},le=({filters:l,setFilt:s,filt:r})=>{const[d,h]=t.useState(),[c,a]=t.useState(),[o,g]=t.useState(),[b,i]=t.useState(r.rating===3),[f,v]=t.useState(r.rating===4),[w,x]=t.useState(r.rating===5),m=async(u,y)=>{u?s(p=>({...p,rating:y})):(delete r.rating,s(p=>({...p})))},P=(u,y,p)=>{switch(u){case 1:{i(y),v(n=>n&&!n),x(n=>n&&!n),m(y,p);break}case 2:{v(y),i(n=>n&&!n),x(n=>n&&!n),m(y,p);break}case 3:{x(y),v(n=>n&&!n),i(n=>n&&!n),m(y,p);break}}};return t.useEffect(()=>{h(l.find(u=>u._id===5)),a(l.find(u=>u._id===4)),g(l.find(u=>u._id===3))},[l]),e.jsx(e.Fragment,{children:e.jsxs(C,{title:"Comatic Rating",children:[d?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F.Checkbox,{ripple:!1,checked:b,onChange:u=>P(1,u.target.checked,5),className:"checked:bg-b3 checked:text-white"}),e.jsxs("span",{className:"flex",children:[e.jsx(N,{className:"text-b7"}),e.jsx(N,{className:"text-b7"}),e.jsx(N,{className:"text-b7"}),e.jsx(N,{className:"text-b7"}),e.jsx(N,{className:"text-b7"})]})]}),e.jsx("div",{className:"flex justify-end w-full text-xs",children:e.jsxs("span",{children:["(",d?d==null?void 0:d.count:0,")"]})})]}):null,c?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F.Checkbox,{ripple:!1,checked:f,onChange:u=>P(2,u.target.checked,4),className:"checked:bg-b3 checked:text-white"}),e.jsxs("span",{className:"flex",children:[e.jsx(N,{className:"text-b7"}),e.jsx(N,{className:"text-b7"}),e.jsx(N,{className:"text-b7"}),e.jsx(N,{className:"text-b7"})]})]}),e.jsx("div",{className:"flex justify-end w-full text-xs",children:e.jsxs("span",{children:["(",c?c==null?void 0:c.count:0,")"]})})]}):null,o?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F.Checkbox,{ripple:!1,checked:w,onChange:u=>P(3,u.target.checked,3),className:"checked:bg-b3 checked:text-white"}),e.jsxs("span",{className:"flex",children:[e.jsx(N,{className:"text-b7"}),e.jsx(N,{className:"text-b7"}),e.jsx(N,{className:"text-b7"})]})]}),e.jsx("div",{className:"flex justify-end w-full text-xs",children:e.jsxs("span",{children:["(",o?o==null?void 0:o.count:0,")"]})})]}):null]})})},ae=({sale:l,reg:s,setFilt:r,filt:d})=>{const[h,c]=t.useState(!1),[a,o]=t.useState(!1),g=i=>{i.preventDefault(),c(i.target.checked),i.target.checked?r(f=>({...f,salePrice:{$ne:null}})):(delete d.salePrice,r(f=>({...f})))},b=i=>{i.preventDefault(),o(i.target.checked),i.target.checked?r(f=>({...f,regPrice:{$exists:!1}})):(delete d.regPrice,r(f=>({...f})))};return e.jsx(e.Fragment,{children:e.jsxs(C,{title:"On Sale",children:[l.length>0?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F.Checkbox,{ripple:!1,checked:h,onChange:i=>g(i),className:"checked:bg-b3 checked:text-white"}),e.jsx("span",{className:"flex text-sm w-max",children:"Yes"})]}),e.jsx("div",{className:"flex justify-end w-full text-xs",children:e.jsxs("span",{children:["(",l.length>0?l[0].count:null,")"]})})]}):null,s.length>0?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F.Checkbox,{ripple:!1,checked:a,onChange:i=>b(i),className:"checked:bg-b3 checked:text-white"}),e.jsx("span",{className:"flex text-sm w-max",children:"No"})]}),e.jsx("div",{className:"flex justify-end w-full text-xs",children:e.jsxs("span",{children:["(",s.length>0?s[0].count:null,")"]})})]}):null]})})};const D=({min:l,max:s,setFilt:r,tquery:d})=>{const[a,o]=t.useState(200),[g,b]=t.useState(8e3),i=t.useRef(null),f=t.useRef(null),v=t.useRef(null),w=t.useCallback(x=>Math.round((x-l)/(s-l)*100),[l,s]);return t.useEffect(()=>{if(f.current){const x=w(a),m=w(+f.current.value);v.current&&(v.current.style.left=`${x}%`,v.current.style.width=`${m-x}%`)}},[a,w]),t.useEffect(()=>{if(i.current){const x=w(+i.current.value),m=w(g);v.current&&(v.current.style.width=`${m-x}%`)}},[g,w]),t.useEffect(()=>{setTimeout(()=>{r(x=>({...x,salePrice:{$gte:a},regPrice:{$lte:g},...d}))},1500)},[a,g]),e.jsx(C,{title:"Price",children:e.jsxs("div",{className:"w-full pb-8 relative",id:"priceSlider",children:[e.jsxs("div",{className:"flex items-center gap-2 w-full mb-5",children:[e.jsx("input",{type:"number",value:a,onKeyDown:x=>{const m=Math.min(Math.max(+x.target.value,l),s);o(m),r(P=>({...P,range:{min:m}}))},className:"w-[45%] m-0 rounded-md text-b16 px-4 py-2 outline-none border border-[#C9C9C9]"}),e.jsx("span",{children:"-"}),e.jsx("input",{type:"number",value:g,onKeyDown:x=>{const m=Math.min(Math.max(+x.target.value,l),s);b(m)},className:"w-[45%] m-0 rounded-md text-b16 px-4 py-2 outline-none border border-[#C9C9C9]"})]}),e.jsx("input",{type:"range",min:l,max:s,step:5,value:a,ref:i,onChange:x=>{const m=Math.min(+x.target.value,g-1);o(m),x.target.value=m.toString()},className:z("thumb thumb--zindex-3",{"thumb--zindex-5":a>s-100})}),e.jsx("input",{type:"range",min:l,max:s,value:g,ref:f,onChange:x=>{const m=Math.max(+x.target.value,a+1);b(m),x.target.value=m.toString()},className:"thumb thumb--zindex-4"}),e.jsxs("div",{className:"slider",children:[e.jsx("div",{className:"slider__track"}),e.jsx("div",{ref:v,className:"slider__range"}),e.jsxs("div",{className:"flex justify-between absolute left-1 right-1 top-4 text-xs",children:[e.jsx("div",{className:"",children:l}),e.jsx("div",{className:"",children:"99"}),e.jsx("div",{className:"",children:"999"}),e.jsx("div",{className:"",children:s})]})]})]})})};D.propTypes={min:R.number.isRequired,max:R.number.isRequired,onChange:R.func.isRequired};const ne=({onClose:l,isFilter:s,categoriesFilters:r,ratingFilters:d,saleFilter:h,regularFilter:c,setQuery:a,query:o})=>{const g=i=>{i.stopPropagation()},b=s?"maxlg:flex maxlg:top-0 maxlg:bottom-0":"maxlg:-bottom-[420px] maxlg:opacity-0 maxlg:pointer-events-none";return e.jsx("div",{className:`maxlg:fixed maxlg:bg-black/20 items-end maxlg:left-0 maxlg:right-0 lg:max-w-[240px] lg:h-full lg:sticky lg:top-10 z-50 duration-300 ${b}`,onClick:l,children:e.jsxs("div",{className:"lg:flex flex-col w-full maxlg:max-h-[398px] [&>div]:maxlg:px-10 pb-10 maxlg:rounded-tl-2xl maxlg:rounded-tr-2xl maxlg:bg-white maxlg:overflow-y-auto",onClick:g,children:[e.jsxs("div",{className:"maxlg:sticky top-0 flex maxlg:py-4 justify-between lg:pb-4 items-center border-b maxlg:bg-white z-50 maxlg:shadow-md",children:[e.jsx("p",{className:"text-base font-bold",children:"Filters"}),e.jsx("span",{onClick:()=>a({salePrice:{$gte:200},regPrice:{$lte:8e3}}),className:"cursor-pointer text-sm lg:text-xs text-[#22A6AB] underline",children:"Reset Filters"}),e.jsx("button",{onClick:l,className:"text-sm font-semibold lg:hidden px-2 py-1 hover:bg-black/5 rounded duration-300",children:"Close"})]}),e.jsx(te,{filt:o,setFilt:a,filters:r}),e.jsx(le,{filt:o,setFilt:a,filters:d}),e.jsx(D,{setFilt:a,min:9,max:9999}),e.jsx(ae,{filt:o,setFilt:a,sale:h,reg:c})]})})},ie=()=>{const[l,s]=t.useState([]),[r,d]=t.useState([]),[h,c]=t.useState({}),[a,o]=t.useState({}),[g,b]=t.useState([]),[i,f]=t.useState(!1),[v,w]=t.useState(!1),[x,m]=t.useState(!1),P=V(),[u,y]=t.useState({}),[p,n]=t.useState({});t.useEffect(()=>{const j=new URLSearchParams(P.search),k={};for(const[B,G]of j.entries())k[B]=G;y(k),n({...k,...p})},[]),t.useEffect(()=>{console.log(u),E()},[u]);const E=async()=>{m(!0);const j=await q(u);j.status===200?(b(j.data.products),m(!1)):(m(!1),b([]))};t.useEffect(()=>{L()},[]);const L=async()=>{const j=await K();j.status===200?(d(j.data.ratingFilters),s(j.data.categoryFilters),c(j.data.saleFilter),o(j.data.regularFilter)):(d([]),s([]))},T=()=>{w(!1)},[$,S]=t.useState(!1),I=async()=>{S(!0),console.log(p);const j=await Z(p);j.status===200?(b(j.data.products),S(!1)):(Q(j.data.message,"error",1e3),S(!1))};return t.useEffect(()=>{I()},[p]),e.jsx(e.Fragment,{children:x?e.jsx(U,{}):e.jsxs(H,{children:[e.jsxs("div",{className:"flex items-center mt-5 py-5 maincontainer",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h5",{className:"text-xs text-blue-400",children:"Home"}),e.jsx(Y,{className:"text-xl text-gray-500"}),e.jsx("h5",{className:"text-xs text-gray-400",children:"Products"})]}),e.jsxs("div",{className:"flex items-center space-x-5 w-full justify-end",children:[e.jsx(J,{className:"cursor-pointer",onClick:()=>f(!0)}),e.jsx(W,{className:"cursor-pointer",onClick:()=>f(!1)})]}),e.jsxs("button",{className:"ml-5 text-sm font-semibold flex gap-2 items-center lg:hidden",onClick:()=>w(!0),children:["Filters ",e.jsx(X,{className:"text-xs stroke-1"})]})]}),e.jsxs("div",{className:"flex justify-center gap-12 xl:gap-x-60px maincontainer",children:[e.jsx(ne,{query:p,setQuery:n,saleFilter:h,regularFilter:a,categoriesFilters:l,ratingFilters:r,onClose:T,isFilter:v}),e.jsxs("div",{className:`grid ${i?"lg:grid-cols-3 grid-cols-1 lg:gap-x-2":"grid-cols-1"} gap-y-5 mb-10 w-full`,children:[$?e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("img",{src:"/loader2.gif",className:"w-24 h-24"})}):null,g.length>0&&!$?g.map((j,k)=>e.jsx(se,{product:j,isGrid:i},k)):null,g.length===0?e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("img",{src:"/not-found.webp",className:"w-52 h-52"})}):null]})]})]})})};export{ie as default};
