import{r as c,j as e,N as v,bk as N,aj as y,c8 as O,c9 as S,ca as A,q as b,cb as T,bh as L,aJ as k,cc as C,cd as D}from"./index-6fa181a6.js";import{h as M}from"./moment-fbc5633a.js";import{P}from"./Pagination2-51485dd6.js";const B=({id:r,orderNo:l,orderType:t,date:f,orderStatus:d,isArchived:g,paymentStatus:w,total:p,refreshOrders:n})=>{const[j,x]=c.useState(!1),i=async(o,a)=>{o.preventDefault(),x(!0);const s=await A({orderId:a});s.status===200?(b(s.data.msg,"success",1e3),x(!1),n()):(b(s.data.message,"error",1e3),x(!1))},[m,h]=c.useState(!1),u=async(o,a)=>{o.preventDefault(),h(!0);const s=await T({orderId:a});s.status===200?(b(s.data.msg,"success",1e3),h(!1),n()):(b(s.data.message,"error",1e3),h(!1))};return e.jsxs("tr",{className:"border-b border-l border-r border-b6 text-xs",children:[e.jsx("td",{className:"whitespace-nowrap px-5 py-3",children:l}),e.jsx("td",{className:"whitespace-nowrap px-5 py-3 capitalize",children:e.jsx("span",{className:"bg-b7/20 text-b7 px-2 rounded-2xl py-1 font-semibold",children:t})}),e.jsx("td",{className:"whitespace-nowrap px-5 py-3 capitalize",children:f}),e.jsx("td",{className:"whitespace-nowrap px-5 py-3 capitalize",children:e.jsx("span",{className:"bg-b6/20 text-b6 px-2 rounded-2xl py-1 font-semibold",children:d.replace(/\-/g,"")})}),e.jsxs("td",{className:"whitespace-nowrap  px-5 py-4 text-b6 font-semibold text-sm ",children:["$",p]}),e.jsxs("td",{className:"flex items-center justify-center whitespace-nowrap space-x-1 px-5 py-4",children:[e.jsx(v,{title:"View Order",to:`/admin/update-order/${l}`,className:"flex items-center justify-center bg-b3 text-white hover:bg-white hover:text-b3 border-2 border-white hover:border-b3 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:e.jsx(N,{className:"text-base"})}),g?e.jsx(e.Fragment,{children:m?e.jsx("button",{title:"UnArchive Order",className:"flex items-center justify-center bg-green-500 text-white hover:bg-white hover:text-green-500 border-2 border-white hover:border-green-500 text-sm w-9 h-9 rounded-full cursor-wait",children:e.jsx(y,{style:"w-3 h-3"})}):e.jsx("button",{onClick:o=>u(o,r),title:"UnArchive Order",className:"flex items-center justify-center bg-green-500 text-white hover:bg-white hover:text-green-500 border-2 border-white hover:border-green-500 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:e.jsx(O,{className:"text-base"})})}):e.jsx(e.Fragment,{children:j?e.jsx("button",{title:"Archive Order",className:"flex items-center justify-center bg-orange-500 text-white hover:bg-white hover:text-orange-500 border-2 border-white hover:border-orange-500 text-sm w-9 h-9 rounded-full cursor-wait",children:e.jsx(y,{style:"w-3 h-3"})}):e.jsx("button",{onClick:o=>i(o,r),title:"Archive Order",className:"flex items-center justify-center bg-orange-500 text-white hover:bg-white hover:text-orange-500 border-2 border-white hover:border-orange-500 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:e.jsx(S,{className:"text-base"})})})]})]})},F=({orders:r,refreshOrders:l})=>e.jsx("div",{className:"flex flex-col",children:e.jsx("div",{className:"overflow-x-auto sm:-mx-6 lg:-mx-8",children:e.jsx("div",{className:"inline-block min-w-full py-2 sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"min-w-full text-center text-sm font-light",children:[e.jsx("thead",{className:"border-b border-l border-b3 bg-b3 font-medium text-white",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:" px-6 py-4",children:"Order #"}),e.jsx("th",{scope:"col",className:" px-6 py-4",children:"Order Type"}),e.jsx("th",{scope:"col",className:" px-6 py-4",children:"Date"}),e.jsx("th",{scope:"col",className:" px-6 py-4",children:"Order Status"}),e.jsx("th",{scope:"col",className:" px-6 py-4",children:"Total"}),e.jsx("th",{scope:"col",className:" px-6 py-4",children:"Actions"})]})}),e.jsx("tbody",{children:r!=null&&r.length?r.map(t=>e.jsx(B,{orderType:t.orderType,isArchived:t.isArchived,orderStatus:t.orderStatus,paymentStatus:t.paymentStatus,refreshOrders:l,id:t._id,orderNo:t.orderNo,date:M(t.createdAt).format("DD MMMM YYYY"),status:t.orderStatus,total:t.grandTotal})):null})]})})})})}),I=()=>{const[r,l]=c.useState([]),[t,f]=c.useState(1),[d,g]=c.useState(16),[w,p]=c.useState(0),[n,j]=c.useState(""),[x,i]=c.useState(!1),[m,h]=c.useState("all-orders"),u=async()=>{i(!0);const s=await C({page:t,limit:d},{orderType:m});s.status===200?(i(!1),l(s.data.orders),p(Math.ceil(s.data.totalCount/d))):(i(!1),l([]))};c.useEffect(()=>{(n==null?void 0:n.length)===0&&u()},[m,t,n]);const o=async a=>{console.log("searfch"),a.preventDefault(),i(!0);const s=await D({orderNo:n});s.status===200?(i(!1),l(s.data.orders),p(Math.ceil(s.data.totalCount/d))):(i(!1),l([]))};return e.jsx(e.Fragment,{children:e.jsxs(L,{children:[e.jsxs("div",{className:"flex space-x-5 items-center mb-2 bg-white py-3 px-5 w-full",children:[e.jsx(v,{to:"/admin/create-order",className:"bg-b3 text-white text-xs px-3 rounded-2xl cursor-pointer py-2",children:"Create Order"}),e.jsx("div",{className:"w-96",children:e.jsx(k,{onChange:a=>h(a.target.value),options:["All Orders","Delivery","Pickup","Archived"]})}),e.jsxs("form",{onSubmit:o,className:"flex w-full justify-end space-x-3",children:[e.jsx("input",{name:"search",placeholder:"Search #12345",value:n,onChange:a=>j(a.target.value),className:"text-xs px-2 outline-none border border-b3 rounded-md"}),e.jsx("button",{className:"border border-b3 text-b3 text-xs px-2 rounded-md cursor-pointer py-1",children:"Search"})]})]}),x?e.jsx("div",{className:"flex w-full justify-center h-24 items-center",children:e.jsx("img",{src:"/loading.gif",className:"h-12"})}):r.length>0?e.jsxs(e.Fragment,{children:[e.jsx(F,{refreshOrders:u,orders:r}),e.jsx(P,{page:t,setPage:f,totalPages:w})]}):e.jsx("div",{className:"flex w-full justify-center h-52 items-center",children:e.jsx("img",{src:"/not-found.webp",className:"w-32"})})]})})};export{I as default};
