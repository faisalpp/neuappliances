import{r as a,a3 as d,u as le,a2 as ie,j as s,L as B,by as i,n as K,bG as ne,bH as oe,z as M,bI as ce,ah as de,bJ as T}from"./index-3f5a1aa3.js";import{C as ue,B as me,L as pe}from"./LeftArrowSvg-b6637454.js";import{C as $}from"./CustomSelect-2d367c40.js";import{c as he,a as l}from"./index.esm-17fc11ff.js";import"./CustomInput-42ebd2b8.js";const je=()=>{const H=async()=>{const e=await oe();console.log(e)};a.useEffect(()=>{H()},[]);const Q=[{name:"USA",value:"usa"}],V=[{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"}],W=he().shape({email:l().required("Email is Required!"),firstName:l().nullable(),lastName:l().required("Last Name is Required!"),address:l().required("Address is Required!"),appartment:l().nullable(),city:l().required("City is Required!"),country:l().required("Country is Required!"),province:l().required("Province is Required!"),postalCode:l().required("Postal Code is Required!"),phone:l().required("Phone is Required!")}),R=d(e=>e.cart.deliveryOrders),X=d(e=>e.cart.pickupOrders),t=d(e=>e.order.orderInfo),w=le();R.length===0&&X.length===0&&w("/mycart");const u=d(e=>e.cart.deliveryInfo),[k,m]=a.useState(""),[E,p]=a.useState(!1),[P,h]=a.useState(""),[L,x]=a.useState(""),[O,g]=a.useState(""),[_,f]=a.useState(""),[U,b]=a.useState(""),[Y,y]=a.useState("USA"),[I,v]=a.useState("Alberta"),[n,j]=a.useState(""),[F,N]=a.useState(""),[C,S]=a.useState(!1),Z=d(e=>e.user.auth),ee=()=>{const e=JSON.parse(localStorage.getItem("neu_customer_address"));!Z&&e?(console.log("pre"),m(e.email),p(e.keepUpdates),h(e.firstName),x(e.lastName),g(e.address),f(e.appartment),b(e.city),y(e.country),v(e.province),j(e.postalCode),N(e.phone),S(e.saveAddress)):(console.log(!!(t!=null&&t.keepUpdates)),m(t==null?void 0:t.email),p(!0),h(t==null?void 0:t.firstName),x(t==null?void 0:t.lastName),g(t==null?void 0:t.address),f(t==null?void 0:t.appartment),b(t==null?void 0:t.city),y(t==null?void 0:t.country),v(t==null?void 0:t.province),j(t==null?void 0:t.postalCode),N(t==null?void 0:t.phone),S(!0))};a.useEffect(()=>{ee()},[]);const[r,z]=a.useState([]),[D,xe]=a.useState(!1),q=ie(),G=e=>{const{name:o,checked:c}=e.target;o==="keepUpdates"&&p(c),o==="saveAddress"&&S(c)},se=async e=>{if(e.preventDefault(),u.shipping==="No Shipping Available!")return M("Shipping Not Available!","error",1e3),!0;const o={email:k,firstName:P,lastName:L,address:O,appartment:_,city:U,country:Y,postalCode:n,phone:F,saveAddress:C,keepUpdates:E,province:I};C&&(Z||localStorage.setItem("neu_customer_address",JSON.stringify(o)));try{await W.validate(o,{abortEarly:!1}),q(ce(o)),w("/mycart/shipping")}catch(c){if(c){let J=c.errors;z(J),J.forEach(re=>{M(re,"error",1e3)})}else z([])}},[te,A]=a.useState(!1),ae=async()=>{A(!0);const e=await de({zip:n});console.log(e),e.status==200?(A(!1),q(T({...u,location:n,shipping:e.data.zip.location.rate}))):(q(T({...u,location:n,shipping:"No Shipping Available!"})),A(!1))};return a.useEffect(()=>{n.length===5&&R.length>0&&ae()},[n]),s.jsx(s.Fragment,{children:s.jsxs(ue,{children:[s.jsx(B,{to:"/",children:s.jsx("img",{src:"/login_logo.webp",alt:""})}),s.jsx(me,{}),s.jsxs("fieldset",{className:"border border-b31 rounded-md pb-5 px-5 pt-2",children:[s.jsx("legend",{className:"mx-auto text-b16 font-medium text-sm px-3",children:"Express checkout"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsx("button",{className:"rounded text-white flex justify-center p-3 bg-[#5A31F4]",children:s.jsx("img",{src:"/payment/shoppay.webp",alt:"shoppay",className:"h-[23px] object-contain"})}),s.jsx("button",{className:"rounded text-white flex justify-center p-3 bg-[#113984]",children:s.jsx("img",{src:"/payment/paypal.webp",alt:"shoppay",className:"h-[23px] object-contain"})}),s.jsx("button",{className:"rounded text-white flex justify-center p-3 bg-black",children:s.jsx("img",{src:"/payment/pay.webp",alt:"shoppay",className:"h-[23px] object-contain"})})]})]}),s.jsx("div",{className:"text_between_line my-8",children:"OR"}),s.jsxs("form",{onSubmit:se,children:[s.jsxs("div",{className:"space-y-14px [&>*]:text-b16 [&>*]:text-sm",children:[s.jsx("h3",{className:"text-sm font-medium text-b16",children:"Contact information"}),s.jsx(i,{width:"full",name:"Email",title:"Email",iscompulsory:"false",type:"text",value:k,onChange:e=>m(e.target.value),error:!!(r&&r.includes("Email is Required!")),errormessage:"Email is Required!",placeholder:"abc@gmail.com"}),s.jsx(K.Checkbox,{onChange:e=>G(e),checked:E,defaultChecked:!1,name:"keepUpdates",id:"keep-me-update",label:"Keep me up to date on news and exclusive offers",className:"checked:bg-black border-b31",ripple:!1})]}),s.jsxs("div",{className:"space-y-14px mt-8",children:[s.jsx("h3",{className:"text-lg font-medium text-b16",children:"Shipping address"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx(i,{width:"full",name:"firstName",title:"",iscompulsory:"false",type:"text",value:P,onChange:e=>h(e.target.value),error:!!(r&&r.includes("First Name is Required!")),errormessage:"First Name is Required!",placeholder:"First Name (optional)"}),s.jsx(i,{width:"full",name:"lastName",title:"",iscompulsory:"false",type:"text",value:L,onChange:e=>x(e.target.value),error:!!(r&&r.includes("Last Name is Required!")),errormessage:"Last Name is Required!",placeholder:"Last Name"}),s.jsxs("div",{className:"col-span-2 space-y-3",children:[s.jsx(i,{width:"full",name:"address",title:"",iscompulsory:"false",type:"text",value:O,onChange:e=>g(e.target.value),error:!!(r&&r.includes("Address is Required!")),errormessage:"Address is Required!",placeholder:"Address"}),s.jsx(i,{width:"full",name:"appartment",title:"",iscompulsory:"false",type:"text",value:_,onChange:e=>f(e.target.value),error:!!(r&&r.includes("Apartment, suite is Required!")),errormessage:"Apartment, suite is Required!",placeholder:"Apartment, suite, etc. (optional)"}),s.jsx(i,{width:"full",name:"city",title:"",iscompulsory:"false",type:"text",value:U,onChange:e=>b(e.target.value),error:!!(r&&r.includes("City is Required!")),errormessage:"City is Required!",placeholder:"City"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-14px",children:[s.jsx($,{setState:y,id:"country_region",label:"Country / region",Options:Q}),s.jsx($,{setState:v,id:"province",label:"Province",Options:V}),s.jsxs("div",{className:"relative  col-span-2 md:col-span-1 [&>*]:h-full",children:[te?s.jsx("div",{className:"absolute flex rounded-lg items-center w-full justify-end px-2",children:s.jsx("img",{src:"/loader-bg.gif",className:"w-4 h-4"})}):null,s.jsx(i,{width:"full",name:"postalCode",title:"",iscompulsory:"false",type:"text",value:n,onChange:e=>j(e.target.value),error:!!(r&&r.includes("Postal Code is Required!")),errormessage:"Postal Code is Required!",placeholder:"Postal Code"})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(i,{width:"full",name:"phone",title:"",iscompulsory:"false",type:"text",value:F,onChange:e=>N(e.target.value),error:!!(r&&r.includes("Phone is Required!")),errormessage:"Phone is Required!",placeholder:"Phone"}),s.jsx("div",{className:"absolute right-3 top-3",children:s.jsx(ne,{className:"text-2xl text-b3"})})]}),s.jsx("div",{className:"[&>*]:text-b16 [&>*]:text-sm",children:s.jsx(K.Checkbox,{onChange:e=>G(e),id:"save-information",name:"saveAddress",checked:C,defaultChecked:!1,label:"Save this information for next time",className:"checked:bg-black border-b31",ripple:!1})})]})]})]}),s.jsxs("div",{className:"flex justify-between items-center w-full mt-5",children:[s.jsxs(B,{to:"/mycart",className:"flex gap-1 items-center",children:[s.jsx(pe,{}),s.jsx("span",{className:"text-sm font-medium text-b3",children:"Return to Cart"})]}),s.jsxs("button",{type:"submit",disabled:!!D,className:"flex items-center py-3 px-6 text-xs rounded-lg bg-b3 text-white",children:["Continue to Shipping ",D?s.jsx("img",{src:"/loader-bg.gif",className:"ml-2 w-4 h-4"}):null]})]})]})]})})};export{je as default};
