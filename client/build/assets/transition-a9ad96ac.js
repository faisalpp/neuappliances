import{r as l,aM as J,aN as R,aO as K,aP as q,aQ as y,aR as de,aS as Q,aT as ee,aU as w,aV as re,aW as P,aX as fe,t as F,aY as ve,aZ as $,a_ as te,a$ as ne}from"./index-0245fdef.js";function W(){let e=l.useRef(!1);return J(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function pe(e=0){let[r,t]=l.useState(e),a=W(),f=l.useCallback(s=>{a.current&&t(i=>i|s)},[r,a]),p=l.useCallback(s=>!!(r&s),[r]),v=l.useCallback(s=>{a.current&&t(i=>i&~s)},[t,a]),c=l.useCallback(s=>{a.current&&t(i=>i^s)},[t]);return{flags:r,addFlag:f,hasFlag:p,removeFlag:v,toggleFlag:c}}function he(e){let r={called:!1};return(...t)=>{if(!r.called)return r.called=!0,e(...t)}}function _(e,...r){e&&r.length>0&&e.classList.add(...r)}function z(e,...r){e&&r.length>0&&e.classList.remove(...r)}function me(e,r){let t=K();if(!e)return t.dispose;let{transitionDuration:a,transitionDelay:f}=getComputedStyle(e),[p,v]=[a,f].map(s=>{let[i=0]=s.split(",").filter(Boolean).map(o=>o.includes("ms")?parseFloat(o):parseFloat(o)*1e3).sort((o,E)=>E-o);return i}),c=p+v;if(c!==0){t.group(i=>{i.setTimeout(()=>{r(),i.dispose()},c),i.addEventListener(e,"transitionrun",o=>{o.target===o.currentTarget&&i.dispose()})});let s=t.addEventListener(e,"transitionend",i=>{i.target===i.currentTarget&&(r(),s())})}else r();return t.add(()=>r()),t.dispose}function ge(e,r,t,a){let f=t?"enter":"leave",p=K(),v=a!==void 0?he(a):()=>{};f==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let c=R(f,{enter:()=>r.enter,leave:()=>r.leave}),s=R(f,{enter:()=>r.enterTo,leave:()=>r.leaveTo}),i=R(f,{enter:()=>r.enterFrom,leave:()=>r.leaveFrom});return z(e,...r.enter,...r.enterTo,...r.enterFrom,...r.leave,...r.leaveFrom,...r.leaveTo,...r.entered),_(e,...c,...i),p.nextFrame(()=>{z(e,...i),_(e,...s),me(e,()=>(z(e,...c),_(e,...r.entered),v()))}),p.dispose}function be({container:e,direction:r,classes:t,onStart:a,onStop:f}){let p=W(),v=q(),c=y(r);J(()=>{let s=K();v.add(s.dispose);let i=e.current;if(i&&c.current!=="idle"&&p.current)return s.dispose(),a.current(c.current),s.add(ge(i,t.current,c.current==="enter",()=>{s.dispose(),f.current(c.current)})),s.dispose},[r])}function S(e=""){return e.split(" ").filter(r=>r.trim().length>1)}let k=l.createContext(null);k.displayName="TransitionContext";var Ee=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Ee||{});function Te(){let e=l.useContext(k);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function Fe(){let e=l.useContext(M);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let M=l.createContext(null);M.displayName="NestingContext";function U(e){return"children"in e?U(e.children):e.current.filter(({el:r})=>r.current!==null).filter(({state:r})=>r==="visible").length>0}function le(e,r){let t=y(e),a=l.useRef([]),f=W(),p=q(),v=P((d,n=w.Hidden)=>{let h=a.current.findIndex(({el:u})=>u===d);h!==-1&&(R(n,{[w.Unmount](){a.current.splice(h,1)},[w.Hidden](){a.current[h].state="hidden"}}),p.microTask(()=>{var u;!U(a)&&f.current&&((u=t.current)==null||u.call(t))}))}),c=P(d=>{let n=a.current.find(({el:h})=>h===d);return n?n.state!=="visible"&&(n.state="visible"):a.current.push({el:d,state:"visible"}),()=>v(d,w.Unmount)}),s=l.useRef([]),i=l.useRef(Promise.resolve()),o=l.useRef({enter:[],leave:[],idle:[]}),E=P((d,n,h)=>{s.current.splice(0),r&&(r.chains.current[n]=r.chains.current[n].filter(([u])=>u!==d)),r==null||r.chains.current[n].push([d,new Promise(u=>{s.current.push(u)})]),r==null||r.chains.current[n].push([d,new Promise(u=>{Promise.all(o.current[n].map(([m,L])=>L)).then(()=>u())})]),n==="enter"?i.current=i.current.then(()=>r==null?void 0:r.wait.current).then(()=>h(n)):h(n)}),T=P((d,n,h)=>{Promise.all(o.current[n].splice(0).map(([u,m])=>m)).then(()=>{var u;(u=s.current.shift())==null||u()}).then(()=>h(n))});return l.useMemo(()=>({children:a,register:c,unregister:v,onStart:E,onStop:T,wait:i,chains:o}),[c,v,a,E,T,o,i])}function Ce(){}let $e=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function Z(e){var r;let t={};for(let a of $e)t[a]=(r=e[a])!=null?r:Ce;return t}function Re(e){let r=l.useRef(Z(e));return l.useEffect(()=>{r.current=Z(e)},[e]),r}let we="div",ae=de.RenderStrategy;function Pe(e,r){let{beforeEnter:t,afterEnter:a,beforeLeave:f,afterLeave:p,enter:v,enterFrom:c,enterTo:s,entered:i,leave:o,leaveFrom:E,leaveTo:T,...d}=e,n=l.useRef(null),h=ee(n,r),u=d.unmount?w.Unmount:w.Hidden,{show:m,appear:L,initial:b}=Te(),[g,A]=l.useState(m?"visible":"hidden"),Y=Fe(),{register:H,unregister:N}=Y,B=l.useRef(null);l.useEffect(()=>H(n),[H,n]),l.useEffect(()=>{if(u===w.Hidden&&n.current){if(m&&g!=="visible"){A("visible");return}return R(g,{hidden:()=>N(n),visible:()=>H(n)})}},[g,n,H,N,m,u]);let j=y({enter:S(v),enterFrom:S(c),enterTo:S(s),entered:S(i),leave:S(o),leaveFrom:S(E),leaveTo:S(T)}),O=Re({beforeEnter:t,afterEnter:a,beforeLeave:f,afterLeave:p}),V=re();l.useEffect(()=>{if(V&&g==="visible"&&n.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[n,g,V]);let I=b&&!L,se=(()=>!V||I||B.current===m?"idle":m?"enter":"leave")(),x=pe(0),ue=P(C=>R(C,{enter:()=>{x.addFlag($.Opening),O.current.beforeEnter()},leave:()=>{x.addFlag($.Closing),O.current.beforeLeave()},idle:()=>{}})),oe=P(C=>R(C,{enter:()=>{x.removeFlag($.Opening),O.current.afterEnter()},leave:()=>{x.removeFlag($.Closing),O.current.afterLeave()},idle:()=>{}})),D=le(()=>{A("hidden"),N(n)},Y);be({container:n,classes:j,direction:se,onStart:y(C=>{D.onStart(n,C,ue)}),onStop:y(C=>{D.onStop(n,C,oe),C==="leave"&&!U(D)&&(A("hidden"),N(n))})}),l.useEffect(()=>{I&&(u===w.Hidden?B.current=null:B.current=m)},[m,I,g]);let X=d,ce={ref:h};return L&&m&&b&&(X={...X,className:fe(d.className,...j.current.enter,...j.current.enterFrom)}),F.createElement(M.Provider,{value:D},F.createElement(ve,{value:R(g,{visible:$.Open,hidden:$.Closed})|x.flags},te({ourProps:ce,theirProps:X,defaultTag:we,features:ae,visible:g==="visible",name:"Transition.Child"})))}function Se(e,r){let{show:t,appear:a=!1,unmount:f,...p}=e,v=l.useRef(null),c=ee(v,r);re();let s=ne();if(t===void 0&&s!==null&&(t=(s&$.Open)===$.Open),![!0,!1].includes(t))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[i,o]=l.useState(t?"visible":"hidden"),E=le(()=>{o("hidden")}),[T,d]=l.useState(!0),n=l.useRef([t]);J(()=>{T!==!1&&n.current[n.current.length-1]!==t&&(n.current.push(t),d(!1))},[n,t]);let h=l.useMemo(()=>({show:t,appear:a,initial:T}),[t,a,T]);l.useEffect(()=>{if(t)o("visible");else if(!U(E))o("hidden");else{let b=v.current;if(!b)return;let g=b.getBoundingClientRect();g.x===0&&g.y===0&&g.width===0&&g.height===0&&o("hidden")}},[t,E]);let u={unmount:f},m=P(()=>{var b;T&&d(!1),(b=e.beforeEnter)==null||b.call(e)}),L=P(()=>{var b;T&&d(!1),(b=e.beforeLeave)==null||b.call(e)});return F.createElement(M.Provider,{value:E},F.createElement(k.Provider,{value:h},te({ourProps:{...u,as:l.Fragment,children:F.createElement(ie,{ref:c,...u,...p,beforeEnter:m,beforeLeave:L})},theirProps:{},defaultTag:l.Fragment,features:ae,visible:i==="visible",name:"Transition"})))}function Le(e,r){let t=l.useContext(k)!==null,a=ne()!==null;return F.createElement(F.Fragment,null,!t&&a?F.createElement(G,{ref:r,...e}):F.createElement(ie,{ref:r,...e}))}let G=Q(Se),ie=Q(Pe),xe=Q(Le),He=Object.assign(G,{Child:xe,Root:G});export{He as $};
