import{p as X,q as r,r as a,u as Y,j as e,bo as Z,av as d,f as I,aV as _,bM as ee,bL as te,an as se,w as T}from"./index-5c24a57c.js";import{G as ae}from"./category-432a1d77.js";import{B as re}from"./BlogEditor-17e23df8.js";import{c as le}from"./applianceTips-2786c14a.js";const ue=()=>{const k=X().shape({title:r().required("Title is required"),slug:r().required("Slug is required"),thumbnail:r().nullable(!0),category:r().required("Tip Category is required"),content:r().required("Tip Content is required"),count:r().required("Tips Count is required"),metaTitle:r().nullable(!0),metaDescription:r().nullable(!0),metaKeywords:r().nullable(!0)}),[n,S]=a.useState([]),[A,B]=a.useState([]),v=a.useRef(),L=Y(),[O,m]=a.useState(!1),[x,$]=a.useState(""),[p,C]=a.useState(""),[f,N]=a.useState(""),[g,q]=a.useState(""),[l,h]=a.useState([]),[y,D]=a.useState(""),[o,E]=a.useState(""),[G,H]=a.useState(""),[K,M]=a.useState(""),[w,R]=a.useState(""),[b,F]=a.useState(""),j=a.useRef(),J=t=>{t.key===" "&&b.length>0&&(h([...l,b]),setTimeout(()=>{F(""),j.current.focus(),j.current.setSelectionRange(0,0)},0))},U=(t,s)=>{t.preventDefault();const i=l.filter((c,u)=>u!==s);h(i)},V=async t=>{t.preventDefault(),m(!0);try{const c={title:p,slug:y,thumbnail:o,category:K,content:w,metaTitle:f,metaDescription:g,metaKeywords:JSON.stringify(l),count:x};await k.validate(c,{abortEarly:!1})}catch(c){if(c){let u=c.errors;S(u),u.forEach(Q=>{T(Q,"error",1e3)})}else S([])}const s=new FormData;s.set("title",p),s.set("slug",y),s.set("thumbnail",o),s.set("category",K),s.set("content",w),s.set("metaTitle",f),s.set("metaDescription",g),s.set("count",x),s.set("metaKeywords",JSON.stringify(l));const i=await le(s);i.status===200?(m(!1),C(""),D(""),R(""),N(""),q(""),h(""),L("/admin/manage-appliance-tips"),T(i.data.msg,"success",1e3)):(m(!1),T(i.data.message,"error",1e3))};a.useEffect(()=>{P()},[]);const P=async()=>{const t=await ae();t.status===200&&(M(t.data.categories[0].title.toLowerCase()),B(t.data.categories))},W=t=>{t.preventDefault();const s=t.target.files[0];s?(E(s),H(s)):E(G)},z=()=>{v.current.click()};return e.jsx(e.Fragment,{children:e.jsx(Z,{children:e.jsxs("form",{onSubmit:V,className:"flex flex-col space-y-5 w-full py-5 bg-white",children:[e.jsxs("div",{className:"flex w-full",children:[e.jsxs("div",{className:"flex flex-col space-y-10 w-1/2",children:[e.jsx(d,{width:"full",name:"title",title:"Tip Title",iscompulsory:"true",type:"text",value:p,onChange:t=>{C(t.target.value),D(t.target.value.toLowerCase().replace(/\s/g,"-").replace(/\./g,""))},error:!!(n&&n.includes("Title is required")),errormessage:"Title is required",placeholder:"Enter Tip Title"}),e.jsx(d,{width:"full",name:"slug",title:"Tip Slug",readOnly:!0,iscompulsory:"true",type:"text",value:y,error:!!(n&&n.includes("Slug is required")),errormessage:"Slug is required",placeholder:"Enter Tip Slug"}),e.jsx(d,{width:"full",name:"count",title:"Tips Count",iscompulsory:"true",type:"text",value:x,onChange:t=>$(t.target.value),error:!!(n&&n.includes("Tip Count is required")),errormessage:"Tip Count is required",placeholder:"Enter Tips Count Present In Blog"})]}),e.jsxs("div",{className:"flex flex-col space-y-8 items-center w-1/2",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("img",{src:o!=""?window.URL.createObjectURL(o):"/no-image.jfif",className:`self-center rounded-xl ${o?"h-28 w-36":"h-26 w-32"}`}),e.jsx("button",{onClick:z,type:"button",className:"flex justify-center items-center self-center cursor-pointer rounded-md py-1 w-fit bg-b3",children:e.jsxs("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:[e.jsx("span",{className:"text-xs",children:"Select Thumbnail"}),e.jsx(I,{className:"text-2xl"})]})}),e.jsx("input",{ref:v,name:"thumbnail",type:"file",className:"hidden",onChange:t=>W(t)})]}),e.jsx("div",{className:"flex justify-center space-x-5 w-full",children:e.jsx(_,{name:"categor",title:"Select Tip Category",iscompulsory:"true",onChange:t=>M(t.target.value),options:A})})]})]}),e.jsx(re,{state:w,setState:R}),e.jsx(ee,{title:"Tip Seo",answer:e.jsxs("div",{className:"flex flex-col space-y-2 w-full",children:[e.jsx(d,{width:"full",name:"title",title:"Meta Title",type:"text",value:f,onChange:t=>N(t.target.value),placeholder:"Enter Meta Title"}),e.jsx(te,{width:"full",title:"Meta Description",value:g,onChange:t=>q(t.target.value),placeholder:"Write Meta Description Here.."}),e.jsx("h5",{className:"text-xs font-semibold",children:"Meta Keywords"}),e.jsx("div",{className:"flex flex-wrap w-full py-3 px-2 rounded-xl border-[1px] borders-[0,0,0,0,0.15]",children:e.jsxs("div",{className:"flex flex-wrap gap-y-2 items-center gap-x-2 w-full h-auto ",children:[l==null?void 0:l.map((t,s)=>e.jsxs("span",{className:"flex items-center bg-b6 text-sm px-2 py-1 text-white rounded-2xl",children:[t,e.jsx(se,{onClick:i=>U(i,s),className:"text-white bg-red-500 ml-1 text-xs cursor-pointer rounded-full"})]},s)),e.jsx("div",{}),e.jsx("input",{ref:j,placeholder:"Hit Space To Insert",value:b,onKeyDown:t=>J(t),onChange:t=>F(t.target.value),className:"border-none outline-none mx-5 text-sm"})]})})]}),parent:"w-full [&>div]:py-4 [&>div]:px-6 [&>div]:border [&>div]:border-b33 [&>div]:rounded-xl h-auto border-0",icon:"text-xl",textStyle:"font-bold text-sm",child:"justify-center w-full [&>p]:text-sm !mt-0"}),e.jsx("button",{type:"submit",className:"flex justify-center items-center cursor-pointer rounded-md py-1 w-full bg-b3",children:O?e.jsx("img",{src:"/loader-bg.gif",className:"w-8"}):e.jsxs("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:[e.jsx("span",{className:"text-xs",children:"Create"}),e.jsx(I,{className:"text-2xl"})]})})]})})})};export{ue as default};
