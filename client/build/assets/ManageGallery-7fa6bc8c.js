import{K as F,J as M,r as a,j as e,Q as d}from"./index-9086772f.js";import{A as R}from"./AdminAccount-c0a1c178.js";/* empty css                      */import{ak as y,aq as G}from"./ScrollToTop-9454a300.js";import{P as H}from"./Pagination2-c10d6d97.js";import{a as b,n as E}from"./index.esm-d1123c14.js";import{P as U}from"./Popup-4530e9e5.js";import"./MainLayout-9f08b4ec.js";import"./index-57df3b0a.js";const T=async o=>{let r;try{r=await F.post("/api/admin/upload-gallery-image",o)}catch(i){return i}return r},_=async o=>{let r;try{r=await M.post("/api/admin/delete-gallery-image",o)}catch(i){return i}return r},Z=()=>{const o=a.useRef(null),r=()=>{o.current.click()},[i,h]=a.useState([]),[N,m]=a.useState(!1),[j,g]=a.useState(!1),[v,f]=a.useState(!1),[p,C]=a.useState(1),[w,q]=a.useState(16),[S,I]=a.useState(0),[n,c]=a.useState([]),[P,u]=a.useState(!1),k=async t=>{t.preventDefault(),m(!0);const s=new FormData;n.forEach((L,B)=>{s.append(`image_${B}`,L)});const l=await T(s);l.status===200?(x(),m(!1),c([]),u(!1),d.success(l.data.msg,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})):(m(!1),c([]),u(!1),d.error(l.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}))},x=async()=>{f(!0);const s=await G({page:p,limit:w});console.log(s),s.status===200?(f(!1),h(s.data.gallery),I(Math.ceil(s.data.totalCount/w))):(f(!1),h([]))};a.useEffect(()=>{x()},[p]);const A=async(t,s)=>{t.preventDefault(),console.log(s),g(!0);const l=await _({id:s});console.log(l),l.status===200?(d.success(l.data.msg,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),x(),g(!1)):(d.error(l.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),g(!1))},O=t=>{console.log(t.target.files),c(s=>[...s,...t.target.files]),console.log(n)},D=(t,s)=>{t.preventDefault();const l=[...n];l.splice(s,1),c(l)};return e.jsxs(e.Fragment,{children:[e.jsx(U,{state:P,setState:u,children:e.jsxs("form",{className:"flex flex-col items-center space-y-3 h-96 w-full",children:[e.jsx("div",{className:"grid grid-cols-4 mt-5 gap-x-5 gap-y-5 w-full h-full overflow-x-hidden overflow-y-auto",children:n.length>0?n.map((t,s)=>e.jsxs("div",{className:"relative border-2 border-b6 rounded-lg h-fit",children:[e.jsx("div",{className:"absolute right-1 top-1",children:e.jsx("div",{onClick:l=>D(l,s),className:"flex justify-end w-full bg-white rounded-full",children:e.jsx(y,{className:"text-red-500 text-xl shadow-xl rounded-full cursor-pointer"})})}),e.jsx("img",{src:window.URL.createObjectURL(t),className:"w-full h-24"})]},s)):e.jsx("div",{className:"flex justify-center items-center h-full w-full",children:e.jsx("img",{src:"/no-image.jfif",className:"w-36 "})})}),e.jsx("button",{type:"button",onClick:r,className:"flex justify-center items-center cursor-pointer rounded-md py-1 w-full bg-b3",children:e.jsxs("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:[e.jsx("span",{className:"text-xs",children:"Select Images"}),e.jsx(b,{className:"text-2xl"})]})}),e.jsx("button",{type:"button",onClick:k,className:"flex justify-center items-center cursor-pointer rounded-md py-1 w-full bg-b3",children:N?e.jsx("img",{src:"/loader-bg.gif",className:"w-8"}):e.jsxs("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:[e.jsx("span",{className:"text-xs",children:"Upload"}),e.jsx(b,{className:"text-2xl"})]})}),e.jsx("input",{type:"file",ref:o,multiple:!0,onChange:t=>O(t),style:{display:"none"}})]})}),e.jsxs(R,{children:[e.jsx("div",{className:"flex w-full justify-end space-x-3",children:e.jsx(y,{onClick:()=>u(!0),className:"text-b3 text-3xl shadow-xl rounded-full cursor-pointer"})}),v?e.jsx("div",{className:"flex mt-32 justify-center  w-full h-full",children:e.jsx("img",{src:"/loader-bg.gif",className:"w-24 h-24"})}):i.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-4 mt-5 gap-x-5 gap-y-5 w-full",children:i.map((t,s)=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute mt-2 w-full bg-white ",children:e.jsx("span",{title:"Delete Image",onClick:l=>{j||A(l,t._id)},className:"absolute right-1 flex items-center justify-center bg-red-500 text-white  text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:j?e.jsx("img",{src:"/loader-bg.gif",className:"w-4 h-4"}):e.jsx(E,{className:"text-base"})})}),e.jsx("img",{controls:!0,className:"object-cover rounded-2xl xl:h-[150px] xl:w-[200px] lg:w-[200px] lg:h-32 w-32 h-32 ",src:t.url},s)]}))}),e.jsx(H,{page:p,setPage:C,totalPages:S})]}):e.jsx("div",{className:"flex mt-32 justify-center w-full h-full",children:e.jsx("img",{src:"/not-found.webp",className:"w-36 h-36"})})]})]})};export{Z as default};
