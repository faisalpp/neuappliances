import{j as e,N as M,h as D,i as p,r as t,l as _,m as O,n as k,P as $,o as z,p as V,G as q,q as K,s as U,e as H,t as Y,v as J,w as W,x as X,y as Z,z as Q}from"./index-8a97a798.js";import{$ as ee}from"./transition-9998ab95.js";const se=({isGrid:a,product:s})=>{const r=({numberOfTimes:g})=>{const l=Array.from({length:g},(d,n)=>e.jsx(p,{className:"text-b7 text-lg"},n));return e.jsx("div",{className:"flex mt-2 items-center",children:l})},o=s.media.find(g=>g.file==="image");return e.jsx(e.Fragment,{children:a?e.jsx("div",{className:"flex flex-col items-center border-[1px] border-gray-200 rounded-2xl w-12/12 h-fit py-5 cursor-pointer",children:e.jsxs(M,{to:`/product/${s.slug}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:o.data,alt:"Product Feature Image",className:"h-[330px] w-[355px] object-contain"}),s.salePrice!==""?e.jsxs("span",{className:"absolute -top-2 right-0 bg-b7 rounded-2xl font-semibold px-5 py-2 text-xs",children:[(100-s.salePrice/s.regPrice*100).toFixed(0),"% OFF"]}):null]}),e.jsx("p",{className:"font-semibold text-sm px-5 line-clamp-3",children:s.title}),s.salePrice!==""?e.jsxs("div",{className:"flex space-x-20 mt-5",children:[e.jsxs("h4",{className:"text-b3 font-semibold",children:["$",s.salePrice]}),e.jsxs("div",{className:"flex justify-end w-full space-x-2 items-center",children:[e.jsxs("strike",{children:["$",s.regPrice]}),e.jsxs("span",{className:"bg-b4 rounded-xl font-semibold px-2 py-1 text-xs",children:["-",(100-s.salePrice/s.regPrice*100).toFixed(0),"%"]})]})]}):e.jsx("div",{className:"flex space-x-20 mt-5",children:e.jsxs("h4",{className:"text-b3 font-semibold",children:["$",s.regPrice]})}),e.jsxs("div",{className:"flex space-x-20 mt-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h4",{className:"text-sm font-semibold min-w-20 w-20",children:"Cosmetic Rating"}),e.jsx(D,{})]}),e.jsx(r,{numberOfTimes:parseInt(s.rating)})," "]}),e.jsxs("div",{className:"flex items-center space-x-10 mt-2",children:[e.jsxs("div",{className:"flex font-semibold text-sm",children:[e.jsx("h4",{children:"Discount"})," %"]}),e.jsx("div",{className:"w-[150px] bg-gray-100 rounded-lg",children:e.jsx("span",{className:"flex rounded-lg bg-gradient-to-r from-b4 to-b7 w-28 h-2"})})]})]})}):e.jsx(M,{className:"h-fit",to:`/product/${s.slug}`,children:e.jsxs("div",{className:"flex lg:space-x-10 space-x-2 border-[1px] border-gray-200 rounded-2xl w-full lg:py-10 py-5 lg:px-8 px-2 cursor-pointer",children:[e.jsxs("div",{className:"relative w-44 coxs:w-52",children:[e.jsx("img",{src:o.data,alt:"Product Feature Image",className:"w-60 h-60 object-contain"}),s.salePrice!==""?e.jsxs("span",{className:"absolute flex lg:-top-5 -top-4 right-0 lg:-right-6 bg-b4 rounded-2xl font-semibold px-3 py-1 lg:py-2 sm:text-xs text-[8px] coxs:text-[11px]",children:[(100-s.salePrice/s.regPrice*100).toFixed(0),"% OFF"]}):null]}),e.jsxs("div",{className:"flex flex-col lg:px-5 px-1 w-[60%] 3xl:w-[55%]",children:[e.jsx("div",{className:"relative",children:e.jsx("p",{className:"font-semibold text-sm lg:text-lg 3xl:text-xl",children:s.title})}),e.jsxs("div",{className:"flex maxcosm:flex-col sm:items-center gap-1 coxs:gap-2 lg:mt-5 mt-1 xs:mt-2",children:[e.jsxs("div",{className:"flex items-center gap-6 sm:gap-10",children:[e.jsxs("h4",{className:"text-b3 font-semibold lg:text-[16px] text-xs",children:["$",s.salePrice!=""?s.salePrice:s.regPrice]}),s.salePrice!==""?e.jsx("span",{className:"lg:text-[16px] text-xs",children:e.jsxs("strike",{children:["$",s.regPrice]})}):null]}),e.jsx("div",{children:s.salePrice!==""?e.jsxs("span",{className:"bg-b4 rounded-xl font-semibold px-2 py-1 text-xs",children:["- ",(100-s.salePrice/s.regPrice*100).toFixed(0),"%"]}):null})]}),e.jsxs("div",{className:"flex maxxs:flex-col flex-wrap coxs:items-center gap-x-6 lg:mt-4 mt-1 coxs:mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsxs("h4",{className:"text-xs lg:text-sm font-semibold w-max",children:["Cosmetic ",e.jsx("br",{})," Rating"]}),e.jsx(D,{})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(r,{numberOfTimes:s.rating})})]}),e.jsxs("div",{className:"xs:flex hidden items-center gap-3 sm:gap-x-6 mt-2",children:[e.jsxs("div",{className:"flex font-semibold text-xs lg:text-sm gap-1 sm:gap-2 items-center",children:[e.jsx("h4",{children:"Discount"})," %"]}),e.jsx("div",{className:"w-full bg-gray-100 rounded-lg",children:e.jsx("span",{className:"flex rounded-lg bg-gradient-to-r from-b4 to-b7 w-32 h-2"})})]})]})]})})})},C=({title:a,children:s})=>{t.useState(!1);const[r,o]=t.useState(!0);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col w-full border-b-[1px] py-4 h-auto",children:[e.jsxs("div",{className:"flex items-center border-b-gray-300 cursor-pointer",onClick:()=>o(g=>!g),children:[e.jsx("h6",{className:"font-bold w-72 text-sm",children:a}),e.jsx("div",{className:"flex items-center w-full justify-end",children:r?e.jsx(_,{className:"text-2xl"}):e.jsx(O,{className:"text-2xl"})})]}),e.jsx(ee,{show:r,className:"flex flex-col gap-2 h-auto mt-3 cursor-pointer",children:s})]})})},te=({filters:a,setFilt:s,filt:r})=>{const o=a.reduce((l,d)=>l+d.productCount,0),g=(l,d)=>{l.preventDefault(),d==="all"?(delete r.category,s(n=>({...n}))):s(n=>({...n,category:d}))};return e.jsx(e.Fragment,{children:e.jsxs(C,{title:"Appliance Type",children:[e.jsxs("div",{className:"flex text-sm hover:underline",children:[e.jsx("h6",{onClick:l=>g(l,"all"),children:"All"}),e.jsx("div",{className:"flex justify-end w-full text-xs",children:e.jsxs("span",{children:["(",o,")"]})})]}),a?a.map(l=>l.productCount>0?e.jsx("span",{onClick:d=>g(d,l.slug),children:e.jsxs("div",{className:"flex text-sm hover:underline",children:[e.jsx("h6",{className:"w-full ",children:l.title}),e.jsx("div",{className:"flex justify-end w-full text-xs",children:e.jsxs("span",{children:["(",l.productCount,")"]})})]})}):null):null]})})},le=({filters:a,setFilt:s,filt:r})=>{const[o,g]=t.useState(),[l,d]=t.useState(),[n,N]=t.useState(),[j,i]=t.useState(r.rating===3),[u,b]=t.useState(r.rating===4),[x,m]=t.useState(r.rating===5),w=async(h,v)=>{h?s(y=>({...y,rating:v})):(delete r.rating,s(y=>({...y})))},P=(h,v,y)=>{switch(h){case 1:{i(v),b(c=>c&&!c),m(c=>c&&!c),w(v,y);break}case 2:{b(v),i(c=>c&&!c),m(c=>c&&!c),w(v,y);break}case 3:{m(v),b(c=>c&&!c),i(c=>c&&!c),w(v,y);break}}};return t.useEffect(()=>{g(a.find(h=>h._id===5)),d(a.find(h=>h._id===4)),N(a.find(h=>h._id===3))},[a]),e.jsx(e.Fragment,{children:e.jsxs(C,{title:"Comatic Rating",children:[o?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k.Checkbox,{ripple:!1,checked:j,onChange:h=>P(1,h.target.checked,5),className:"checked:bg-b3 checked:text-white"}),e.jsxs("span",{className:"flex",children:[e.jsx(p,{className:"text-b7"}),e.jsx(p,{className:"text-b7"}),e.jsx(p,{className:"text-b7"}),e.jsx(p,{className:"text-b7"}),e.jsx(p,{className:"text-b7"})]})]}),e.jsx("div",{className:"flex justify-end w-full text-xs",children:e.jsxs("span",{children:["(",o?o==null?void 0:o.count:0,")"]})})]}):null,l?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k.Checkbox,{ripple:!1,checked:u,onChange:h=>P(2,h.target.checked,4),className:"checked:bg-b3 checked:text-white"}),e.jsxs("span",{className:"flex",children:[e.jsx(p,{className:"text-b7"}),e.jsx(p,{className:"text-b7"}),e.jsx(p,{className:"text-b7"}),e.jsx(p,{className:"text-b7"})]})]}),e.jsx("div",{className:"flex justify-end w-full text-xs",children:e.jsxs("span",{children:["(",l?l==null?void 0:l.count:0,")"]})})]}):null,n?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k.Checkbox,{ripple:!1,checked:x,onChange:h=>P(3,h.target.checked,3),className:"checked:bg-b3 checked:text-white"}),e.jsxs("span",{className:"flex",children:[e.jsx(p,{className:"text-b7"}),e.jsx(p,{className:"text-b7"}),e.jsx(p,{className:"text-b7"})]})]}),e.jsx("div",{className:"flex justify-end w-full text-xs",children:e.jsxs("span",{children:["(",n?n==null?void 0:n.count:0,")"]})})]}):null]})})},ae=({sale:a,reg:s,setFilt:r,filt:o})=>{const[g,l]=t.useState(!1),[d,n]=t.useState(!1),N=i=>{i.preventDefault(),l(i.target.checked),i.target.checked?r(u=>({...u,salePrice:{$exists:!0}})):(delete o.salePrice,r(u=>({...u})))},j=i=>{i.preventDefault(),n(i.target.checked),i.target.checked?r(u=>({...u,regPrice:{$exists:!1}})):(delete o.regPrice,r(u=>({...u})))};return e.jsx(e.Fragment,{children:e.jsxs(C,{title:"On Sale",children:[a.length>0?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k.Checkbox,{ripple:!1,checked:g,onChange:i=>N(i),className:"checked:bg-b3 checked:text-white"}),e.jsx("span",{className:"flex text-sm w-max",children:"Yes"})]}),e.jsx("div",{className:"flex justify-end w-full text-xs",children:e.jsxs("span",{children:["(",a.length>0?a[0].count:null,")"]})})]}):null,s.length>0?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k.Checkbox,{ripple:!1,checked:d,onChange:i=>j(i),className:"checked:bg-b3 checked:text-white"}),e.jsx("span",{className:"flex text-sm w-max",children:"No"})]}),e.jsx("div",{className:"flex justify-end w-full text-xs",children:e.jsxs("span",{children:["(",s.length>0?s[0].count:null,")"]})})]}):null]})})};const E=({min:a,max:s,setFilt:r})=>{const[l,d]=t.useState(200),[n,N]=t.useState(8e3),j=t.useRef(null),i=t.useRef(null),u=t.useRef(null),b=t.useCallback(x=>Math.round((x-a)/(s-a)*100),[a,s]);return t.useEffect(()=>{if(i.current){const x=b(l),m=b(+i.current.value);u.current&&(u.current.style.left=`${x}%`,u.current.style.width=`${m-x}%`)}},[l,b]),t.useEffect(()=>{if(j.current){const x=b(+j.current.value),m=b(n);u.current&&(u.current.style.width=`${m-x}%`)}},[n,b]),t.useEffect(()=>{setTimeout(()=>{r(x=>({...x,salePrice:{$gte:l},regPrice:{$lte:n}}))},1500)},[l,n]),e.jsx(C,{title:"Price",children:e.jsxs("div",{className:"w-full pb-8 relative",id:"priceSlider",children:[e.jsxs("div",{className:"flex items-center gap-2 w-full mb-5",children:[e.jsx("input",{type:"number",value:l,onKeyDown:x=>{const m=Math.min(Math.max(+x.target.value,a),s);d(m),r(w=>({...w,range:{min:m}}))},className:"w-[45%] m-0 rounded-md text-b16 px-4 py-2 outline-none border border-[#C9C9C9]"}),e.jsx("span",{children:"-"}),e.jsx("input",{type:"number",value:n,onKeyDown:x=>{const m=Math.min(Math.max(+x.target.value,a),s);N(m)},className:"w-[45%] m-0 rounded-md text-b16 px-4 py-2 outline-none border border-[#C9C9C9]"})]}),e.jsx("input",{type:"range",min:a,max:s,step:5,value:l,ref:j,onChange:x=>{const m=Math.min(+x.target.value,n-1);d(m),x.target.value=m.toString()},className:z("thumb thumb--zindex-3",{"thumb--zindex-5":l>s-100})}),e.jsx("input",{type:"range",min:a,max:s,value:n,ref:i,onChange:x=>{const m=Math.max(+x.target.value,l+1);N(m),x.target.value=m.toString()},className:"thumb thumb--zindex-4"}),e.jsxs("div",{className:"slider",children:[e.jsx("div",{className:"slider__track"}),e.jsx("div",{ref:u,className:"slider__range"}),e.jsxs("div",{className:"flex justify-between absolute left-1 right-1 top-4 text-xs",children:[e.jsx("div",{className:"",children:a}),e.jsx("div",{className:"",children:"99"}),e.jsx("div",{className:"",children:"999"}),e.jsx("div",{className:"",children:s})]})]})]})})};E.propTypes={min:$.number.isRequired,max:$.number.isRequired,onChange:$.func.isRequired};const ne=({onClose:a,isFilter:s,categoriesFilters:r,ratingFilters:o,saleFilter:g,regularFilter:l,setQuery:d,query:n})=>{const N=i=>{i.stopPropagation()},j=s?"maxlg:flex maxlg:top-0 maxlg:bottom-0":"maxlg:-bottom-[420px] maxlg:opacity-0 maxlg:pointer-events-none";return e.jsx("div",{className:`maxlg:fixed maxlg:bg-black/20 items-end maxlg:left-0 maxlg:right-0 lg:max-w-[240px] lg:h-full lg:sticky lg:top-10 z-50 duration-300 ${j}`,onClick:a,children:e.jsxs("div",{className:"lg:flex flex-col w-full maxlg:max-h-[398px] [&>div]:maxlg:px-10 pb-10 maxlg:rounded-tl-2xl maxlg:rounded-tr-2xl maxlg:bg-white maxlg:overflow-y-auto",onClick:N,children:[e.jsxs("div",{className:"maxlg:sticky top-0 flex maxlg:py-4 justify-between lg:pb-4 items-center border-b maxlg:bg-white z-50 maxlg:shadow-md",children:[e.jsx("p",{className:"text-base font-bold",children:"Filters"}),e.jsx("span",{onClick:()=>d({salePrice:{$gte:200},regPrice:{$lte:8e3}}),className:"cursor-pointer text-sm lg:text-xs text-[#22A6AB] underline",children:"Reset Filters"}),e.jsx("button",{onClick:a,className:"text-sm font-semibold lg:hidden px-2 py-1 hover:bg-black/5 rounded duration-300",children:"Close"})]}),e.jsx(te,{filt:n,setFilt:d,filters:r}),e.jsx(le,{filt:n,setFilt:d,filters:o}),e.jsx(E,{setFilt:d,min:9,max:9999}),e.jsx(ae,{filt:n,setFilt:d,sale:g,reg:l})]})})},ie=()=>{const[a,s]=t.useState([]),[r,o]=t.useState([]),[g,l]=t.useState({}),[d,n]=t.useState({}),[N,j]=t.useState([]),[i,u]=t.useState(!1),[b,x]=t.useState(!1),[m,w]=t.useState(!1),P=V(),[h,v]=t.useState({});t.useEffect(()=>{const f=new URLSearchParams(P.search),F={};for(const[B,G]of f.entries())F[B]=G;v(F)},[]),t.useEffect(()=>{y()},[h]);const y=async()=>{w(!0);const f=await q(h);f.status===200?(j(f.data.products),w(!1)):(w(!1),j([]))};t.useEffect(()=>{c()},[]);const c=async()=>{const f=await K();f.status===200?(o(f.data.ratingFilters),s(f.data.categoryFilters),l(f.data.saleFilter),n(f.data.regularFilter)):(o([]),s([]))},L=()=>{x(!1)},[S,T]=t.useState({}),[A,R]=t.useState(!1),I=async()=>{R(!0);const f=await Z(S);f.status===200?(j(f.data.products),R(!1)):(Q(f.data.message,"error",1e3),R(!1))};return t.useEffect(()=>{I()},[S]),e.jsx(e.Fragment,{children:m?e.jsx(U,{}):e.jsxs(H,{children:[e.jsxs("div",{className:"flex items-center mt-5 py-5 maincontainer",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h5",{className:"text-xs text-blue-400",children:"Home"}),e.jsx(Y,{className:"text-xl text-gray-500"}),e.jsx("h5",{className:"text-xs text-gray-400",children:"Products"})]}),e.jsxs("div",{className:"flex items-center space-x-5 w-full justify-end",children:[e.jsx(J,{className:"cursor-pointer",onClick:()=>u(!0)}),e.jsx(W,{className:"cursor-pointer",onClick:()=>u(!1)})]}),e.jsxs("button",{className:"ml-5 text-sm font-semibold flex gap-2 items-center lg:hidden",onClick:()=>x(!0),children:["Filters ",e.jsx(X,{className:"text-xs stroke-1"})]})]}),e.jsxs("div",{className:"flex justify-center gap-12 xl:gap-x-60px maincontainer",children:[e.jsx(ne,{query:S,setQuery:T,saleFilter:g,regularFilter:d,categoriesFilters:a,ratingFilters:r,onClose:L,isFilter:b}),e.jsxs("div",{className:`grid ${i?"lg:grid-cols-3 grid-cols-1 lg:gap-x-2":"grid-cols-1"} gap-y-5 mb-10 w-full`,children:[A?e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("img",{src:"/loader2.gif",className:"w-24 h-24"})}):null,N.length>0&&!A?N.map((f,F)=>e.jsx(se,{product:f,isGrid:i},F)):null,N.length===0?e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("img",{src:"/not-found.webp",className:"w-52 h-52"})}):null]})]})]})})};export{ie as default};
