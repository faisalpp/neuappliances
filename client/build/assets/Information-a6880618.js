import{r as t,j as e,f as u,u as te,T as g,e as ae,L as P,a0 as re,E as I}from"./index-f86be2df.js";import{k as ie}from"./MainLayout-fe8a4d40.js";import{r as L,H as le}from"./ScrollToTop-7ce06f31.js";import{C as oe,B as ne,L as ce}from"./LeftArrowSvg-7c3c018b.js";import{C as F}from"./CustomSelect-c3710663.js";import{T as c}from"./TextInput-bde4819c.js";import{c as de,a as i}from"./index.esm-7473a2c7.js";import"./index.esm-2874d4be.js";import"./index-d3c4e6ba.js";import"./CustomInput-e81ee4ab.js";const ue=()=>(t.useState(null),e.jsxs("fieldset",{className:"border border-b31 rounded-md pb-5 px-5 pt-2",children:[e.jsx("legend",{className:"mx-auto text-b16 font-medium text-sm px-3",children:"Express checkout"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("button",{className:"rounded text-white flex justify-center p-3 bg-[#5A31F4]",children:e.jsx("img",{src:"/payment/shoppay.webp",alt:"shoppay",className:"h-[23px] object-contain"})}),e.jsx("button",{className:"rounded text-white flex justify-center p-3 bg-[#113984]",children:e.jsx("img",{src:"/payment/paypal.webp",alt:"shoppay",className:"h-[23px] object-contain"})})]})]})),Ne=()=>{const _=[{name:"USA",value:"usa"}],U=[{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"}],T=de().shape({email:i().required("Email is Required!"),firstName:i().nullable(),lastName:i().required("Last Name is Required!"),address:i().required("Address is Required!"),appartment:i().nullable(),city:i().required("City is Required!"),country:i().required("Country is Required!"),province:i().required("Province is Required!"),postalCode:i().required("Postal Code is Required!"),phone:i().required("Phone is Required!")}),d=u(s=>s.cart.deliveryOrders),h=u(s=>s.cart.pickupOrders);u(s=>s.order.orderInfo);const b=te();t.useEffect(()=>{(d==null?void 0:d.length)===0&&(h==null?void 0:h.length)===0&&(g("Cart is Empty","error",1e3),b("/mycart"))},[]);const m=u(s=>s.cart.deliveryInfo),[y,z]=t.useState(""),[v,D]=t.useState(!1),[j,O]=t.useState(""),[N,Z]=t.useState(""),[C,B]=t.useState(""),[q,K]=t.useState(""),[S,$]=t.useState(""),[H,J]=t.useState("usa"),[R,Q]=t.useState("alberta"),[l,V]=t.useState(""),[w,G]=t.useState(""),[f,M]=t.useState(!1),W=u(s=>s.user.auth);t.useEffect(()=>{},[]);const[a,k]=t.useState([]),x=ae(),A=s=>{const{name:o,checked:n}=s.target;o==="keepUpdates"&&D(n),o==="saveAddress"&&M(n)},X=async s=>{if(s.preventDefault(),!(m!=null&&m.shipping)){g("Shipping Not Available!","error",1e3);return}const o={email:y,firstName:j,lastName:N,address:C,appartment:q,city:S,country:H,state:R,postalCode:l,phone:w,saveAddress:f,keepUpdates:v,province:R};f&&(W||localStorage.setItem("neu_customer_address",JSON.stringify(o)));try{await T.validate(o,{abortEarly:!1}),x(re(o)),b("/mycart/shipping")}catch(n){if(n){let r=n.errors;k(r),r.forEach(se=>{g(se,"error",1e3)})}else k([])}},[Y,p]=t.useState(!1),E=u(s=>s.cart.cartId),ee=async()=>{var o,n;p(!0);const s=await le({zip:l});if(s.status==200){const r=await x(I({cartId:E,deliveryInfo:{...m,location:l,shipping:s.data.zip.location.rate}}));(o=r==null?void 0:r.payload)==null||o.status,p(!1)}else{const r=x(I({cartId:E,deliveryInfo:{...m,location:l,shipping:!1}}));(n=r==null?void 0:r.payload)==null||n.status,p(!1)}};return t.useEffect(()=>{(l==null?void 0:l.length)===5&&(d==null?void 0:d.length)>0&&ee()},[l]),e.jsx(e.Fragment,{children:e.jsxs(oe,{children:[e.jsx(P,{to:"/",children:e.jsx("img",{src:"/login_logo.webp",alt:""})}),e.jsx(ne,{}),e.jsx(ue,{}),e.jsx("div",{className:"text_between_line my-8",children:"OR"}),e.jsxs("form",{onSubmit:X,children:[e.jsxs("div",{className:"space-y-14px [&>*]:text-b16 [&>*]:text-sm",children:[e.jsx("h3",{className:"text-sm font-medium text-b16",children:"Contact information"}),e.jsx(c,{width:"full",name:"Email",title:"Email",iscompulsory:"false",type:"text",value:y,onChange:s=>z(s.target.value),error:!!(a&&a.includes("Email is Required!")),errormessage:"Email is Required!",placeholder:"abc@gmail.com"}),e.jsx(L.Checkbox,{onChange:s=>A(s),checked:v,defaultChecked:!1,name:"keepUpdates",id:"keep-me-update",label:"Keep me up to date on news and exclusive offers",className:"checked:bg-black border-b31",ripple:!1})]}),e.jsxs("div",{className:"space-y-14px mt-8",children:[e.jsx("h3",{className:"text-lg font-medium text-b16",children:"Shipping address"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(c,{width:"full",name:"firstName",title:"",iscompulsory:"false",type:"text",value:j,onChange:s=>O(s.target.value),error:!!(a&&a.includes("First Name is Required!")),errormessage:"First Name is Required!",placeholder:"First Name (optional)"}),e.jsx(c,{width:"full",name:"lastName",title:"",iscompulsory:"false",type:"text",value:N,onChange:s=>Z(s.target.value),error:!!(a&&a.includes("Last Name is Required!")),errormessage:"Last Name is Required!",placeholder:"Last Name"}),e.jsxs("div",{className:"col-span-2 space-y-3",children:[e.jsx(c,{width:"full",name:"address",title:"",iscompulsory:"false",type:"text",value:C,onChange:s=>B(s.target.value),error:!!(a&&a.includes("Address is Required!")),errormessage:"Address is Required!",placeholder:"Address"}),e.jsx(c,{width:"full",name:"appartment",title:"",iscompulsory:"false",type:"text",value:q,onChange:s=>K(s.target.value),error:!!(a&&a.includes("Apartment, suite is Required!")),errormessage:"Apartment, suite is Required!",placeholder:"Apartment, suite, etc. (optional)"}),e.jsx(c,{width:"full",name:"city",title:"",iscompulsory:"false",type:"text",value:S,onChange:s=>$(s.target.value),error:!!(a&&a.includes("City is Required!")),errormessage:"City is Required!",placeholder:"City"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-14px",children:[e.jsx(F,{setState:J,id:"country_region",label:"Country / region",Options:_}),e.jsx(F,{setState:Q,id:"province",label:"Province",Options:U}),e.jsxs("div",{className:"relative  col-span-2 md:col-span-1 [&>*]:h-full",children:[Y?e.jsx("div",{className:"absolute z-40 flex rounded-lg items-center w-full justify-end px-2",children:e.jsx("img",{src:"/loader-bg.gif",className:"w-4 h-4"})}):null,e.jsx(c,{width:"full",name:"postalCode",title:"",iscompulsory:"false",type:"text",value:l,onChange:s=>V(s.target.value),error:!!(a&&a.includes("Postal Code is Required!")),errormessage:"Postal Code is Required!",placeholder:"Postal Code"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(c,{width:"full",name:"phone",title:"",iscompulsory:"false",type:"text",value:w,onChange:s=>G(s.target.value),error:!!(a&&a.includes("Phone is Required!")),errormessage:"Phone is Required!",placeholder:"Phone"}),e.jsx("div",{className:"absolute right-3 top-3",children:e.jsx(ie,{className:"text-2xl text-b3"})})]}),e.jsx("div",{className:"[&>*]:text-b16 [&>*]:text-sm",children:e.jsx(L.Checkbox,{onChange:s=>A(s),id:"save-information",name:"saveAddress",checked:f,defaultChecked:!1,label:"Save this information for next time",className:"checked:bg-black border-b31",ripple:!1})})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center w-full mt-5",children:[e.jsxs(P,{to:"/mycart",className:"flex gap-1 items-center",children:[e.jsx(ce,{}),e.jsx("span",{className:"text-sm font-medium text-b3",children:"Return to Cart"})]}),e.jsx("button",{type:"submit",className:"flex items-center py-3 px-6 text-xs rounded-lg bg-b3 text-white",children:"Continue to Shipping"})]})]})]})})};export{Ne as default};
