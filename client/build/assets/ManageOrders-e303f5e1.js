import{r,j as e,N as m,T as f}from"./index-f86be2df.js";import{A as g}from"./AdminAccount-9c09cac0.js";import{m as N,n as w}from"./index.esm-2874d4be.js";import{d as y,g as v}from"./order-d9b958f5.js";import{h as O}from"./moment-fbc5633a.js";import{P as S}from"./Pagination2-7fe4b454.js";import{S as P}from"./SelectInput-8558cec2.js";import"./MainLayout-fe8a4d40.js";import"./ScrollToTop-7ce06f31.js";import"./index-d3c4e6ba.js";const T=({id:t,orderNo:a,date:s,status:c,total:i,refreshOrders:h})=>{const[u,d]=r.useState(!1),x=async(l,o)=>{l.preventDefault(),d(!0);const n=await y({orderId:o});n.status===200?(f(n.data.msg,"success",1e3),d(!1),h()):(f(n.data.message,"error",1e3),d(!1))};return e.jsxs("tr",{className:"border-b border-l border-r border-b6 text-xs",children:[e.jsx("td",{className:"whitespace-nowrap px-5 py-3",children:a}),e.jsx("td",{className:"whitespace-nowrap px-5 py-3 capitalize",children:s}),e.jsxs("td",{className:"whitespace-nowrap px-5 py-3 capitalize",children:[c==="pending"?e.jsx("span",{className:"bg-yellow-500/20 text-yellow-700 px-2 rounded-2xl py-1",children:"Pending"}):null,c==="rejected"?e.jsx("span",{className:"bg-red-500/20 text-red-500 px-2 rounded-2xl py-1",children:"Rejected"}):null,c==="completed"?e.jsx("span",{className:"bg-b6/20 text-b6 px-2 rounded-2xl py-1",children:"Completed"}):null,c==="processing"?e.jsx("span",{className:"bg-b10/20 text-b10 px-2 rounded-2xl py-1",children:"Processing"}):null]}),e.jsxs("td",{className:"whitespace-nowrap  px-5 py-4 text-b6 font-medium",children:["$",i]}),e.jsxs("td",{className:"flex items-center justify-center whitespace-nowrap space-x-1 px-5 py-4",children:[e.jsx(m,{title:"View Order",to:`/admin/update-order/${a}`,className:"flex items-center justify-center bg-b3 text-white hover:bg-white hover:text-b3 border-2 border-white hover:border-b3 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:e.jsx(N,{className:"text-base"})}),e.jsx("button",{onClick:l=>x(l,t),title:"Delete Order",className:"flex items-center justify-center bg-red-500/30 text-red-500 hover:bg-white hover:text-red-500 border-2 border-white hover:border-red-500 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:e.jsx(w,{className:"text-base"})})]})]})},D=({orders:t,refreshOrders:a})=>e.jsx("div",{className:"flex flex-col",children:e.jsx("div",{className:"overflow-x-auto sm:-mx-6 lg:-mx-8",children:e.jsx("div",{className:"inline-block min-w-full py-2 sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"min-w-full text-center text-sm font-light",children:[e.jsx("thead",{className:"border-b border-l border-b3 bg-b3 font-medium text-white",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:" px-6 py-4",children:"Order #"}),e.jsx("th",{scope:"col",className:" px-6 py-4",children:"Date"}),e.jsx("th",{scope:"col",className:" px-6 py-4",children:"Status"}),e.jsx("th",{scope:"col",className:" px-6 py-4",children:"Total"}),e.jsx("th",{scope:"col",className:" px-6 py-4",children:"Actions"})]})}),e.jsx("tbody",{children:t!=null&&t.length?t.map(s=>e.jsx(T,{refreshOrders:a,id:s._id,orderNo:s.orderNo,date:O(s.createdAt).format("DD MMMM YYYY"),status:s.orderStatus,total:s.grandTotal})):null})]})})})})}),z=()=>{const[t,a]=r.useState([]),[s,c]=r.useState(1),[i,h]=r.useState(16),[u,d]=r.useState(0),[x,l]=r.useState(!1),[o,n]=r.useState("delivery"),b=async()=>{l(!0);const p=await v({page:s,limit:i},{orderType:o});p.status===200?(l(!1),a(p.data.orders),d(Math.ceil(p.data.totalCount/i))):(l(!1),a([]))};return r.useEffect(()=>{b()},[o,s]),e.jsx(e.Fragment,{children:e.jsxs(g,{children:[e.jsxs("div",{className:"flex space-x-5 items-center mb-2 bg-white py-3 px-5 w-full",children:[e.jsx(m,{to:"/admin/create-product",className:"bg-b3 text-white text-xs px-3 rounded-2xl cursor-pointer py-2",children:"Create Order"}),e.jsx("div",{className:"w-1/2",children:e.jsx(P,{onChange:j=>n(j.target.value),options:["Delivery","Pickup"]})}),e.jsxs("div",{className:"flex w-full justify-end space-x-3",children:[e.jsx("input",{placeholder:"Search #12345",className:"text-xs px-2 outline-none border border-b3 rounded-md"}),e.jsx(m,{to:"/admin/create-product",className:"border border-b3 text-b3 text-xs px-2 rounded-md cursor-pointer py-1",children:"Search"})]})]}),x?e.jsx("div",{className:"flex w-full justify-center h-24 items-center",children:e.jsx("img",{src:"/loading.gif",className:"h-12"})}):t.length>0?e.jsxs(e.Fragment,{children:[e.jsx(D,{refreshOrders:b,orders:t}),e.jsx(S,{page:s,setPage:c,totalPages:u})]}):e.jsx("div",{className:"flex w-full justify-center h-52 items-center",children:e.jsx("img",{src:"/not-found.webp",className:"w-32"})})]})})};export{z as default};
