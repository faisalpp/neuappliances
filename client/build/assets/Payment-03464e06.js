import{r as t,j as e,u as ve,e as Ne,f as o,Z as Ce,Y as we,a5 as T,a6 as M,a7 as U,L as Se,a8 as Z,T as N}from"./index-8f0b06cf.js";import{C as qe,B as Pe,L as Re}from"./LeftArrowSvg-6e7d380e.js";import{R as P}from"./ReviewDetail-cf4dc88e.js";import{am as ke,r as b,A as Ae}from"./ScrollToTop-0e31c04b.js";import{m as K,v as Ee}from"./MainLayout-15ec4b43.js";import{T as u}from"./TextInput-74dd367a.js";import{C as O}from"./CustomSelect-0865932a.js";import{c as z,a as i}from"./index.esm-0c6a8e0d.js";import"./CustomInput-0297ce22.js";import"./index.esm-3fd02e0d.js";import"./index-2d961a36.js";const H=({id:p,title:m,labelImage:d,checked:l,name:c,customStyle:h,change:f})=>e.jsx("div",{className:"flex justify-between w-full gap-3 p-4",children:e.jsx(b.Radio,{id:p,onChange:n=>f(n),icon:e.jsx(K,{className:"w-[18px] h-[18px]"}),className:"border border-[#D9D9D9] bg-white p-0 w-[18px] h-[18px]",ripple:!1,name:c,label:e.jsx("div",{children:e.jsxs(b.Typography,{className:"font-medium tracking-032 flex items-center gap-1 text-sm text-b16",children:[d?e.jsx("img",{src:"/payment/"+d,className:"h-[23px] object-contain",alt:m}):null,e.jsx("span",{className:h,children:m})]})}),checked:l})}),_=({id:p,title:m,labelImage:d,checked:l,name:c,customStyle:h,change:f})=>e.jsx("div",{className:"flex justify-between w-full gap-3 p-4",children:e.jsx(b.Radio,{id:p,onChange:n=>f(n),icon:e.jsx(K,{className:"w-[18px] h-[18px]"}),className:"border border-[#D9D9D9] bg-white p-0 w-[18px] h-[18px]",ripple:!1,name:c,label:e.jsx("div",{children:e.jsxs(b.Typography,{className:"font-medium tracking-032 flex items-center gap-1 text-sm text-b16",children:[(d==null?void 0:d.length)>0?d.map(n=>e.jsx("img",{src:"/payment/"+n,className:"h-[23px] object-contain",alt:m})):null,e.jsx("span",{className:h,children:m})]})}),checked:l===c})}),Fe=({CardNumber:p,CardExpiry:m,CardCvc:d,handleCardPayment:l,cardErrors:c,card:h,setCard:f,payment:n,setPayment:R,setBilling:C,billing:k})=>{const[A,w]=t.useState(!0),S=j=>{const g=j.target;g.name==="shipping_address"&&(w(g.checked),C(!1)),g.name==="billing_address"&&(C(g.checked),w(!1))},y=j=>{R(j.target.name)};return e.jsxs("div",{children:[e.jsxs("div",{className:"space-y-14px mt-8",children:[e.jsx("h3",{className:"text-lg font-medium text-b16",children:"Payment"}),e.jsxs("p",{className:"flex gap-1 items-center text-sm text-b32 font-medium",children:[e.jsx(ke,{className:"text-b3 text-xs"})," All transactions are secure and encrypted."]}),e.jsxs("div",{className:"[&>*]:border-b [&>*]:border-b31 [&>*:last-child]:border-0 border border-b31 rounded-md",children:[e.jsx(_,{customStyle:"font-medium",change:y,name:"card",id:"credit_card",checked:n,labelImage:["visa.png","master.png","express.png"]}),e.jsxs("form",{onSubmit:l,className:"p-4 bg-[#F9F9F9] grid grid-cols-1 gap-14px",children:[e.jsx("div",{className:"relative flex justify-center items-center h-10 bg-[#F9F9F9]",children:e.jsxs("div",{className:"bg-white text-sm outline-none border-[1px] border-b31 w-full px-4 h-10 rounded-lg",children:[e.jsx(p,{className:"py-3"}),e.jsx("div",{className:"absolute right-4 top-0 h-full flex items-center",children:e.jsx("img",{className:"w-[18px] h-[18px]",src:"/svgs/lock.webp"})})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-14px",children:[e.jsx("div",{className:"relative flex justify-center items-center h-10 bg-[#F9F9F9]",children:e.jsx("div",{className:"bg-white text-sm outline-none border-[1px] border-b31 w-full px-4 h-10 rounded-lg",children:e.jsx(m,{className:"py-3"})})}),e.jsx("div",{className:"relative flex justify-center items-center h-10 bg-[#F9F9F9]",children:e.jsx("div",{className:"bg-white text-sm outline-none border-[1px] border-b31 w-full px-4 h-10 rounded-lg",children:e.jsx(d,{className:"py-3"})})})]})]}),e.jsx(_,{name:"paypal",change:y,checked:n,labelImage:["pay_paypal.webp"],id:"paypal"}),e.jsx(_,{name:"affirm",change:y,checked:n,id:"affirm",labelImage:["affirm.webp"]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-medium text-b16",children:"Billing address"}),e.jsx("p",{className:"flex gap-1 items-center text-sm text-b32",children:"Select the address that matches your card of payment method."}),e.jsxs("div",{className:"mt-14px [&>*]:border-b [&>*]:border-b31 [&>*:last-child]:border-0 border border-b31 rounded-md",children:[e.jsx(H,{checked:A,change:S,name:"shipping_address",id:"shipping_address",title:"Same as shipping address"}),e.jsx(H,{checked:k,change:S,name:"billing_address",id:"billing_address",title:"Use a different billing address"})]})]})]})},Ie=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"fixed flex flex-col space-y-5 items-center justify-center top-0 w-full h-screen z-40 bg-white/80",children:[e.jsx(Ae,{className:"text-b6 text-6xl animate-spin"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Your order’s being processed."}),e.jsx("p",{className:"font-medium text-sm",children:"Please wait while we process your order."})]})]})}),Je=()=>{const[p,m]=t.useState(!1),d=ve();Ne();const l=o(s=>s.cart.deliveryOrders),c=o(s=>s.cart.pickupOrders);l.length===0&&c.length===0&&d("/mycart");const{email:h,address:f,postalCode:n,city:R,country:C,province:k}=o(s=>s.order.orderInfo),A=o(s=>s.cart.deliveryInfo),w=[{name:"USA",value:"us"}],S=[{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"}],[y,j]=t.useState(""),[g,Q]=t.useState(!1),[Y,G]=t.useState(""),[J,V]=t.useState(""),[W,X]=t.useState(""),[ee,se]=t.useState(""),[te,ae]=t.useState(""),[_e,re]=t.useState("usa"),[De,ie]=t.useState("alberta"),[E,le]=t.useState(""),[ne,de]=t.useState(""),[ce,oe]=t.useState(!1);z().shape({email:i().required("Email is Required!"),firstName:i().nullable(),lastName:i().required("Last Name is Required!"),address:i().required("Address is Required!"),appartment:i().nullable(),city:i().required("City is Required!"),country:i().required("Country is Required!"),province:i().required("Province is Required!"),postalCode:i().required("Postal Code is Required!"),phone:i().required("Phone is Required!")});const[me,F]=t.useState(!1),ue=async()=>{F(!0);const s=await CheckZip({zip:E});console.log(s),s.status==200,F(!1)};t.useEffect(()=>{E.length===5&&ue()},[E]);const D=s=>{const{name:r,checked:v}=s.target;r==="keepUpdates"&&Q(v),r==="saveAddress"&&oe(v)},[L,pe]=t.useState(!1),[$,xe]=t.useState("card"),[he,fe]=t.useState({cardNo:"",name:"",expDate:"",code:""}),[ge,Le]=t.useState([]);z().shape({cardNo:i().matches(/^\d{16}$/,"Must be exactly 16 digits").required("Card Number is Required!"),name:i().required("Card Holder Name is Required!"),expDate:i().required("Card Expiry Date is Required!"),code:i().required("Security Code is Required!")});const[a,$e]=t.useState(!1);t.useState([]),t.useState((l==null?void 0:l.length)>0?"delivery":"pickup"),t.useState(!1);const x=o(s=>s.order.orderInfo);o(s=>s.order.paymentInfo),o(s=>s.cart.cartId),o(s=>s.user._id),o(s=>s.user.auth),o(s=>s.user.isAdmin);const q=Ce(),I=we(),be=async s=>{const r=await Z({price:2e4,mode:["card"],currency:"usd",description:"Neuappliance Outlet Card Transaction"});r&&await I.confirmPayPalPayment(r.data.payIntent,{payment_method:{}}),N("Paypal Transaction!","success",1e3)},ye=async s=>{N("Affirm Transaction!","success",1e3)},B=async s=>{const r=q.getElement(T);q.getElement(M),q.getElement(U);const v=await Z({price:200*100,mode:["card"],currency:"usd",description:"Neuappliance Outlet Card Transaction"});if(v)return await I.confirmCardPayment(v.data.payIntent.client_secret,{payment_method:{card:r,billing_details:{name:`${x.firstName} ${x.lastName}`,email:x.email,address:{line1:x.address,city:x.city,country:"us",postal_code:x.postalCode,state:x.state}}}});N("Payment Intent Error!","error",1e3)},je=async s=>{if(s.preventDefault(),!I&&!q){N("Stripe Not Loaded!","error",100);return}let r;switch($){case"card":r=await B();break;case"paypal":await be();break;case"affirm":await ye();break}r!=null&&r.error?N(r.error.type,"error",1e3):console.log(r)};return e.jsxs(e.Fragment,{children:["  ",p?e.jsx(Ie,{}):e.jsxs(qe,{children:[e.jsx("img",{src:"/login_logo.webp",alt:""}),e.jsx(Pe,{}),e.jsxs("div",{className:"border border-b31 p-3 flex flex-col gap-3 rounded-md",children:[e.jsx(P,{title:"Contact",detail:h,textStyle:"font-medium"}),e.jsx("hr",{}),e.jsx(P,{title:"Ship to",detail:`${f},${R} ,${k}, ${C},${n}`,textStyle:"font-medium"}),e.jsx("hr",{}),(l==null?void 0:l.length)>0?e.jsx(P,{title:"Method",detail:`Home Delivery · $${A.shipping}`,subtitle:"1 to 3 Business Days",textStyle:"font-medium"}):null,(c==null?void 0:c.length)>0?e.jsx(P,{title:"Method",detail:"Self Pickup · Free",subtitle:"Always Ready!",textStyle:"font-medium"}):null]}),e.jsx(Fe,{CardNumber:T,CardExpiry:M,CardCvc:U,handleCardPayment:B,cardErrors:ge,card:he,setCard:fe,payment:$,setPayment:xe,billing:L,setBilling:pe}),e.jsxs("div",{className:`${L?"flex flex-col":"hidden"} duration-300  border-[1px] border-b31 rounded-md mt-3 px-4 py-4`,children:[e.jsxs("div",{className:"space-y-14px [&>*]:text-b16 [&>*]:text-sm",children:[e.jsx("h3",{className:"!text-lg font-medium text-b16",children:"Billing information"}),e.jsx(u,{width:"full",name:"Email",title:"Email",iscompulsory:"false",type:"text",value:y,onChange:s=>j(s.target.value),error:!!(a&&a.includes("Email is Required!")),errormessage:"Email is Required!",placeholder:"abc@gmail.com"}),e.jsx(b.Checkbox,{onChange:s=>D(s),checked:g,defaultChecked:!1,name:"keepUpdates",id:"keep-me-update",label:"Keep me up to date on news and exclusive offers",className:"checked:bg-black border-b31",ripple:!1})]}),e.jsxs("div",{className:"space-y-14px mt-8",children:[e.jsx("h3",{className:"text-sm font-medium text-b16",children:"Shipping address"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(u,{width:"full",name:"firstName",title:"",iscompulsory:"false",type:"text",value:Y,onChange:s=>G(s.target.value),error:!!(a&&a.includes("First Name is Required!")),errormessage:"First Name is Required!",placeholder:"First Name (optional)"}),e.jsx(u,{width:"full",name:"lastName",title:"",iscompulsory:"false",type:"text",value:J,onChange:s=>V(s.target.value),error:!!(a&&a.includes("Last Name is Required!")),errormessage:"Last Name is Required!",placeholder:"Last Name"}),e.jsxs("div",{className:"col-span-2 space-y-3",children:[e.jsx(u,{width:"full",name:"address",title:"",iscompulsory:"false",type:"text",value:W,onChange:s=>X(s.target.value),error:!!(a&&a.includes("Address is Required!")),errormessage:"Address is Required!",placeholder:"Address"}),e.jsx(u,{width:"full",name:"appartment",title:"",iscompulsory:"false",type:"text",value:ee,onChange:s=>se(s.target.value),error:!!(a&&a.includes("Apartment, suite is Required!")),errormessage:"Apartment, suite is Required!",placeholder:"Apartment, suite, etc. (optional)"}),e.jsx(u,{width:"full",name:"city",title:"",iscompulsory:"false",type:"text",value:te,onChange:s=>ae(s.target.value),error:!!(a&&a.includes("City is Required!")),errormessage:"City is Required!",placeholder:"City"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-14px",children:[e.jsx(O,{setState:re,id:"country_region",label:"Country / region",Options:w}),e.jsx(O,{setState:ie,id:"province",label:"Province",Options:S}),e.jsxs("div",{className:"relative  col-span-2 md:col-span-1 [&>*]:h-full",children:[me?e.jsx("div",{className:"absolute flex rounded-lg items-center w-full justify-end px-2",children:e.jsx("img",{src:"/loader-bg.gif",className:"w-4 h-4"})}):null,e.jsx(u,{width:"full",name:"postalCode",title:"",iscompulsory:"false",type:"text",value:n,onChange:s=>le(s.target.value),error:!!(a&&a.includes("Postal Code is Required!")),errormessage:"Postal Code is Required!",placeholder:"Postal Code"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{width:"full",name:"phone",title:"",iscompulsory:"false",type:"text",value:ne,onChange:s=>de(s.target.value),error:!!(a&&a.includes("Phone is Required!")),errormessage:"Phone is Required!",placeholder:"Phone"}),e.jsx("div",{className:"absolute right-3 top-3",children:e.jsx(Ee,{className:"text-2xl text-b3"})})]}),e.jsx("div",{className:"[&>*]:text-b16 [&>*]:text-sm",children:e.jsx(b.Checkbox,{onChange:s=>D(s),id:"save-information",name:"saveAddress",checked:ce,defaultChecked:!1,label:"Save this information for next time",className:"checked:bg-black border-b31",ripple:!1})})]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center w-full mt-5",children:[e.jsxs(Se,{to:"/mycart/shipping",className:"flex gap-1 items-center",children:[e.jsx(Re,{}),e.jsx("span",{className:"text-sm font-medium text-b3",children:"Return to shipping"})]}),e.jsx("button",{type:"button",onClick:je,className:"cursor-pointer py-3 px-6 text-xs rounded-lg bg-b3 text-white",children:"Pay Now"})]})]})]})};export{Je as default};
