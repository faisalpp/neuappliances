import{d as v,u as S,f as p,j as e,r as a,v as q,T as n,k as E}from"./index-51d5f935.js";import{M as N}from"./MainLayout-1d814bef.js";import{a as k}from"./index.esm-3769a322.js";import{T as x}from"./TextInput-16790f19.js";import{c as T,a as w}from"./index.esm-e9e5cd55.js";import{B as C}from"./BtnLoader-23d5cf1c.js";import"./ScrollToTop-18281d88.js";import"./index-a38f3315.js";const B=T().shape({password:w().required("Password is Required!"),confirmPassword:w().required("Confirm Password is Required!")}),U=()=>{const c=v(),t=S(),m=p(s=>s.admin.auth),h=p(s=>s.user.auth);if(!m&&!h)return e.jsx(e.Fragment,{children});t(m?"/admin/dashboard":"/my-account/profile");const[d,g]=a.useState(""),[l,P]=a.useState(""),[o,u]=a.useState([]),[j,i]=a.useState(!1),y=async()=>{const s=await q({token:c.token});s.status===500&&(t("/forgot-password"),n(s.data.message,"error",1e3))};a.useEffect(()=>{y()});const b=async s=>{s.preventDefault(),i(!0);try{await B.validate({password:d,confirmPassword:l},{abortEarly:!1});const r=await E({token:c.token,password:d,confirmPassword:l});r.status===200?(i(!1),n(r.data.msg,"success",1e3),t("/login")):(i(!1),n(r.data.msg,"error",1e3))}catch(r){if(i(!1),r){let f=r.errors;u(f),f.forEach(R=>{n(R,"error",1e3)})}else u([])}};return e.jsx(e.Fragment,{children:e.jsx(N,{children:e.jsxs("div",{className:"flex flex-col space-y-10 items-center pt-20 py-32 w-full",children:[e.jsx("div",{children:e.jsx("img",{src:"/login_logo.webp"})}),e.jsxs("form",{onSubmit:b,className:"flex flex-col space-y-5 w-5/12 px-10 py-10 rounded-2xl bg-white border-[1px] border-gray-200",children:[e.jsx("h4",{className:"text-xl font-bold",children:"Reset Password"}),e.jsx(x,{width:"full",name:"password",title:"Password",type:"password",value:d,onChange:s=>g(s.target.value),error:!!(o&&o.includes("Email is Required!")),errormessage:"Email is Required!",placeholder:"******"}),e.jsx(x,{width:"full",name:"confirmPassword",title:"Re-Type Password",type:"password",value:l,onChange:s=>P(s.target.value),error:!!(o&&o.includes("Confirm Password is Required!")),errormessage:"Confirm Password is Required!",placeholder:"******"}),e.jsx("button",{className:"flex justify-center items-center cursor-pointer rounded-md py-1 w-full bg-b3",children:j?e.jsx(C,{style:"w-7"}):e.jsxs("span",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:[e.jsx("span",{className:"text-xs",children:"Submit"}),e.jsx(k,{className:"text-2xl"})]})})]})]})})})};export{U as default};
