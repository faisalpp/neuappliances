import{O as A,r,j as e,N as c}from"./index-86a49321.js";import{A as S}from"./AdminAccount-51cdba36.js";import{P as C}from"./Pagination2-7155b82d.js";import{m as M}from"./index.esm-5246d67b.js";import{T as Y}from"./Table-876ad608.js";import{h as p}from"./moment-fbc5633a.js";import{z as $}from"./MainLayout-477decf2.js";import{S as P}from"./SelectInput-0dd5b21a.js";import"./ScrollToTop-89a98e42.js";import"./index-a127e608.js";const T=async(s,l)=>{let a;try{a=await A.post(`/api/admin/get-customers/?page=${s.page}&limit=${s.limit}`,l)}catch(i){return i}return a},I=()=>{const[s,l]=r.useState([]),[a,i]=r.useState(1),[d,k]=r.useState(16),[h,f]=r.useState(0),[j,n]=r.useState(!1),[m,b]=r.useState("user"),g=async()=>{n(!0);const o=await T({page:a,limit:d},{userType:m});o.status===200?(n(!1),l(o.data.customers),f(Math.ceil(o.data.totalCount/d))):n(!1)};r.useEffect(()=>{g()},[a,m]);const N=({id:t,name:o,lastOrder:x,dateRegisterd:y,email:u,totalOrders:w,totalAmount:v})=>e.jsxs("tr",{className:"border-b border-l border-r border-b6 text-xs font-medium",children:[e.jsx("td",{className:"px-2 py-3",children:o}),e.jsx("td",{className:"px-5 py-3",children:x?p(x).format("DD MMMM YYYY"):"N/A"}),e.jsx("td",{className:"px-10 py-3",children:p(y).format("DD MMMM YYYY")}),e.jsx("td",{className:"py-3",children:e.jsx("a",{href:`mailto:${u}`,className:"underline text-b6",children:u})}),e.jsx("td",{className:"px-5 py-3",children:w}),e.jsxs("td",{className:"px-5 py-3 text-b7",children:["$",v]}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center justify-center space-x-2 h-full",children:[e.jsx(c,{title:"View Customer",to:`/admin/update-customer/${t}`,className:"flex items-center justify-center bg-b3 text-white hover:bg-white hover:text-b3 border-2 border-b3 hover:border-b3 text-xs px-1 w-fit h-fit rounded-full cursor-pointer py-1",children:e.jsx(M,{className:"text-sm"})}),e.jsx(c,{title:"Block Customer",to:"/admin/block-customer/:id",className:"flex items-center justify-center bg-red-500 text-white hover:bg-white hover:text-red-500 border-[1px] border-red-500 hover:border-red-500 text-sm w-fit h-fit rounded-full cursor-pointer px-1 py-1",children:e.jsx($,{className:"text-base"})})]})})]});return e.jsx(e.Fragment,{children:e.jsxs(S,{children:[e.jsxs("div",{className:"flex items-center mb-2 bg-white py-3 px-5 w-full",children:[e.jsx("div",{className:"w-1/2",children:e.jsx(P,{onChange:t=>b(t.target.value),options:["User","Admin"]})}),e.jsxs("div",{className:"flex w-full justify-end space-x-3",children:[e.jsx("input",{placeholder:"Search Customer",className:"text-xs px-2 outline-none border border-b3 rounded-md"}),e.jsx(c,{to:"/admin/create-product",className:"border border-b3 text-b3 text-xs px-2 rounded-md cursor-pointer py-1",children:"Search"})]})]}),j?e.jsx("div",{className:"flex w-full justify-center h-24 items-center",children:e.jsx("img",{src:"/loading.gif",className:"h-12"})}):s.length>0?e.jsxs(e.Fragment,{children:[e.jsx(Y,{head:["Name","Last Order","Date Registerd","Email","Orders","Total Spend","Action"],children:(s==null?void 0:s.length)>0?s==null?void 0:s.map(t=>e.jsx(N,{id:t.customer._id,name:`${t.customer.firstName} ${t.customer.lastName}`,lastOrder:t.lastOrder,dateRegisterd:t.customer.createdAt,email:t.customer.email,totalOrders:t.orderCount,totalAmount:t.totalAmount})):null}),e.jsx(C,{page:a,setPage:i,totalPages:h})]}):e.jsx("div",{className:"flex w-full justify-center h-52 items-center",children:e.jsx("img",{src:"/not-found.webp",className:"w-32"})})]})})};export{I as default};
