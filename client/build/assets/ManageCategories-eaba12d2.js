import{r as i,j as e,bo as S,N as p,bw as D,bs as I,bt as E,bx as A,w as o}from"./index-554f52d4.js";import{a as P,u as L,d as M}from"./category-f08a683c.js";import{D as _,C as F,P as k}from"./react-beautiful-dnd.esm-eba91469.js";const z=()=>{const[n,c]=i.useState([]),[f,d]=i.useState(!1),[g,h]=i.useState(""),x=async()=>{d(!0);const s=await P();s.status===200?(d(!1),c(s.data.categories)):(c([]),d(!1))};i.useEffect(()=>{x()},[]);const[b,u]=i.useState(!1),j=async()=>{u(!0);const s=await L(n);s.status===200?(u(!1),o(s.data.msg,"success",1e3),x()):(u(!1),o(s.data.message,"error",1e3))},w=s=>s&&s.split("-").map(function(l){return l.charAt(0).toUpperCase()+l.slice(1)}).join(" "),N=s=>{const t=Array.from(n),[a]=t.splice(s.source.index,1);t.splice(s.destination.index,0,a);const r=t.map((l,C)=>({...l,index:C+1}));c(r)},[y,m]=i.useState(""),v=async(s,t)=>{s.preventDefault(),m(t);const a=await M({id:t});console.log(a),a.status===200?(o(a.data.msg,"success",1e3),m(""),x()):(m(""),o(a.data.message,"error",1e3))};return e.jsx(e.Fragment,{children:e.jsxs(S,{children:[e.jsxs("div",{className:"flex items-center space-x-2 my-2 bg-white py-3 px-5 w-full",children:[e.jsx(p,{to:"/admin/create-category",className:"bg-b3 text-white text-xs px-3 rounded-2xl cursor-pointer py-2 font-bold",children:"CreateÂ Category"}),e.jsxs("div",{className:"flex w-full justify-end space-x-3",children:[e.jsx("input",{value:g,onChange:s=>h(s.target.value),placeholder:"Search Blog",className:"text-xs px-2 outline-none border border-b3 rounded-md"}),e.jsx("button",{className:"border border-b3 text-b3 text-xs px-2 rounded-md cursor-pointer py-1",children:"Search"})]})]}),f?e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("img",{src:"/loader-bg.gif",className:"w-10 h-10"})}):n.length>0?e.jsxs(_,{onDragEnd:N,className:"w-full h-full",children:[e.jsx(F,{droppableId:"categories",children:s=>e.jsxs("div",{...s.droppableProps,ref:s.innerRef,className:"grid  grid-cols-1 md:grid-cols-4 2xl:grid-cols-3 gap-2 xl:gap-5",children:[n.map((t,a)=>e.jsx(k,{draggableId:t._id,index:a,children:r=>e.jsx("div",{...r.draggableProps,...r.dragHandleProps,ref:r.innerRef,className:"populerbrands",children:e.jsxs("div",{className:"relative rounded-2xl border border-gray-300 p-3 h-fit w-fit flex flex-col justify-center items-center",children:[t.inMenu?e.jsx("span",{title:"In Navbar Menu",className:"cursor-help hover:shadow-lg absolute bg-b6/80 right-3 top-2 text-white px-1 py-1 rounded-full",children:e.jsx(D,{})}):null,e.jsx("img",{src:t.image,className:"max-w-full h-[133px] object-contain",alt:t.title}),e.jsxs("h3",{className:"font-semibold px-3 text-center text-xs",children:[w(t.title)," (",t.productCount,")"]}),e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsx(p,{to:`/admin/update-category/${t._id}`,title:"Edit Category",className:"flex items-center justify-center bg-b3 text-white hover:bg-white hover:text-b3 border-2 border-white hover:border-b3 text-sm px-2 rounded-full cursor-pointer py-2",children:e.jsx(I,{className:"text-base"})}),e.jsx("span",{onClick:l=>v(l,t._id),title:"Delete Category",className:"flex items-center justify-center bg-red-500/30 text-red-500 hover:bg-white hover:text-red-500 border-2 border-white hover:border-red-500 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:y===t._id?e.jsx("img",{src:"/loader-bg.gif",className:"w-4 h-4"}):e.jsx(E,{className:"text-base"})}),e.jsxs(p,{to:`/admin/manage-category-sections/${t.slug}`,title:"View Sections",className:"flex items-center justify-center bg-b7/30 text-b7 hover:bg-white hover:b7 border-2 border-white hover:border-b7 text-sm px-[7px] w-fit rounded-full cursor-pointer py-1",children:[" ",e.jsx(A,{className:"text-lg"})]})]})]})})},t._id)),s.placeholder]})}),e.jsx("div",{className:"flex justify-end w-full mt-5",children:e.jsx("button",{type:"button",onClick:j,className:"flex justify-center items-center cursor-pointer rounded-md py-1 w-fit bg-b3",children:b?e.jsx("img",{src:"/loader-bg.gif",className:"w-8"}):e.jsx("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:e.jsx("span",{className:"text-xs",children:"Save"})})})})]}):e.jsx("div",{className:"flex justify-center w-full h-full",children:e.jsx("img",{src:"/not-found.webp",className:"w-36 h-36"})})]})})};export{z as default};
