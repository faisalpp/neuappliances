import{r as c,j as e,N,bs as P,bt as S,bu as C,e as D,w as u,bv as L,bo as T,aV as I,K as E}from"./index-fb6a0065.js";import{d as k,b as A,c as j}from"./admin-a5f3d5c1.js";import{G as F}from"./category-9e7d2820.js";import{J as G}from"./TextTransform-2d0a7ae4.js";const R=({data:s,getProductss:n})=>{const[d,o]=c.useState(!1),[i,x]=c.useState(!1),m=({numberOfTimes:a})=>{const l=Array.from({length:a},(t,b)=>e.jsx(D,{className:"text-b7 text-base"},b));return e.jsx("div",{className:"flex justify-center items-center mt-2",children:l})},p=s.media.find(a=>a.file==="image"),h=async(a,l)=>{x(!0);try{const t=await k({pId:l});t.status===200?(u(t.data.msg,"success",1e3),n(),x(!1)):(u(t.data.message,"error",1e3),x(!1))}catch{x(!1),u("Internal Server Error!","error",1e3)}},f=async(a,l)=>{o(!0);try{const t=await A({pId:l});t.status===200?(u(t.data.msg,"success",1e3),n(),o(!1)):(u(t.data.message,"error",1e3),o(!1))}catch{o(!1),u("Internal Server Error!","error",1e3)}};return e.jsxs("tr",{className:"border-b border-l border-r border-b6 text-xs",children:[e.jsx("td",{className:" py-3 capitalize",children:e.jsx("img",{src:p==null?void 0:p.data,className:"w-32"})}),e.jsx("td",{className:" capitalize",children:s.title}),e.jsxs("td",{className:" py-4 font-medium",children:["$",s.salePrice]}),e.jsx("td",{className:" py-4 font-medium",children:e.jsxs("strike",{children:["$",s.regPrice]})}),e.jsx("td",{className:" py-4 font-semibold text-red-500",children:G.Cap1Char(s.productType)}),e.jsx("td",{className:" py-4 text-b6 font-medium",children:e.jsx(m,{numberOfTimes:s.rating})}),e.jsxs("td",{className:"px-8 py-4 space-y-1",children:[e.jsx(N,{title:"Update Product",to:`/admin/update-product/${s.slug}`,className:"flex items-center justify-center bg-b3 text-white hover:bg-white hover:text-b3 border-2 border-white hover:border-b3 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:e.jsx(P,{className:"text-base"})}),e.jsx("span",{title:"Delete Product",onClick:a=>{i||h(a,s._id)},className:"flex items-center justify-center bg-red-500/30 text-red-500 hover:bg-white hover:text-red-500 border-2 border-white hover:border-red-500 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:i?e.jsx("img",{src:"/loader-bg.gif",className:"w-4 h-4"}):e.jsx(S,{className:"text-base"})}),e.jsx("span",{title:"Duplicate Product",onClick:a=>{d||f(a,s._id)},className:"flex items-center justify-center bg-b7 text-white hover:bg-white hover:text-b7 border-2 border-white hover:border-b7 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:d?e.jsx("img",{src:"/loader-bg.gif",className:"w-4 h-4"}):e.jsx(C,{className:"text-lg"})})]})]})},B=({data:s,getProducts:n})=>e.jsx("div",{className:"flex flex-col",children:e.jsx("div",{className:"overflow-x-auto sm:-mx-6 lg:-mx-8",children:e.jsx("div",{className:"inline-block min-w-full py-2 sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"min-w-full text-center text-sm font-light",children:[e.jsx("thead",{className:"border-b border-l border-b3 bg-b3 font-medium text-white",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-4",children:e.jsx(L,{})}),e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Title"}),e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Sale Price"}),e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Reguler Price"}),e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Product Type"}),e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Rating"}),e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Action"})]})}),e.jsx("tbody",{children:s.map(d=>e.jsx(R,{data:d,getProductss:n}))})]})})})})}),M=()=>{const[s,n]=c.useState([]),[d,o]=c.useState(!1),[i,x]=c.useState(1),[m,p]=c.useState(6),[h,f]=c.useState(1),[a,l]=c.useState(""),[t,b]=c.useState(""),[y,w]=c.useState([]),v=async()=>{const r=await F();r.status===200&&(w(r.data.categories),l(r.data.categories[0].title.toLowerCase().replace(/\s/g,"-")))};c.useEffect(()=>{v()},[]);const g=async()=>{o(!0);let r;t?r=await j({page:i,limit:m,search:t}):r=await j({page:i,limit:m,category:a}),console.log(r),r.status===200&&(n(r.data.products),f(Math.ceil(r.data.productCount/m)),o(!1))};return c.useEffect(()=>{a&&g()},[i,a]),e.jsx(e.Fragment,{children:e.jsxs(T,{children:[e.jsxs("div",{className:"flex items-center mb-2 bg-white py-3 px-5 w-full",children:[e.jsxs("div",{className:"flex items-center space-x-2 w-full",children:[e.jsx(N,{to:"/admin/create-product",className:"bg-b3 text-white text-xs px-3 rounded-2xl cursor-pointer py-2 h-fit",children:"Create Product"}),e.jsx(I,{onChange:r=>l(r.target.value),options:y})]}),e.jsxs("div",{className:"flex w-full justify-end space-x-3",children:[e.jsx("input",{value:t,onChange:r=>b(r.target.value),placeholder:"Search Product",className:"text-xs px-2 outline-none border border-b3 rounded-md"}),e.jsx("button",{type:"button",className:"border border-b3 text-b3 text-xs px-2 rounded-md cursor-pointer py-1",children:"Search"})]})]}),d?e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("img",{src:"/loader-bg.gif",className:"w-10 h-10"})}):s.length>0?e.jsxs(e.Fragment,{children:[e.jsx(B,{data:s,getProducts:g}),e.jsx(E,{page:i,setPage:x,totalPages:h})]}):e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("img",{src:"/not-found.webp",className:"w-32 h-32"})})]})})};export{M as default};
