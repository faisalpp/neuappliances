import{r as s,j as e,N as C,bs as D,bu as L,bt as T,w as f,cj as k,bo as E,aV as F,K as G}from"./index-3f1419d9.js";/* empty css                      */import{E as A,F as M,G as z}from"./admin-f56a61b2.js";import{G as I}from"./category-477ec917.js";const P=({img:c,title:o,category:i,id:a,slug:l,getBlog:b,setPage:j})=>{const[h,m]=s.useState(!1),[n,x]=s.useState(!1),[w,g]=s.useState(!0),y=async(r,u)=>{r.preventDefault(),m(!0);const t=await A({slug:u});t.status===200?(m(!1),b(),f(t.data.msg,"success",1e3)):(m(!1),f(t.daa.message,"error",1e3))},N=async(r,u)=>{r.preventDefault(),j(1),x(!0);const t=await M({id:u});t.status===200?(x(!1),b(1),f(t.data.msg,"success",1e3)):(x(!1),f(t.data.message,"error",1e3))},v=()=>{g(!1)};return e.jsxs("tr",{className:"border-b border-l border-r border-b6 text-xs",children:[e.jsx("td",{className:"px-5 py-3 capitalize",children:e.jsxs("div",{className:"relative",children:[w&&e.jsx("div",{className:"absolute flex items-center justify-center w-28 h-20",children:e.jsx("img",{src:"/loader-bg.gif",className:"w-5 h-5"})})," ",e.jsx("img",{src:c,onLoad:v,alt:"blog_thumbnail",className:"w-28 h-20"})]})}),e.jsxs("td",{className:"px-2 py-3 w-52 overflow-hidden",children:[o.substr(0,50),"..."]}),e.jsx("td",{className:"whitespace-nowrap  px-5 py-4 font-medium capitalize",children:i.replace(/-/g," ")}),e.jsxs("td",{className:"flex items-center justify-center mt-3 space-x-1 px-5 py-4",children:[e.jsx(C,{title:"Update blog",to:`/admin/update-blog/${l}`,className:"flex items-center justify-center bg-b3 text-white hover:bg-white hover:text-b3 border-2 border-white hover:border-b3 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:e.jsx(D,{className:"text-base"})}),e.jsx("span",{title:"Duplicate Blog",onClick:r=>y(r,l),className:"flex items-center justify-center bg-b7 text-white hover:bg-white hover:text-b7 border-2 border-white hover:border-b7 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:h?e.jsx("img",{src:"/loader-bg.gif",className:"w-4 h-4"}):e.jsx(L,{className:"text-lg"})}),e.jsx("span",{title:"Delete Blog",onClick:r=>N(r,a),className:"flex items-center justify-center bg-red-500/30 text-red-500 hover:bg-white hover:text-red-500 border-2 border-white hover:border-red-500 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:n?e.jsx("img",{src:"/loader-bg.gif",className:"w-4 h-4"}):e.jsx(T,{className:"text-base"})})]})]})},R=({data:c,setPage:o,getBlog:i})=>e.jsx("div",{className:"flex flex-col",children:e.jsx("div",{className:"overflow-x-auto sm:-mx-6 lg:-mx-8",children:e.jsx("div",{className:"inline-block min-w-full py-2 sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"min-w-full text-center text-sm font-light",children:[e.jsx("thead",{className:"border-b border-l border-b3 bg-b3 font-medium text-white",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-4 text-center",children:"Image"}),e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Title"}),e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Category"}),e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Action"})]})}),e.jsx("tbody",{children:c.map((a,l)=>e.jsx(P,{id:a._id,setPage:o,getBlog:i,img:a.thumbnail?a.thumbnail:"/no-image.jfif",title:a.title,slug:a.slug,category:a.category},l))})]})})})})}),U=()=>{const[c,o]=s.useState([]),[i,a]=s.useState(1),[l,b]=s.useState(8),[j,h]=s.useState(0),[m,n]=s.useState(!1),[x,w]=s.useState("all-categories"),[g,y]=s.useState(""),[N,v]=s.useState([]);s.useEffect(()=>{r()},[x,i]);const r=async t=>{n(!0);let p;t?(a(t),p={page:t,limit:l}):p={page:i,limit:l};const d=await k({category:x},p);d.status===200?(n(!1),o(d.data.blogs),h(Math.ceil(d.data.totalCount/l))):(o([]),n(!1))};s.useEffect(()=>{u()},[]);const u=async()=>{const t=await I();t.status===200&&v([{title:"All Categories"},...t.data.categories])},B=async t=>{t.preventDefault();const d=await z({title:g},{page:1,limit:l});d.status===200?(n(!1),o(d.data.blogs),h(Math.ceil(d.data.totalCount/l))):(o([]),n(!1))};return e.jsx(e.Fragment,{children:e.jsxs(E,{children:[e.jsxs("div",{className:"flex items-center space-x-2 my-2 bg-white py-3 px-5 w-full",children:[e.jsx(C,{to:"/admin/create-blog",className:"bg-b3 text-white text-xs px-3 rounded-2xl cursor-pointer py-2 font-bold",children:"CreateÂ Blog"}),e.jsx(F,{onChange:t=>w(t.target.value),options:N}),e.jsxs("div",{className:"flex w-full justify-end space-x-3",children:[e.jsx("input",{value:g,onChange:t=>y(t.target.value),placeholder:"Search Blog",className:"text-xs px-2 outline-none border border-b3 rounded-md"}),e.jsx("button",{onClick:B,className:"border border-b3 text-b3 text-xs px-2 rounded-md cursor-pointer py-1",children:"Search"})]})]}),m?e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("img",{src:"/loader-bg.gif",className:"w-10 h-10"})}):c.length>0?e.jsx(R,{setPage:a,getBlog:r,data:c}):e.jsx("div",{className:"flex justify-center w-full h-full",children:e.jsx("img",{src:"/not-found.webp",className:"w-36 h-36"})}),c.length>0?e.jsx(G,{page:i,setPage:a,totalPages:j}):null]})})};export{U as default};
