import{j as s,f as M,r,T as u}from"./index-51d5f935.js";import{M as U}from"./MyAccount-3572ab0d.js";import{T as i}from"./TextInput-16790f19.js";import{S as E}from"./SelectInput-4529fb7d.js";import{e as $,f as G}from"./profile-89ba7fbb.js";import{c as H,a}from"./index.esm-e9e5cd55.js";import{B as k}from"./BtnLoader-23d5cf1c.js";import"./MainLayout-1d814bef.js";import"./ScrollToTop-18281d88.js";import"./index.esm-3769a322.js";import"./index-a38f3315.js";const te=()=>s.jsx(s.Fragment,{children:s.jsxs(U,{children:[s.jsx("h2",{className:"text-2xl font-bold mb-10",children:"Billing Information"}),s.jsx(z,{})]})}),z=()=>{const n=M(e=>e.user._id),[P,B]=r.useState(""),[m,c]=r.useState(""),[g,f]=r.useState(""),[h,p]=r.useState(""),[q,x]=r.useState(""),[F,C]=r.useState("usa"),[y,R]=r.useState(""),[I,A]=r.useState("alabama"),[S,b]=r.useState(""),[j,N]=r.useState(""),v=async()=>{const e=await $({_id:n});e.status===200&&e.data.billingAddress&&(B(e.data.billingAddress._id),c(e.data.billingAddress.email),f(e.data.billingAddress.firstName),p(e.data.billingAddress.lastName),x(e.data.billingAddress.address),C(e.data.billingAddress.country),R(e.data.billingAddress.city),A(e.data.billingAddress.state),b(e.data.billingAddress.postalCode),N(e.data.billingAddress.phone))};r.useEffect(()=>{v()},[]);const L=H().shape({userId:a().required("User Id is Required!"),email:a().required("Email is Required!"),firstName:a().nullable(),lastName:a().required("Last Name is Required!"),address:a().required("Address is Required!"),city:a().required("City is Required!"),country:a().required("Country is Required!"),state:a().required("State is Required!"),postalCode:a().required("Postal Code is Required!"),phone:a().required("Phone is Required!")}),[T,o]=r.useState(!1),[t,w]=r.useState([]),_=async e=>{e.preventDefault(),o(!0);try{const d={userId:n,email:m,firstName:g,lastName:h,address:q,city:y,country:F,state:I,postalCode:S,phone:j};await L.validate(d,{abortEarly:!1});const l=await G({...d,id:P});l.status===200?(o(!1),u(l.data.msg,"success",1e3),v()):(o(!1),u(l.data.message,"error",1e3))}catch(d){if(o(!1),d){let l=d.errors;w(l),l.forEach(D=>{u(D,"error",1e3)})}else w([])}};return s.jsx(s.Fragment,{children:s.jsxs("form",{onSubmit:_,className:"lg:max-w-[432px] w-full flex flex-col gap-6",children:[s.jsx(i,{title:"Email",width:"full",value:m,onChange:e=>c(e.target.value),error:!!(t&&t.includes("Email is Required!")),errormessage:"Email is Required!",placeholder:"Email"}),s.jsx(i,{title:"First Name",width:"full",value:g,onChange:e=>f(e.target.value),error:!!(t&&t.includes("First Name is Required!")),errormessage:"First Name is Required!",placeholder:"First Name"}),s.jsx(i,{title:"Last Name",width:"full",value:h,onChange:e=>p(e.target.value),error:!!(t&&t.includes("Last Name is Required!")),errormessage:"Last Name is Required!",placeholder:"Last Name"}),s.jsx(i,{title:"Address",width:"full",value:q,onChange:e=>x(e.target.value),error:!!(t&&t.includes("Address is Required!")),errormessage:"Address is Required!",placeholder:"Address"}),s.jsx(E,{title:"Country",widthFull:"true",options:[{title:"United States",slug:"usa"}],onChange:e=>C(e.target.value)}),s.jsx(E,{title:"State",widthFull:"true",options:["Alabama"],onChange:e=>A(e.target.value)}),s.jsx(i,{title:"City",width:"full",value:y,onChange:e=>R(e.target.value),error:!!(t&&t.includes("City is Required!")),errormessage:"City is Required!",placeholder:"City"}),s.jsx(i,{title:"Post Code",width:"full",value:S,onChange:e=>b(e.target.value),error:!!(t&&t.includes("Postal Code is Required!")),errormessage:"Postal Code is Required!",placeholder:"Postal Code"}),s.jsx(i,{title:"Phone",width:"full",value:j,onChange:e=>N(e.target.value),error:!!(t&&t.includes("Phone is Required!")),errormessage:"Phone is Required!",placeholder:"Phone"}),s.jsx("button",{type:"submit",className:"flex justify-center items-center rounded-lg bg-b3 py-3 w-full text-white text-xs font-medium",children:T?s.jsx(k,{style:"w-4"}):"Save Changes"})]})})};export{z as BillingInformationData,te as default};
