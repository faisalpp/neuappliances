import{r as s,j as e,N as B,bs as D,bu as T,bt as L,w as b,bo as A,aV as k,K as G}from"./index-3f1419d9.js";/* empty css                      */import{d as E,a as F,G as M,b as z}from"./applianceTips-4b3300f4.js";import{G as I}from"./category-477ec917.js";const P=({img:n,title:c,category:o,id:a,slug:l,getBlog:j,setPage:u})=>{const[m,x]=s.useState(!1),[i,d]=s.useState(!1),[w,h]=s.useState(!0),y=async(r,p)=>{r.preventDefault(),x(!0);const t=await E({slug:p});t.status===200?(x(!1),j(),b(t.data.msg,"success",1e3)):(x(!1),b(t.data.message,"error",1e3))},N=async(r,p)=>{r.preventDefault(),u(1),d(!0);const t=await F({id:p});t.status===200?(d(!1),j(1),b(t.data.msg,"success",1e3)):(d(!1),b(t.data.message,"error",1e3))},v=()=>{h(!1)};return e.jsxs("tr",{className:"border-b border-l border-r border-b6 text-xs",children:[e.jsx("td",{className:"px-5 py-3 capitalize",children:e.jsxs("div",{className:"relative",children:[w&&e.jsx("div",{className:"absolute flex items-center justify-center w-28 h-20",children:e.jsx("img",{src:"/loader-bg.gif",className:"w-5 h-5"})})," ",e.jsx("img",{src:n,onLoad:v,alt:"blog_thumbnail",className:"w-28 h-20"})]})}),e.jsxs("td",{className:"px-2 py-3 w-52 overflow-hidden",children:[c.substr(0,50),"..."]}),e.jsx("td",{className:"whitespace-nowrap  px-5 py-4 font-medium capitalize",children:o.replace(/-/g," ")}),e.jsxs("td",{className:"flex items-center justify-center mt-3 space-x-1 px-5 py-4",children:[e.jsx(B,{title:"Update blog",to:`/admin/update-appliance-tips/${l}`,className:"flex items-center justify-center bg-b3 text-white hover:bg-white hover:text-b3 border-2 border-white hover:border-b3 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:e.jsx(D,{className:"text-base"})}),e.jsx("span",{title:"Duplicate Blog",onClick:r=>y(r,l),className:"flex items-center justify-center bg-b7 text-white hover:bg-white hover:text-b7 border-2 border-white hover:border-b7 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:m?e.jsx("img",{src:"/loader-bg.gif",className:"w-4 h-4"}):e.jsx(T,{className:"text-lg"})}),e.jsx("span",{title:"Delete Blog",onClick:r=>N(r,a),className:"flex items-center justify-center bg-red-500/30 text-red-500 hover:bg-white hover:text-red-500 border-2 border-white hover:border-red-500 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:i?e.jsx("img",{src:"/loader-bg.gif",className:"w-4 h-4"}):e.jsx(L,{className:"text-base"})})]})]})},R=({data:n,setPage:c,getBlog:o})=>e.jsx("div",{className:"flex flex-col",children:e.jsx("div",{className:"overflow-x-auto sm:-mx-6 lg:-mx-8",children:e.jsx("div",{className:"inline-block min-w-full py-2 sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"min-w-full text-center text-sm font-light",children:[e.jsx("thead",{className:"border-b border-l border-b3 bg-b3 font-medium text-white",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-4 text-center",children:"Image"}),e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Title"}),e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Category"}),e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Action"})]})}),e.jsx("tbody",{children:n.map((a,l)=>e.jsx(P,{id:a._id,setPage:c,getBlog:o,img:a.thumbnail?a.thumbnail:"/no-image.jfif",title:a.title,slug:a.slug,category:a.category},l))})]})})})})}),U=()=>{const[n,c]=s.useState([]),[o,a]=s.useState(1),[l,j]=s.useState(4),[u,m]=s.useState(0),[x,i]=s.useState(!1),[d,w]=s.useState("all-categories"),[h,y]=s.useState(""),[N,v]=s.useState([]);s.useEffect(()=>{r()},[d,o]);const r=async t=>{i(!0);let f;t?(a(t),f={page:t,limit:l}):f={page:o,limit:l};const S=await M({category:d},f);S.status===200?(i(!1),c(S.data.tips),m(Math.ceil(S.data.totalCount/l))):(c([]),i(!1))},p=async t=>{t.preventDefault(),i(!0);const g=await z({title:h});g.status===200?(i(!1),c(g.data.tips),m(Math.ceil(g.data.totalCount/l))):(c([]),i(!1))};s.useEffect(()=>{C()},[]);const C=async()=>{const t=await I();t.status===200&&v([{title:"All Categories"},...t.data.categories])};return e.jsx(e.Fragment,{children:e.jsxs(A,{children:[e.jsxs("div",{className:"flex items-center space-x-2 my-2 bg-white py-3 px-5 w-full",children:[e.jsx(B,{to:"/admin/create-appliance-tips",className:"bg-b3 text-white text-xs px-3 rounded-2xl cursor-pointer py-2 font-bold",children:"Create Appliance Tip"}),e.jsx(k,{name:"catego",onChange:t=>w(t.target.value),options:N}),e.jsxs("div",{className:"flex w-full justify-end space-x-3",children:[e.jsx("input",{value:h,onChange:t=>y(t.target.value),placeholder:"Search Blog",className:"text-xs px-2 outline-none border border-b3 rounded-md"}),e.jsx("button",{onClick:p,className:"border border-b3 text-b3 text-xs px-2 rounded-md cursor-pointer py-1",children:"Search"})]})]}),x?e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("img",{src:"/loader-bg.gif",className:"w-10 h-10"})}):n.length>0?e.jsx(R,{setPage:a,getBlog:r,data:n}):e.jsx("div",{className:"flex justify-center w-full h-full",children:e.jsx("img",{src:"/not-found.webp",className:"w-36 h-36"})}),u>=l?e.jsx(G,{page:o,setPage:a,totalPages:u}):null]})})};export{U as default};
