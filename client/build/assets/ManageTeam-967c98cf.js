import{p as A,q as i,r as a,j as e,af as _,bs as $,av as x,f as B,bo as ue,bO as xe,L as fe,aE as pe,w as o}from"./index-5dc18a3f.js";import{J as ge,K as he,L as be,M as je}from"./admin-fbe79e1b.js";import{D as we,C as Ne,P as ye}from"./react-beautiful-dnd.esm-445ea953.js";const De=()=>{const G=A().shape({name:i().required("Name is required"),designation:i().required("Designation is required"),image:i().required("Image is required")}),V=A().shape({id:i().required("Id is required"),uName:i().required("Name is required"),uDesignation:i().required("Designation is required"),uImage:i().required("Image is required"),oldImg:i().required("Old Image is required"),uTempImg:i()}),I=a.useRef(),D=a.useRef(),[m,f]=a.useState([]),[q,C]=a.useState(""),[T,U]=a.useState(""),[H,R]=a.useState(""),[J,M]=a.useState(),[k,p]=a.useState(""),[E,g]=a.useState(""),[K,h]=a.useState(""),[L,b]=a.useState(""),[z,P]=a.useState("/no-person.webp"),[Q,W]=a.useState(""),[X,j]=a.useState(!1),[O,w]=a.useState(!1),[Y,N]=a.useState(!1),[Z,F]=a.useState(!1),[ee,y]=a.useState(!1),[se,v]=a.useState(!1),[n,u]=a.useState([]),d=async()=>{N(!0);const t=await pe();t.status===200?(N(!1),f(t.data.members)):(N(!1),f([]))};a.useEffect(()=>{d()},[]);const te=t=>{const s=t.target.files[0];s&&(R(s),P(window.URL.createObjectURL(s)))},ae=t=>{const s=t.target.files[0];s&&(h(s),b(window.URL.createObjectURL(s)))},re=async t=>{t.preventDefault(),j(!0);const s=new FormData;s.set("image",H),s.set("name",T),s.set("designation",q);try{await G.validate(data,{abortEarly:!1})}catch(l){u(l?l.errors:[])}const r=await ge(s);console.log(r),r.status===200?(j(!1),o(r.data.msg,"success",1e3),d(),v(!1),U(""),C(""),R(""),P("")):(j(!1),o(r.data.message,"error",1e3))},le=async t=>{t.preventDefault(),w(!0);const s=new FormData;s.set("id",J),s.set("image",K),s.set("oldImg",Q),s.set("tempImg",L),s.set("name",k),s.set("designation",E);try{await V.validate(data,{abortEarly:!1})}catch(l){u(l?l.errors:[])}const r=await he(s);r.status===200?(w(!1),o(r.data.msg,"success",1e3),d(),M(),y(!1),p(""),g(""),h(""),b("")):(w(!1),o(r.data.message,"error",1e3))},ie=(t,s,r,l,c)=>{t.preventDefault(),M(c),p(s),g(r),h(l),b(l),W(l),y(!0)},ne=t=>{const s=Array.from(m),[r]=s.splice(t.source.index,1);s.splice(t.destination.index,0,r);const l=s.map((c,me)=>({...c,index:me+1}));f(l)},oe=async()=>{const t=await be(m);t.status===200?(F(!1),o(t.data.msg,"success",1e3),d()):(F(!1),o(t.data.message,"success",1e3))},[ce,S]=a.useState(null),de=async(t,s)=>{t.preventDefault(),S(s);const r=await je({id:s});r.status===200?(S(null),o(r.data.msg,"success",1e3),d()):(S(null),o(r.data.message,"error",1e3))};return e.jsxs(e.Fragment,{children:[e.jsx(_,{state:se,setState:v,children:e.jsxs("form",{className:"flex flex-col space-y-3",children:[e.jsx("h1",{className:"font-semibold",children:"Create Team Member"}),e.jsxs("div",{className:"relative w-40 h-40 ",children:[e.jsx("div",{className:"absolute flex bg-transparent rounded-full w-full h-full",children:e.jsx("span",{onClick:()=>{I.current.click()},className:"absolute left-28 bottom-0 flex items-center h-fit justify-center bg-b3 text-white hover:bg-white hover:text-b3 border-2 border-white hover:border-b3 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:e.jsx($,{className:"text-base"})})}),e.jsx("img",{className:"rounded-full h-40 w-40 mx-auto",src:z,alt:""}),e.jsx("input",{ref:I,type:"file",name:"image",onChange:t=>te(t),className:"hidden"})]}),e.jsx(x,{width:"full",name:"name",title:"Name",iscompulsory:"true",type:"text",value:T,onChange:t=>U(t.target.value),error:!!(n&&n.includes("Name is required")),errormessage:"Title is Required",placeholder:"Scott"}),e.jsx(x,{width:"full",name:"designation",title:"Designation",iscompulsory:"true",type:"text",value:q,onChange:t=>C(t.target.value),error:!!(n&&n.includes("Designation is required")),errormessage:"Title is Required",placeholder:"CEO & Founder"}),e.jsx("button",{type:"button",onClick:re,className:"flex justify-center items-center cursor-pointer rounded-md py-1 w-full bg-b3",children:X?e.jsx("img",{src:"/loader-bg.gif",className:"w-8"}):e.jsxs("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:[e.jsx("span",{className:"text-xs",children:"Create"}),e.jsx(B,{className:"text-2xl"})]})})]})}),e.jsx(_,{state:ee,setState:y,children:e.jsxs("form",{className:"flex flex-col space-y-3",children:[e.jsx("h1",{className:"font-semibold",children:"Update Team Member"}),e.jsxs("div",{className:"relative w-40 h-40 ",children:[e.jsx("div",{className:"absolute flex bg-transparent rounded-full w-full h-full",children:e.jsx("span",{onClick:()=>{D.current.click()},className:"absolute left-28 bottom-0 flex items-center h-fit justify-center bg-b3 text-white hover:bg-white hover:text-b3 border-2 border-white hover:border-b3 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:e.jsx($,{className:"text-base"})})}),e.jsx("img",{className:"rounded-full h-40 w-40 mx-auto",src:L,alt:""}),e.jsx("input",{ref:D,type:"file",name:"image",onChange:ae,className:"hidden"})]}),e.jsx(x,{width:"full",name:"name",title:"Name",iscompulsory:"true",type:"text",value:k,onChange:t=>p(t.target.value),error:!!(n&&n.includes("Name is required")),errormessage:"Title is Required",placeholder:"Scott"}),e.jsx(x,{width:"full",name:"designation",title:"Designation",iscompulsory:"true",type:"text",value:E,onChange:t=>g(t.target.value),error:!!(n&&n.includes("Designation is required")),errormessage:"Title is Required",placeholder:"CEO & Founder"}),e.jsx("button",{type:"button",onClick:le,className:"flex justify-center items-center cursor-pointer rounded-md py-1 w-full bg-b3",children:O?e.jsx("img",{src:"/loader-bg.gif",className:"w-8"}):e.jsxs("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:[e.jsx("span",{className:"text-xs",children:"Update"}),e.jsx(B,{className:"text-2xl"})]})})]})}),e.jsxs(ue,{children:[e.jsxs("div",{className:"flex mb-5 py-3 rounded-3xl px-10 w-full",children:[e.jsx("button",{type:"button",onClick:oe,className:"flex justify-center items-center cursor-pointer rounded-md py-1 w-fit bg-b3",children:Z?e.jsx("img",{src:"/loader-bg.gif",className:"w-8"}):e.jsx("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:e.jsx("span",{className:"text-xs",children:"Save"})})}),e.jsx("div",{className:"flex w-full justify-end space-x-3",children:e.jsx(xe,{onClick:()=>v(!0),className:"text-b3 text-3xl shadow-xl rounded-full cursor-pointer"})})]}),e.jsx(we,{onDragEnd:ne,className:"w-full 3xl:max-w-1680px mx-auto",children:e.jsx(Ne,{droppableId:"nnn",className:"3xl:px-[60px] flex flex-wrap justify-center 3xl:justify-start gap-10 3xl:gap-20",children:t=>e.jsxs("div",{...t.droppableProps,ref:t.innerRef,className:"flex flex-wrap justify-center 3xl:justify-start gap-10 3xl:gap-20",children:[Y?e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("img",{src:"/loader-bg.gif",className:"w-10 h-10"})}):m.length>0?m.map((s,r)=>e.jsx(ye,{draggableId:s._id,index:r,children:l=>a.createElement("figure",{...l.draggableProps,...l.dragHandleProps,ref:l.innerRef,title:"Draggable!",key:r,className:"flex flex-col border hover:border-b6 border-b20 rounded-[20px] hover:cursor-pointer hover:shadow-s1 duration-300 p-5 w-[200px]"},e.jsx("img",{className:"w-40 h-40 rounded-full mx-auto",src:s.image,alt:`${s.name} Image`}),e.jsx("div",{className:"pt-[10px]",children:e.jsxs("figcaption",{className:"font-medium text-center",children:[e.jsx("div",{className:"font-bold text-[22px] text-b18 mb-3",children:s.name}),e.jsx("div",{className:"text-b3",children:s.designation})]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:c=>ie(c,s.name,s.designation,s.image,s._id),className:"flex self-center justify-center items-center cursor-pointer rounded-md py-1 mt-2 w-fit bg-b3",children:O?e.jsx("img",{src:"/loader-bg.gif",className:"w-8"}):e.jsx("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:e.jsx("span",{className:"text-xs",children:"Update"})})}),e.jsx(fe,{onClick:c=>de(c,s._id),className:"flex self-center justify-center items-center cursor-pointer rounded-md py-1 mt-2 w-fit bg-red-500",children:ce===s._id?e.jsx("img",{src:"/loader-bg.gif",className:"w-8"}):e.jsx("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:e.jsx("span",{className:"text-xs",children:"Delete"})})})]}))},s._id)):e.jsx("div",{className:"flex justify-center w-full h-full",children:e.jsx("img",{src:"/not-found.webp",className:"w-36 h-36"})}),t.placeholder]})})})]})]})};export{De as default};
