import{r as l,j as e,N as g,T as j}from"./index-51d5f935.js";import{A as w}from"./AdminAccount-4dd52de2.js";import{m as v,n as O}from"./index.esm-3769a322.js";import{d as S,g as P,s as D}from"./order-77082c3d.js";import{h as T}from"./moment-fbc5633a.js";import{P as C}from"./Pagination2-6342ec82.js";import{S as M}from"./SelectInput-4529fb7d.js";import"./MainLayout-1d814bef.js";import"./ScrollToTop-18281d88.js";import"./index-a38f3315.js";const A=({id:r,orderNo:a,date:s,orderStatus:d,paymentStatus:o,total:b,refreshOrders:m})=>{const[h,t]=l.useState(!1),u=async(p,n)=>{p.preventDefault(),t(!0);const i=await S({orderId:n});i.status===200?(j(i.data.msg,"success",1e3),t(!1),m()):(j(i.data.message,"error",1e3),t(!1))};return e.jsxs("tr",{className:"border-b border-l border-r border-b6 text-xs",children:[e.jsx("td",{className:"whitespace-nowrap px-5 py-3",children:a}),e.jsx("td",{className:"whitespace-nowrap px-5 py-3 capitalize",children:s}),e.jsxs("td",{className:"whitespace-nowrap px-5 py-3 capitalize",children:[d==="pending"?e.jsx("span",{className:"bg-yellow-500/20 text-yellow-700 px-2 rounded-2xl py-1",children:"Pending"}):null,d==="canceled"?e.jsx("span",{className:"bg-red-500/20 text-red-500 px-2 rounded-2xl py-1",children:"Rejected"}):null,d==="completed"?e.jsx("span",{className:"bg-b6/20 text-b6 px-2 rounded-2xl py-1",children:"Completed"}):null,d==="processing"?e.jsx("span",{className:"bg-b10/20 text-b10 px-2 rounded-2xl py-1",children:"Processing"}):null,d==="shipping"?e.jsx("span",{className:"bg-b10/20 text-b10 px-2 rounded-2xl py-1",children:"Processing"}):null]}),e.jsxs("td",{className:"whitespace-nowrap px-5 py-3 capitalize",children:[o==="pending"?e.jsx("span",{className:"bg-yellow-500/20 text-yellow-700 px-2 rounded-2xl py-1",children:"Pending"}):null,o==="declined"?e.jsx("span",{className:"bg-red-500/20 text-red-500 px-2 rounded-2xl py-1",children:"Rejected"}):null,o==="completed"?e.jsx("span",{className:"bg-b6/20 text-b6 px-2 rounded-2xl py-1",children:"Completed"}):null]}),e.jsxs("td",{className:"whitespace-nowrap  px-5 py-4 text-b6 font-medium",children:["$",b]}),e.jsxs("td",{className:"flex items-center justify-center whitespace-nowrap space-x-1 px-5 py-4",children:[e.jsx(g,{title:"View Order",to:`/admin/update-order/${a}`,className:"flex items-center justify-center bg-b3 text-white hover:bg-white hover:text-b3 border-2 border-white hover:border-b3 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:e.jsx(v,{className:"text-base"})}),e.jsx("button",{onClick:p=>u(p,r),title:"Delete Order",className:"flex items-center justify-center bg-red-500/30 text-red-500 hover:bg-white hover:text-red-500 border-2 border-white hover:border-red-500 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:e.jsx(O,{className:"text-base"})})]})]})},k=({orders:r,refreshOrders:a})=>e.jsx("div",{className:"flex flex-col",children:e.jsx("div",{className:"overflow-x-auto sm:-mx-6 lg:-mx-8",children:e.jsx("div",{className:"inline-block min-w-full py-2 sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"min-w-full text-center text-sm font-light",children:[e.jsx("thead",{className:"border-b border-l border-b3 bg-b3 font-medium text-white",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:" px-6 py-4",children:"Order #"}),e.jsx("th",{scope:"col",className:" px-6 py-4",children:"Date"}),e.jsx("th",{scope:"col",className:" px-6 py-4",children:"Order Status"}),e.jsx("th",{scope:"col",className:" px-6 py-4",children:"Payment Status"}),e.jsx("th",{scope:"col",className:" px-6 py-4",children:"Total"}),e.jsx("th",{scope:"col",className:" px-6 py-4",children:"Actions"})]})}),e.jsx("tbody",{children:r!=null&&r.length?r.map(s=>e.jsx(A,{orderStatus:s.orderStatus,paymentStatus:s.paymentStatus,refreshOrders:a,id:s._id,orderNo:s.orderNo,date:T(s.createdAt).format("DD MMMM YYYY"),status:s.orderStatus,total:s.grandTotal})):null})]})})})})}),V=()=>{const[r,a]=l.useState([]),[s,d]=l.useState(1),[o,b]=l.useState(16),[m,h]=l.useState(0),[t,u]=l.useState(""),[p,n]=l.useState(!1),[i,y]=l.useState("all-orders"),f=async()=>{n(!0);const c=await P({page:s,limit:o},{orderType:i});c.status===200?(n(!1),a(c.data.orders),h(Math.ceil(c.data.totalCount/o))):(n(!1),a([]))};l.useEffect(()=>{(t==null?void 0:t.length)===0&&f()},[i,s,t]);const N=async x=>{console.log("searfch"),x.preventDefault(),n(!0);const c=await D({orderNo:t});console.log(c),c.status===200?(n(!1),a(c.data.orders),h(Math.ceil(c.data.totalCount/o))):(n(!1),a([]))};return e.jsx(e.Fragment,{children:e.jsxs(w,{children:[e.jsxs("div",{className:"flex space-x-5 items-center mb-2 bg-white py-3 px-5 w-full",children:[e.jsx(g,{to:"/admin/create-product",className:"bg-b3 text-white text-xs px-3 rounded-2xl cursor-pointer py-2",children:"Create Order"}),e.jsx("div",{className:"w-96",children:e.jsx(M,{onChange:x=>y(x.target.value),options:["All Orders","Delivery","Pickup"]})}),e.jsxs("form",{onSubmit:N,className:"flex w-full justify-end space-x-3",children:[e.jsx("input",{name:"search",placeholder:"Search #12345",value:t,onChange:x=>u(x.target.value),className:"text-xs px-2 outline-none border border-b3 rounded-md"}),e.jsx("button",{className:"border border-b3 text-b3 text-xs px-2 rounded-md cursor-pointer py-1",children:"Search"})]})]}),p?e.jsx("div",{className:"flex w-full justify-center h-24 items-center",children:e.jsx("img",{src:"/loading.gif",className:"h-12"})}):r.length>0?e.jsxs(e.Fragment,{children:[e.jsx(k,{refreshOrders:f,orders:r}),e.jsx(C,{page:s,setPage:d,totalPages:m})]}):e.jsx("div",{className:"flex w-full justify-center h-52 items-center",children:e.jsx("img",{src:"/not-found.webp",className:"w-32"})})]})})};export{V as default};
