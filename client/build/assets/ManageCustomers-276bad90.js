import{bo as A,r,j as e,bv as C,aX as M,N as i,cr as S,by as Y,cs as $}from"./index-5bb0a42c.js";import{P}from"./Pagination2-e67e9a95.js";import{h}from"./moment-fbc5633a.js";const k=async(s,o)=>{let a;try{a=await A.post(`/api/admin/get-customers/?page=${s.page}&limit=${s.limit}`,o)}catch(c){return c}return a},L=()=>{const[s,o]=r.useState([]),[a,c]=r.useState(1),[d,D]=r.useState(16),[p,f]=r.useState(0),[b,n]=r.useState(!1),[m,j]=r.useState("user"),g=async()=>{n(!0);const l=await k({page:a,limit:d},{userType:m});l.status===200?(n(!1),o(l.data.customers),f(Math.ceil(l.data.totalCount/d))):n(!1)};r.useEffect(()=>{g()},[a,m]);const N=({id:t,name:l,lastOrder:x,dateRegisterd:y,email:u,totalOrders:w,totalAmount:v})=>e.jsxs("tr",{className:"border-b border-l border-r border-b6 text-xs font-medium",children:[e.jsx("td",{className:"px-2 py-3",children:l}),e.jsx("td",{className:"px-5 py-3",children:x?h(x).format("DD MMMM YYYY"):"N/A"}),e.jsx("td",{className:"px-10 py-3",children:h(y).format("DD MMMM YYYY")}),e.jsx("td",{className:"py-3",children:e.jsx("a",{href:`mailto:${u}`,className:"underline text-b6",children:u})}),e.jsx("td",{className:"px-5 py-3",children:w}),e.jsxs("td",{className:"px-5 py-3 text-b7",children:["$",v]}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center justify-center space-x-2 h-full",children:[e.jsx(i,{title:"View Customer",to:`/admin/update-customer/${t}`,className:"flex items-center justify-center bg-b3 text-white hover:bg-white hover:text-b3 border-2 border-b3 hover:border-b3 text-xs px-1 w-fit h-fit rounded-full cursor-pointer py-1",children:e.jsx(Y,{className:"text-sm"})}),e.jsx(i,{title:"Block Customer",to:"/admin/block-customer/:id",className:"flex items-center justify-center bg-red-500 text-white hover:bg-white hover:text-red-500 border-[1px] border-red-500 hover:border-red-500 text-sm w-fit h-fit rounded-full cursor-pointer px-1 py-1",children:e.jsx($,{className:"text-base"})})]})})]});return e.jsx(e.Fragment,{children:e.jsxs(C,{children:[e.jsxs("div",{className:"flex items-center mb-2 bg-white py-3 px-5 w-full",children:[e.jsx("div",{className:"w-1/2",children:e.jsx(M,{onChange:t=>j(t.target.value),options:["User","Admin"]})}),e.jsxs("div",{className:"flex w-full justify-end space-x-3",children:[e.jsx("input",{placeholder:"Search Customer",className:"text-xs px-2 outline-none border border-b3 rounded-md"}),e.jsx(i,{to:"/admin/create-product",className:"border border-b3 text-b3 text-xs px-2 rounded-md cursor-pointer py-1",children:"Search"})]})]}),b?e.jsx("div",{className:"flex w-full justify-center h-24 items-center",children:e.jsx("img",{src:"/loading.gif",className:"h-12"})}):s.length>0?e.jsxs(e.Fragment,{children:[e.jsx(S,{head:["Name","Last Order","Date Registerd","Email","Orders","Total Spend","Action"],children:(s==null?void 0:s.length)>0?s==null?void 0:s.map(t=>e.jsx(N,{id:t.customer._id,name:`${t.customer.firstName} ${t.customer.lastName}`,lastOrder:t.lastOrder,dateRegisterd:t.customer.createdAt,email:t.customer.email,totalOrders:t.orderCount,totalAmount:t.totalAmount})):null}),e.jsx(P,{page:a,setPage:c,totalPages:p})]}):e.jsx("div",{className:"flex w-full justify-center h-52 items-center",children:e.jsx("img",{src:"/not-found.webp",className:"w-32"})})]})})};export{L as default};
