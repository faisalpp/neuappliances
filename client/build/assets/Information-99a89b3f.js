import{j as e,r as a,a3 as u,u as re,a2 as ie,L as V,by as i,n as $,bG as ne,bH as ce,z as Q,bI as oe,ah as de,bJ as W}from"./index-996a976f.js";import{C as ue,B as pe,L as me}from"./LeftArrowSvg-2cfdc8ac.js";import{c as he,a as r}from"./index.esm-356be87a.js";import"./CustomInput-b0413832.js";const xe=()=>e.jsx(e.Fragment,{children:e.jsxs("svg",{width:"11",height:"10",viewBox:"0 0 11 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("g",{id:" caret-down","clip-path":"url(#clip0_444_24184)",children:e.jsx("path",{id:"Vector",d:"M0.332031 2.5H10.332L5.33203 7.5",fill:"#737373"})}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_444_24184",children:e.jsx("rect",{width:"10",height:"10",fill:"white",transform:"translate(0.332031)"})})})]})}),X=({label:m,id:p,Options:h,setState:x})=>e.jsxs("div",{className:"relative",children:[e.jsx("select",{id:p,onChange:n=>x(n.target.value),className:"w-full border border-b31 px-[11px] pt-[19px] pb-1 outline-none appearance-none rounded-lg text-sm text-b16 font-medium",children:h.map((n,g)=>e.jsx("option",{value:n.value,children:n.name},g))}),e.jsx("label",{htmlFor:p,className:"absolute top-[5px] text-xs text-b25 left-[11px]",children:m}),e.jsx("div",{className:"absolute top-0 bottom-0 h-full flex items-center justify-end right-3",children:e.jsx("div",{className:"pl-3 py-[5px] border-l border-b31",children:e.jsx(xe,{})})})]}),ye=()=>{const m=async()=>{const s=await ce();console.log(s)};a.useEffect(()=>{m()},[]);const p=[{name:"USA",value:"usa"}],h=[{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"}],x=he().shape({email:r().required("Email is Required!"),firstName:r().nullable(),lastName:r().required("Last Name is Required!"),address:r().required("Address is Required!"),appartment:r().nullable(),city:r().required("City is Required!"),country:r().required("Country is Required!"),province:r().required("Province is Required!"),postalCode:r().required("Postal Code is Required!"),phone:r().required("Phone is Required!")}),n=u(s=>s.cart.deliveryOrders),g=u(s=>s.cart.pickupOrders),t=u(s=>s.order.orderInfo),L=re();n.length===0&&g.length===0&&L("/mycart");const f=u(s=>s.cart.deliveryInfo),[O,b]=a.useState(""),[F,v]=a.useState(!1),[U,j]=a.useState(""),[D,y]=a.useState(""),[Z,N]=a.useState(""),[z,C]=a.useState(""),[B,w]=a.useState(""),[Y,S]=a.useState("USA"),[I,q]=a.useState("Alberta"),[c,A]=a.useState(""),[G,R]=a.useState(""),[k,P]=a.useState(!1),J=u(s=>s.user.auth),ee=()=>{const s=JSON.parse(localStorage.getItem("neu_customer_address"));!J&&s?(console.log("pre"),b(s.email),v(s.keepUpdates),j(s.firstName),y(s.lastName),N(s.address),C(s.appartment),w(s.city),S(s.country),q(s.province),A(s.postalCode),R(s.phone),P(s.saveAddress)):(console.log(!!(t!=null&&t.keepUpdates)),b(t==null?void 0:t.email),v(!0),j(t==null?void 0:t.firstName),y(t==null?void 0:t.lastName),N(t==null?void 0:t.address),C(t==null?void 0:t.appartment),w(t==null?void 0:t.city),S(t==null?void 0:t.country),q(t==null?void 0:t.province),A(t==null?void 0:t.postalCode),R(t==null?void 0:t.phone),P(t!=null&&t.saveAddress?t.saveAddress:!1))};a.useEffect(()=>{ee()},[]);const[l,M]=a.useState([]),[H,ge]=a.useState(!1),E=ie(),K=s=>{const{name:o,checked:d}=s.target;o==="keepUpdates"&&v(d),o==="saveAddress"&&P(d)},se=async s=>{if(s.preventDefault(),f.shipping==="No Shipping Available!")return Q("Shipping Not Available!","error",1e3),!0;const o={email:O,firstName:U,lastName:D,address:Z,appartment:z,city:B,country:Y,postalCode:c,phone:G,saveAddress:k,keepUpdates:F,province:I};k&&(J||localStorage.setItem("neu_customer_address",JSON.stringify(o)));try{await x.validate(o,{abortEarly:!1}),E(oe(o)),L("/mycart/shipping")}catch(d){if(d){let T=d.errors;M(T),T.forEach(le=>{Q(le,"error",1e3)})}else M([])}},[te,_]=a.useState(!1),ae=async()=>{_(!0);const s=await de({zip:c});console.log(s),s.status==200?(_(!1),E(W({...f,location:c,shipping:s.data.zip.location.rate}))):(E(W({...f,location:c,shipping:"No Shipping Available!"})),_(!1))};return a.useEffect(()=>{c.length===5&&n.length>0&&ae()},[c]),e.jsx(e.Fragment,{children:e.jsxs(ue,{children:[e.jsx(V,{to:"/",children:e.jsx("img",{src:"/login_logo.webp",alt:""})}),e.jsx(pe,{}),e.jsxs("fieldset",{className:"border border-b31 rounded-md pb-5 px-5 pt-2",children:[e.jsx("legend",{className:"mx-auto text-b16 font-medium text-sm px-3",children:"Express checkout"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("button",{className:"rounded text-white flex justify-center p-3 bg-[#5A31F4]",children:e.jsx("img",{src:"/payment/shoppay.webp",alt:"shoppay",className:"h-[23px] object-contain"})}),e.jsx("button",{className:"rounded text-white flex justify-center p-3 bg-[#113984]",children:e.jsx("img",{src:"/payment/paypal.webp",alt:"shoppay",className:"h-[23px] object-contain"})}),e.jsx("button",{className:"rounded text-white flex justify-center p-3 bg-black",children:e.jsx("img",{src:"/payment/pay.webp",alt:"shoppay",className:"h-[23px] object-contain"})})]})]}),e.jsx("div",{className:"text_between_line my-8",children:"OR"}),e.jsxs("form",{onSubmit:se,children:[e.jsxs("div",{className:"space-y-14px [&>*]:text-b16 [&>*]:text-sm",children:[e.jsx("h3",{className:"text-sm font-medium text-b16",children:"Contact information"}),e.jsx(i,{width:"full",name:"Email",title:"Email",iscompulsory:"false",type:"text",value:O,onChange:s=>b(s.target.value),error:!!(l&&l.includes("Email is Required!")),errormessage:"Email is Required!",placeholder:"abc@gmail.com"}),e.jsx($.Checkbox,{onChange:s=>K(s),defaultChecked:!!F,name:"keepUpdates",id:"keep-me-update",label:"Keep me up to date on news and exclusive offers",className:"checked:bg-black border-b31",ripple:!1})]}),e.jsxs("div",{className:"space-y-14px mt-8",children:[e.jsx("h3",{className:"text-lg font-medium text-b16",children:"Shipping address"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(i,{width:"full",name:"firstName",title:"",iscompulsory:"false",type:"text",value:U,onChange:s=>j(s.target.value),error:!!(l&&l.includes("First Name is Required!")),errormessage:"First Name is Required!",placeholder:"First Name (optional)"}),e.jsx(i,{width:"full",name:"lastName",title:"",iscompulsory:"false",type:"text",value:D,onChange:s=>y(s.target.value),error:!!(l&&l.includes("Last Name is Required!")),errormessage:"Last Name is Required!",placeholder:"Last Name"}),e.jsxs("div",{className:"col-span-2 space-y-3",children:[e.jsx(i,{width:"full",name:"address",title:"",iscompulsory:"false",type:"text",value:Z,onChange:s=>N(s.target.value),error:!!(l&&l.includes("Address is Required!")),errormessage:"Address is Required!",placeholder:"Address"}),e.jsx(i,{width:"full",name:"appartment",title:"",iscompulsory:"false",type:"text",value:z,onChange:s=>C(s.target.value),error:!!(l&&l.includes("Apartment, suite is Required!")),errormessage:"Apartment, suite is Required!",placeholder:"Apartment, suite, etc. (optional)"}),e.jsx(i,{width:"full",name:"city",title:"",iscompulsory:"false",type:"text",value:B,onChange:s=>w(s.target.value),error:!!(l&&l.includes("City is Required!")),errormessage:"City is Required!",placeholder:"City"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-14px",children:[e.jsx(X,{setState:S,id:"country_region",label:"Country / region",Options:p}),e.jsx(X,{setState:q,id:"province",label:"Province",Options:h}),e.jsxs("div",{className:"relative  col-span-2 md:col-span-1 [&>*]:h-full",children:[te?e.jsx("div",{className:"absolute flex rounded-lg items-center w-full justify-end px-2",children:e.jsx("img",{src:"/loader-bg.gif",className:"w-4 h-4"})}):null,e.jsx(i,{width:"full",name:"postalCode",title:"",iscompulsory:"false",type:"text",value:c,onChange:s=>A(s.target.value),error:!!(l&&l.includes("Postal Code is Required!")),errormessage:"Postal Code is Required!",placeholder:"Postal Code"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{width:"full",name:"phone",title:"",iscompulsory:"false",type:"text",value:G,onChange:s=>R(s.target.value),error:!!(l&&l.includes("Phone is Required!")),errormessage:"Phone is Required!",placeholder:"Phone"}),e.jsx("div",{className:"absolute right-3 top-3",children:e.jsx(ne,{className:"text-2xl text-b3"})})]}),e.jsx("div",{className:"[&>*]:text-b16 [&>*]:text-sm",children:e.jsx($.Checkbox,{onChange:s=>K(s),id:"save-information",name:"saveAddress",defaultChecked:!!k,label:"Save this information for next time",className:"checked:bg-black border-b31",ripple:!1})})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center w-full mt-5",children:[e.jsxs(V,{to:"/mycart",className:"flex gap-1 items-center",children:[e.jsx(me,{}),e.jsx("span",{className:"text-sm font-medium text-b3",children:"Return to Cart"})]}),e.jsxs("button",{type:"submit",disabled:!!H,className:"flex items-center py-3 px-6 text-xs rounded-lg bg-b3 text-white",children:["Continue to Shipping ",H?e.jsx("img",{src:"/loader-bg.gif",className:"ml-2 w-4 h-4"}):null]})]})]})]})})};export{ye as default};
