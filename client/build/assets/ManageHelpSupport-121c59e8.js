import{r as s,j as e,N as G,bs as I,bu as Y,bt as Z,w as i,aO as ee,v as te,af as A,av as E,f as R,bo as se,aV as ae,K as le}from"./index-554f52d4.js";import{d as re,a as ce,G as oe,s as ne}from"./helpSupport-7c1fae75.js";import{g as ie,c as de,u as xe}from"./helpSupportTab-08a6f296.js";const pe=({desc:l,title:r,category:d,id:a,slug:c,getBlog:f,setPage:C})=>{const[j,b]=s.useState(!1),[m,h]=s.useState(!1),D=async(x,g)=>{x.preventDefault(),b(!0);const n=await re({id:g});n.status===200?(b(!1),f(),i(n.data.msg,"success",1e3)):(b(!1),i(n.data.message,"error",1e3))},N=async(x,g)=>{x.preventDefault(),C(1),h(!0);const n=await ce({id:g});n.status===200?(h(!1),f(1),i(n.data.msg,"success",1e3)):(h(!1),i(n.data.message,"error",1e3))};return e.jsxs("tr",{className:"border-b border-l border-r border-b6 text-xs",children:[e.jsxs("td",{className:"px-2 py-3 w-52 overflow-hidden",children:[r==null?void 0:r.substr(0,50),"..."]}),e.jsxs("td",{className:"px-2 py-3 w-52 overflow-hidden",children:[l==null?void 0:l.substr(0,50),"..."]}),e.jsx("td",{className:"whitespace-nowrap  px-5 py-4 font-medium capitalize",children:d.replace(/-/g," ")}),e.jsxs("td",{className:"flex items-center justify-center mt-3 space-x-1 px-5 py-4",children:[e.jsx(G,{title:"Update blog",to:`/admin/update-help/${a}`,className:"flex items-center justify-center bg-b3 text-white hover:bg-white hover:text-b3 border-2 border-white hover:border-b3 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:e.jsx(I,{className:"text-base"})}),e.jsx("span",{title:"Duplicate Blog",onClick:x=>D(x,a),className:"flex items-center justify-center bg-b7 text-white hover:bg-white hover:text-b7 border-2 border-white hover:border-b7 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:j?e.jsx("img",{src:"/loader-bg.gif",className:"w-4 h-4"}):e.jsx(Y,{className:"text-lg"})}),e.jsx("span",{title:"Delete Blog",onClick:x=>N(x,a),className:"flex items-center justify-center bg-red-500/30 text-red-500 hover:bg-white hover:text-red-500 border-2 border-white hover:border-red-500 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:m?e.jsx("img",{src:"/loader-bg.gif",className:"w-4 h-4"}):e.jsx(Z,{className:"text-base"})})]})]})},ue=({data:l,setPage:r,getBlog:d})=>e.jsx("div",{className:"flex flex-col",children:e.jsx("div",{className:"overflow-x-auto sm:-mx-6 lg:-mx-8",children:e.jsx("div",{className:"inline-block min-w-full py-2 sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"min-w-full text-center text-sm font-light",children:[e.jsx("thead",{className:"border-b border-l border-b3 bg-b3 font-medium text-white",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Title"}),e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Description"}),e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Category"}),e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Action"})]})}),e.jsx("tbody",{children:l.map((a,c)=>e.jsx(pe,{id:a._id,setPage:r,getBlog:d,title:a.title,slug:a.slug,desc:a.shortDescription,category:a.category},c))})]})})})})});function me(l){return ee({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M170.5 51.6L151.5 80h145l-19-28.4c-1.5-2.2-4-3.6-6.7-3.6H177.1c-2.7 0-5.2 1.3-6.7 3.6zm147-26.6L354.2 80H368h48 8c13.3 0 24 10.7 24 24s-10.7 24-24 24h-8V432c0 44.2-35.8 80-80 80H112c-44.2 0-80-35.8-80-80V128H24c-13.3 0-24-10.7-24-24S10.7 80 24 80h8H80 93.8l36.7-55.1C140.9 9.4 158.4 0 177.1 0h93.7c18.7 0 36.2 9.4 46.6 24.9zM80 128V432c0 17.7 14.3 32 32 32H336c17.7 0 32-14.3 32-32V128H80zm80 64V400c0 8.8-7.2 16-16 16s-16-7.2-16-16V192c0-8.8 7.2-16 16-16s16 7.2 16 16zm80 0V400c0 8.8-7.2 16-16 16s-16-7.2-16-16V192c0-8.8 7.2-16 16-16s16 7.2 16 16zm80 0V400c0 8.8-7.2 16-16 16s-16-7.2-16-16V192c0-8.8 7.2-16 16-16s16 7.2 16 16z"}}]})(l)}const he=({setState:l,tabs:r,handleUpdate:d,loading:a})=>e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-semibold  mt-5 mb-2 text-center text-xl",children:"Help & Support Tabs"}),e.jsxs("div",{className:"h-72 border-[1px] border-b31 rounded-xl",children:[e.jsx("div",{className:"flex justify-end w-full py-3 px-10 border-b-[1px] border-b31",children:e.jsx("button",{type:"button",onClick:()=>l(!0),className:"bg-b6 text-white text-sm px-2 rounded-md py-1",children:"Add Tab"})}),e.jsx("div",{className:"flex flex-wrap px-1 py-4 gap-x-2 gap-y-2 overflow-x-hidden overflow-y-scroll h-36 mx-1",children:a?e.jsx(te,{style:"w-10 h-10 mt-10"}):r.length>0?r.map(c=>e.jsxs("div",{className:"flex items-center bg-b31/20 border-[1px] px-3 text-sm rounded-2xl font-medium h-fit",children:[e.jsx("span",{className:"w-full py-2 pr-2 border-r-[1px] border-b31",children:c.title}),e.jsxs("div",{className:"flex space-x-2 pl-2",children:[e.jsx("span",{onClick:f=>d(f,c._id,c.title),className:"bg-b6 flex px-[6px] py-[6px] rounded-full cursor-pointer",children:e.jsx(I,{className:"text-white"})}),c.title!=="Uncategorized"?e.jsx("span",{className:"bg-red-500 flex px-[6px] py-[6px] rounded-full cursor-pointer",children:e.jsx(me,{className:"text-white"})}):null]})]})):e.jsx("h3",{className:"text-red-500 text-sm font-semibold",children:"No Tabs Found!"})})]})]}),je=()=>{const[l,r]=s.useState([]),[d,a]=s.useState(1),[c,f]=s.useState(4),[C,j]=s.useState(1),[b,m]=s.useState(!1),[h,D]=s.useState("all-categories"),[N,x]=s.useState(""),[g,B]=s.useState([]);s.useEffect(()=>{n()},[h,d]);const n=async t=>{m(!0);let p;t?(a(t),p={page:t,limit:c}):p={page:d,limit:c};const u=await oe({category:h},p);u.status===200?(m(!1),r(u.data.helps),j(Math.ceil(u.data.totalCount/c))):(r([]),m(!1))},M=async t=>{t.preventDefault();const u=await ne({title:N},{page:1,limit:c});console.log(u),u.status===200?(r(u.data.helps),j(Math.ceil(u.data.totalCount/c)),m(!1)):(r([]),m(!1))},[q,F]=s.useState([]),[z,L]=s.useState(""),[O,w]=s.useState(!1),[P,y]=s.useState(!1),[_,K]=s.useState(""),[V,T]=s.useState(""),[$,v]=s.useState(!1),[U,S]=s.useState(!1),[J,k]=s.useState(!1);s.useState([]);const H=async()=>{k(!0);const t=await ie();t.status===200?(k(!1),F(t.data.helpTabs),B([{title:"All Categories"},...t.data.helpTabs])):(F([]),k(!1))};s.useEffect(()=>{H()},[]);const Q=async t=>{if(t.preventDefault(),z.length===0){i("Tab Title Required!","error",1e3),y(!1);return}y(!0);const o=await de({title:z});o.status===200?(y(!1),H(),i(o.data.msg,"success",1e3),L(""),w(!1)):(i(o.data.message,"error",1e3),y(!1),L(""),w(!1))},W=async t=>{if(t.preventDefault(),S(!0),V.length===0){i("Tab Title Required!","error",1e3),S(!1);return}const o=await xe({title:V,id:_});console.log(o),o.status===200?(S(!1),H(),i(o.data.msg,"success",1e3),T(""),v(!1)):(i(o.data.message,"error",1e3),S(!1),T(""),v(!1))},X=(t,p,o)=>{t.preventDefault(),T(o),K(p),v(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(A,{state:O,setState:w,zindex:"z-[99]",children:e.jsxs("form",{className:"flex flex-col space-y-3",children:[e.jsx("h1",{className:"font-semibold",children:"Create Help & Support Tab"}),e.jsx(E,{width:"full",name:"title",title:"Tab Title",iscompulsory:"true",type:"text",value:z,onChange:t=>L(t.target.value),placeholder:"Enter Tab Name"}),e.jsx("button",{onClick:t=>{P||Q(t)},type:"button",className:"flex justify-center items-center cursor-pointer rounded-md py-1 w-full bg-b3",children:P?e.jsx("img",{src:"/loader-bg.gif",className:"w-8"}):e.jsxs("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:[e.jsx("span",{className:"text-xs",children:"Create"}),e.jsx(R,{className:"text-2xl"})]})})]})}),e.jsx(A,{state:$,setState:v,zindex:"z-[99]",children:e.jsxs("form",{className:"flex flex-col space-y-3",children:[e.jsx("h1",{className:"font-semibold",children:"Update Help & Support Tab"}),e.jsx(E,{width:"full",name:"title",title:"Tab Title",iscompulsory:"true",type:"text",value:V,onChange:t=>T(t.target.value),placeholder:"Enter Tab Name"}),e.jsx("button",{onClick:t=>{U||W(t)},type:"button",className:"flex justify-center items-center cursor-pointer rounded-md py-1 w-full bg-b3",children:U?e.jsx("img",{src:"/loader-bg.gif",className:"w-8"}):e.jsxs("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:[e.jsx("span",{className:"text-xs",children:"Update"}),e.jsx(R,{className:"text-2xl"})]})})]})}),e.jsxs(se,{children:[e.jsxs("div",{className:"flex items-center space-x-2 my-2 bg-white py-3 px-5 w-full",children:[e.jsx(G,{to:"/admin/create-help-support",className:"bg-b3 text-white text-xs px-3 rounded-2xl cursor-pointer py-2 font-bold",children:"Create Help & Support"}),e.jsx(ae,{onChange:t=>D(t.target.value),options:g}),e.jsxs("div",{className:"flex w-full justify-end space-x-3",children:[e.jsx("input",{value:N,onChange:t=>x(t.target.value),placeholder:"Search Help & Support",className:"text-xs px-2 outline-none border border-b3 rounded-md"}),e.jsx("button",{onClick:M,className:"border border-b3 text-b3 text-xs px-2 rounded-md cursor-pointer py-1",children:"Search"})]})]}),e.jsx("h3",{className:"font-semibold  mt-5 mb-2 text-center text-xl",children:"Help & Support Blogs"}),b?e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("img",{src:"/loader-bg.gif",className:"w-10 h-10"})}):(l==null?void 0:l.length)>0?e.jsxs(e.Fragment,{children:[e.jsx(ue,{setPage:a,getBlog:n,data:l}),e.jsx(le,{page:d,setPage:a,totalPages:C})]}):e.jsx("div",{className:"flex justify-center w-full h-full",children:e.jsx("img",{src:"/not-found.webp",className:"w-24 h-24"})}),e.jsx(he,{loadind:J,tabs:q,handleUpdate:X,setState:w,refresh:H})]})]})};export{je as default};
