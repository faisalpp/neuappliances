import{j as e,s as k,r as h,b as L,u as _,a as E,a1 as S,L as N,v as C,aH as F,$ as R,Q as q}from"./index-00bd5894.js";import{C as O,B as U,L as B}from"./LeftArrowSvg-e9c6cd40.js";import{T as c}from"./TextInput-0bbcf5f7.js";import{c as T,a as i}from"./index.esm-9c75b5b3.js";import"./CustomInput-6779813f.js";const D=()=>e.jsx(e.Fragment,{children:e.jsxs("svg",{width:"11",height:"10",viewBox:"0 0 11 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("g",{id:" caret-down","clip-path":"url(#clip0_444_24184)",children:e.jsx("path",{id:"Vector",d:"M0.332031 2.5H10.332L5.33203 7.5",fill:"#737373"})}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_444_24184",children:e.jsx("rect",{width:"10",height:"10",fill:"white",transform:"translate(0.332031)"})})})]})}),w=({label:r,id:a,Options:d})=>e.jsxs("div",{className:"relative",children:[e.jsx("select",{id:a,className:"w-full border border-b31 px-[11px] pt-[19px] pb-1 outline-none appearance-none rounded-lg text-sm text-b16 font-medium",children:d.map((t,p)=>e.jsx("option",{value:t.value,children:t.name}))}),e.jsx("label",{htmlFor:a,className:"absolute top-[5px] text-xs text-b25 left-[11px]",children:r}),e.jsx("div",{className:"absolute top-0 bottom-0 h-full flex items-center justify-end right-3",children:e.jsx("div",{className:"pl-3 py-[5px] border-l border-b31",children:e.jsx(D,{})})})]}),H="",g=k.create({baseURL:H,withCredentials:!0,headers:{"Content-Type":"application/json"}}),I=async r=>{let a;try{a=await g.post("/api/user/save-order-address",r)}catch(d){return d}return a},$="/api/user/refresh";g.interceptors.response.use(r=>r,async r=>{const a=r.config;if((r.response.status===401||r.response.status===500)&&a&&!a._isRetry){a._isRetry=!0;try{return await k.get($,{withCredentials:!0}),g.request(a)}catch(d){return d}}});const G=()=>{const r=[{name:"Canada",value:"canada"},{name:"China",value:"china"},{name:"Japan",value:"japan"},{name:"Pakistan",value:"pakistan"}],a=[{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"}];T().shape({email:i().required("Email is Required!"),firstName:i().nullable(),lastName:i().required("Last Name is Required!"),address:i().required("Address is Required!"),appartment:i().nullable(),city:i().required("City is Required!"),country:i().required("Country is Required!"),province:i().required("Province is Required!"),postalCode:i().required("Postal Code is Required!"),phone:i().required("Phone is Required!")});const d={userId:"",email:"",keepUpdates:!1,firstName:"",lastName:"",address:"",appartment:"",city:"",country:"canada",province:"alberta",postalCode:"",phone:"",saveAddress:!1},[t,p]=h.useState(d),[s,Q]=h.useState([]),[b,m]=h.useState(!1),f=L(l=>l.user._id),j=_(),v=E(),A=S();h.useEffect(()=>{p(l=>({...l,userId:f}))},[f]);const n=l=>{const{name:o,value:u}=l.target;p(x=>({...x,[o]:u}))},y=l=>{const{name:o,checked:u}=l.target;p(x=>({...x,[o]:u}))},P=async l=>{l.preventDefault(),console.log(l),m(!0);const o=await I(t);if(console.log(o),o.status===200)m(!1),j("/mycart/shipping");else if(o.code==="ERR_BAD_REQUEST"){m(!1),v(R()),q.error("Please Login To Proceed!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"});const u=A.pathname;v(R()),j(`/login/?callback=${u}`)}else m(!1),q.error(o.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})};return e.jsx(e.Fragment,{children:e.jsxs(O,{children:[e.jsx(N,{to:"/",children:e.jsx("img",{src:"/login_logo.webp",alt:""})}),e.jsx(U,{}),e.jsxs("fieldset",{className:"border border-b31 rounded-md pb-5 px-5 pt-2",children:[e.jsx("legend",{className:"mx-auto text-b16 font-medium text-sm px-3",children:"Express checkout"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("button",{className:"rounded text-white flex justify-center p-3 bg-[#5A31F4]",children:e.jsx("img",{src:"/payment/shoppay.webp",alt:"shoppay",className:"h-[23px] object-contain"})}),e.jsx("button",{className:"rounded text-white flex justify-center p-3 bg-[#113984]",children:e.jsx("img",{src:"/payment/paypal.webp",alt:"shoppay",className:"h-[23px] object-contain"})}),e.jsx("button",{className:"rounded text-white flex justify-center p-3 bg-black",children:e.jsx("img",{src:"/payment/pay.webp",alt:"shoppay",className:"h-[23px] object-contain"})})]})]}),e.jsx("div",{className:"text_between_line my-8",children:"OR"}),e.jsxs("form",{onSubmit:P,children:[e.jsxs("div",{className:"space-y-14px [&>*]:text-b16 [&>*]:text-sm",children:[e.jsx("h3",{className:"text-sm font-medium text-b16",children:"Contact information"}),e.jsx(c,{name:"email",title:"",iscompulsory:"false",type:"text",value:t.email,onChange:n,error:!!(s.length>0&&s.includes("Email is Required!")),errormessage:"Email is Required!",placeholder:"Email"}),e.jsx(C.Checkbox,{name:"keepUpdates",onChange:y,id:"keep-me-update",label:"Keep me up to date on news and exclusive offers",className:"checked:bg-black border-b31",ripple:!1})]}),e.jsxs("div",{className:"space-y-14px mt-8",children:[e.jsx("h3",{className:"text-lg font-medium text-b16",children:"Shipping address"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(c,{name:"firstName",title:"",iscompulsory:"false",type:"text",value:t.firstName,onChange:n,error:!!(s.length>0&&s.includes("First Name is Required!")),errormessage:"First Name is Required!",placeholder:"First Name (optional)"}),e.jsx(c,{name:"lastName",title:"",iscompulsory:"false",type:"text",value:t.lastName,onChange:n,error:!!(s.length>0&&s.includes("Last Name is Required!")),errormessage:"Last Name is Required!",placeholder:"Last Name"}),e.jsxs("div",{className:"col-span-2 space-y-3",children:[e.jsx(c,{name:"address",title:"",iscompulsory:"false",type:"text",value:t.address,onChange:n,error:!!(s.length>0&&s.includes("Address is Required!")),errormessage:"Address is Required!",placeholder:"Address"}),e.jsx(c,{name:"appartment",title:"",iscompulsory:"false",type:"text",value:t.appartment,onChange:n,error:!!(s.length>0&&s.includes("Apartment, suite is Required!")),errormessage:"Apartment, suite is Required!",placeholder:"Apartment, suite, etc. (optional)"}),e.jsx(c,{name:"city",title:"",iscompulsory:"false",type:"text",value:t.city,onChange:n,error:!!(s.length>0&&s.includes("City is Required!")),errormessage:"City is Required!",placeholder:"City"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-14px",children:[e.jsx(w,{id:"country_region",label:"Country / region",Options:r}),e.jsx(w,{id:"province",label:"Province",Options:a}),e.jsx("div",{className:"col-span-2 md:col-span-1 [&>*]:h-full",children:e.jsx(c,{name:"postalCode",title:"",iscompulsory:"false",type:"text",value:t.postalCode,onChange:n,error:!!(s.length>0&&s.includes("Postal Code is Required!")),errormessage:"Postal Code is Required!",placeholder:"Postal Code"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(c,{name:"phone",title:"",iscompulsory:"false",type:"text",value:t.phone,onChange:n,error:!!(s.length>0&&s.includes("Phone is Required!")),errormessage:"Phone is Required!",placeholder:"Phone"}),e.jsx("div",{className:"absolute right-3 top-3",children:e.jsx(F,{className:"text-2xl text-b3"})})]}),e.jsx("div",{className:"[&>*]:text-b16 [&>*]:text-sm",children:e.jsx(C.Checkbox,{id:"save-information",name:"saveAddress",onChange:y,label:"Save this information for next time",className:"checked:bg-black border-b31",ripple:!1})})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center w-full mt-5",children:[e.jsxs(N,{to:"/mycart",className:"flex gap-1 items-center",children:[e.jsx(B,{}),e.jsx("span",{className:"text-sm font-medium text-b3",children:"Return to Cart"})]}),e.jsxs("button",{type:"submit",disabled:!!b,className:"flex items-center py-3 px-6 text-xs rounded-lg bg-b3 text-white",children:["Continue to Shipping ",b?e.jsx("img",{src:"/loader-bg.gif",className:"ml-2 w-4 h-4"}):null]})]})]})]})})};export{G as default};
