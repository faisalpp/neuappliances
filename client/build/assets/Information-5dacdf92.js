import{r as a,Y as le,Z as ie,j as t,$ as ne,f as h,u as oe,e as ce,L as Q,T as V,a0 as ue,z as Y}from"./index-8f0b06cf.js";import{v as de}from"./MainLayout-15ec4b43.js";import{r as W,al as me,H as pe}from"./ScrollToTop-0e31c04b.js";import{C as he,B as xe,L as fe}from"./LeftArrowSvg-6e7d380e.js";import{C as X}from"./CustomSelect-0865932a.js";import{T as d}from"./TextInput-74dd367a.js";import{c as ge,a as i}from"./index.esm-0c6a8e0d.js";import"./index.esm-3fd02e0d.js";import"./index-2d961a36.js";import"./CustomInput-0297ce22.js";const ye=()=>{const[g,v]=a.useState(null),x=le(),y=ie(),c=async()=>{if(!x||!y){console.log("Stripe or elements not found");return}const m=x.paymentRequest({country:"US",currency:"usd",total:{label:"Neuappliance Outlet Online Purchase Payment",amount:200},requestPayerName:!0,requestPayerEmail:!0});console.log(m),await m.canMakePayment()&&v(m)};return a.useEffect(()=>{c()},[x,y]),t.jsxs("fieldset",{className:"border border-b31 rounded-md pb-5 px-5 pt-2",children:[t.jsx("legend",{className:"mx-auto text-b16 font-medium text-sm px-3",children:"Express checkout"}),t.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[t.jsx("button",{className:"rounded text-white flex justify-center p-3 bg-[#5A31F4]",children:t.jsx("img",{src:"/payment/shoppay.webp",alt:"shoppay",className:"h-[23px] object-contain"})}),t.jsx("button",{className:"rounded text-white flex justify-center p-3 bg-[#113984]",children:t.jsx("img",{src:"/payment/paypal.webp",alt:"shoppay",className:"h-[23px] object-contain"})}),g&&t.jsx(ne,{options:{paymentRequest:g}})]})]})},ke=()=>{const g=async()=>{const e=await me();console.log(e)};a.useEffect(()=>{g()},[]);const v=[{name:"USA",value:"usa"}],x=[{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"}],y=ge().shape({email:i().required("Email is Required!"),firstName:i().nullable(),lastName:i().required("Last Name is Required!"),address:i().required("Address is Required!"),appartment:i().nullable(),city:i().required("City is Required!"),country:i().required("Country is Required!"),province:i().required("Province is Required!"),postalCode:i().required("Postal Code is Required!"),phone:i().required("Phone is Required!")}),c=h(e=>e.cart.deliveryOrders),m=h(e=>e.cart.pickupOrders),s=h(e=>e.order.orderInfo),F=oe();(c==null?void 0:c.length)===0&&(m==null?void 0:m.length)===0&&F("/mycart");const p=h(e=>e.cart.deliveryInfo),[U,j]=a.useState(""),[O,N]=a.useState(!1),[Z,C]=a.useState(""),[z,q]=a.useState(""),[T,S]=a.useState(""),[B,R]=a.useState(""),[D,w]=a.useState(""),[I,A]=a.useState("usa"),[M,k]=a.useState("alberta"),[n,b]=a.useState(""),[$,P]=a.useState(""),[E,L]=a.useState(!1),G=h(e=>e.user.auth),ee=()=>{const e=JSON.parse(localStorage.getItem("neu_customer_address"));!G&&e?(j(e.email),N(e.keepUpdates),C(e.firstName),q(e.lastName),S(e.address),R(e.appartment),w(e.city),A(e.country),k(e.province),b(e.postalCode),P(e.phone),L(e.saveAddress)):s!=null&&s.email?(j(s==null?void 0:s.email),N(!0),C(s==null?void 0:s.firstName),q(s==null?void 0:s.lastName),S(s==null?void 0:s.address),R(s==null?void 0:s.appartment),w(s==null?void 0:s.city),A(s==null?void 0:s.country),k(s==null?void 0:s.province),b(s==null?void 0:s.postalCode),P(s==null?void 0:s.phone),L(!0)):b(p.location)};a.useEffect(()=>{ee()},[]);const[r,J]=a.useState([]),_=ce(),K=e=>{const{name:o,checked:u}=e.target;o==="keepUpdates"&&N(u),o==="saveAddress"&&L(u)},te=async e=>{if(e.preventDefault(),!(p!=null&&p.shipping)){V("Shipping Not Available!","error",1e3);return}const o={email:U,firstName:Z,lastName:z,address:T,appartment:B,city:D,country:I,state:M,postalCode:n,phone:$,saveAddress:E,keepUpdates:O,province:M};E&&(G||localStorage.setItem("neu_customer_address",JSON.stringify(o)));try{await y.validate(o,{abortEarly:!1}),_(ue(o)),F("/mycart/shipping")}catch(u){if(u){let l=u.errors;J(l),l.forEach(re=>{V(re,"error",1e3)})}else J([])}},[se,f]=a.useState(!1),H=h(e=>e.cart.cartId),ae=async()=>{var o,u;f(!0);const e=await pe({zip:n});if(e.status==200){const l=await _(Y({cartId:H,deliveryInfo:{...p,location:n,shipping:e.data.zip.location.rate}}));(o=l==null?void 0:l.payload)==null||o.status,f(!1)}else{const l=_(Y({cartId:H,deliveryInfo:{...p,location:n,shipping:!1}}));(u=l==null?void 0:l.payload)==null||u.status,f(!1)}};return a.useEffect(()=>{(n==null?void 0:n.length)===5&&(c==null?void 0:c.length)>0&&ae()},[n]),t.jsx(t.Fragment,{children:t.jsxs(he,{children:[t.jsx(Q,{to:"/",children:t.jsx("img",{src:"/login_logo.webp",alt:""})}),t.jsx(xe,{}),t.jsx(ye,{}),t.jsx("div",{className:"text_between_line my-8",children:"OR"}),t.jsxs("form",{onSubmit:te,children:[t.jsxs("div",{className:"space-y-14px [&>*]:text-b16 [&>*]:text-sm",children:[t.jsx("h3",{className:"text-sm font-medium text-b16",children:"Contact information"}),t.jsx(d,{width:"full",name:"Email",title:"Email",iscompulsory:"false",type:"text",value:U,onChange:e=>j(e.target.value),error:!!(r&&r.includes("Email is Required!")),errormessage:"Email is Required!",placeholder:"abc@gmail.com"}),t.jsx(W.Checkbox,{onChange:e=>K(e),checked:O,defaultChecked:!1,name:"keepUpdates",id:"keep-me-update",label:"Keep me up to date on news and exclusive offers",className:"checked:bg-black border-b31",ripple:!1})]}),t.jsxs("div",{className:"space-y-14px mt-8",children:[t.jsx("h3",{className:"text-lg font-medium text-b16",children:"Shipping address"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx(d,{width:"full",name:"firstName",title:"",iscompulsory:"false",type:"text",value:Z,onChange:e=>C(e.target.value),error:!!(r&&r.includes("First Name is Required!")),errormessage:"First Name is Required!",placeholder:"First Name (optional)"}),t.jsx(d,{width:"full",name:"lastName",title:"",iscompulsory:"false",type:"text",value:z,onChange:e=>q(e.target.value),error:!!(r&&r.includes("Last Name is Required!")),errormessage:"Last Name is Required!",placeholder:"Last Name"}),t.jsxs("div",{className:"col-span-2 space-y-3",children:[t.jsx(d,{width:"full",name:"address",title:"",iscompulsory:"false",type:"text",value:T,onChange:e=>S(e.target.value),error:!!(r&&r.includes("Address is Required!")),errormessage:"Address is Required!",placeholder:"Address"}),t.jsx(d,{width:"full",name:"appartment",title:"",iscompulsory:"false",type:"text",value:B,onChange:e=>R(e.target.value),error:!!(r&&r.includes("Apartment, suite is Required!")),errormessage:"Apartment, suite is Required!",placeholder:"Apartment, suite, etc. (optional)"}),t.jsx(d,{width:"full",name:"city",title:"",iscompulsory:"false",type:"text",value:D,onChange:e=>w(e.target.value),error:!!(r&&r.includes("City is Required!")),errormessage:"City is Required!",placeholder:"City"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-14px",children:[t.jsx(X,{setState:A,id:"country_region",label:"Country / region",Options:v}),t.jsx(X,{setState:k,id:"province",label:"Province",Options:x}),t.jsxs("div",{className:"relative  col-span-2 md:col-span-1 [&>*]:h-full",children:[se?t.jsx("div",{className:"absolute z-40 flex rounded-lg items-center w-full justify-end px-2",children:t.jsx("img",{src:"/loader-bg.gif",className:"w-4 h-4"})}):null,t.jsx(d,{width:"full",name:"postalCode",title:"",iscompulsory:"false",type:"text",value:n,onChange:e=>b(e.target.value),error:!!(r&&r.includes("Postal Code is Required!")),errormessage:"Postal Code is Required!",placeholder:"Postal Code"})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx(d,{width:"full",name:"phone",title:"",iscompulsory:"false",type:"text",value:$,onChange:e=>P(e.target.value),error:!!(r&&r.includes("Phone is Required!")),errormessage:"Phone is Required!",placeholder:"Phone"}),t.jsx("div",{className:"absolute right-3 top-3",children:t.jsx(de,{className:"text-2xl text-b3"})})]}),t.jsx("div",{className:"[&>*]:text-b16 [&>*]:text-sm",children:t.jsx(W.Checkbox,{onChange:e=>K(e),id:"save-information",name:"saveAddress",checked:E,defaultChecked:!1,label:"Save this information for next time",className:"checked:bg-black border-b31",ripple:!1})})]})]})]}),t.jsxs("div",{className:"flex justify-between items-center w-full mt-5",children:[t.jsxs(Q,{to:"/mycart",className:"flex gap-1 items-center",children:[t.jsx(fe,{}),t.jsx("span",{className:"text-sm font-medium text-b3",children:"Return to Cart"})]}),t.jsx("button",{type:"submit",className:"flex items-center py-3 px-6 text-xs rounded-lg bg-b3 text-white",children:"Continue to Shipping"})]})]})]})})};export{ke as default};
