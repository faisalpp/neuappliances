import{p as R,q as w,V as q,u as S,a5 as x,r,j as e,M as E,av as p,v as N,f as k,ax as C,w as n,ay as T}from"./index-a2ecda28.js";const L=R().shape({password:w().required("Password is Required!"),confirmPassword:w().required("Confirm Password is Required!")}),B=()=>{const c=q(),t=S(),u=x(s=>s.admin.auth),h=x(s=>s.user.auth);if(!u&&!h)return;t(u?"/admin/dashboard":"/my-account/profile");const[l,g]=r.useState(""),[d,y]=r.useState(""),[o,m]=r.useState([]),[P,i]=r.useState(!1),j=async()=>{const s=await C({token:c.token});s.status===500&&(t("/forgot-password"),n(s.data.message,"error",1e3))};r.useEffect(()=>{j()});const b=async s=>{s.preventDefault(),i(!0);try{await L.validate({password:l,confirmPassword:d},{abortEarly:!1});const a=await T({token:c.token,password:l,confirmPassword:d});a.status===200?(i(!1),n(a.data.msg,"success",1e3),t("/login")):(i(!1),n(a.data.msg,"error",1e3))}catch(a){if(i(!1),a){let f=a.errors;m(f),f.forEach(v=>{n(v,"error",1e3)})}else m([])}};return e.jsx(e.Fragment,{children:e.jsx(E,{children:e.jsxs("div",{className:"flex flex-col space-y-10 items-center pt-20 py-32 w-full",children:[e.jsx("div",{children:e.jsx("img",{src:"/login_logo.webp"})}),e.jsxs("form",{onSubmit:b,className:"flex flex-col space-y-5 w-5/12 px-10 py-10 rounded-2xl bg-white border-[1px] border-gray-200",children:[e.jsx("h4",{className:"text-xl font-bold",children:"Reset Password"}),e.jsx(p,{width:"full",name:"password",title:"Password",type:"password",value:l,onChange:s=>g(s.target.value),error:!!(o&&o.includes("Email is Required!")),errormessage:"Email is Required!",placeholder:"******"}),e.jsx(p,{width:"full",name:"confirmPassword",title:"Re-Type Password",type:"password",value:d,onChange:s=>y(s.target.value),error:!!(o&&o.includes("Confirm Password is Required!")),errormessage:"Confirm Password is Required!",placeholder:"******"}),e.jsx("button",{className:"flex justify-center items-center cursor-pointer rounded-md py-1 w-full bg-b3",children:P?e.jsx(N,{style:"w-7"}):e.jsxs("span",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:[e.jsx("span",{className:"text-xs",children:"Submit"}),e.jsx(k,{className:"text-2xl"})]})})]})]})})})};export{B as default};
