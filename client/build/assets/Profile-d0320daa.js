import{i as S,j as e,u as N,e as P,f as O,r as s,k as j,m as w,Q as b}from"./index-6f024e59.js";import{M as F}from"./MyAccount-e67fd79a.js";import{C as n}from"./CustomInput-f1aad8bf.js";import{C as k}from"./CustomButton-b6c8d69e.js";import{c as B}from"./countries-5d447428.js";import{i as E}from"./ScrollToTop-c496a034.js";/* empty css                      */import"./MainLayout-7db25bd6.js";import"./index.esm-07b601df.js";import"./index-38501678.js";const L=async i=>{let a;try{a=await S.post("/api/user/get-profile",i)}catch(r){return r}return a},K=()=>e.jsx(e.Fragment,{children:e.jsx(F,{children:e.jsx(D,{})})}),D=()=>{const i=N(),a=P(),r=O(t=>t.user._id),[d,l]=s.useState(""),[h,u]=s.useState(""),[f,c]=s.useState("yourusername@email.com"),[g,p]=s.useState("+1 000-000-0000"),[o,m]=s.useState(""),[C,U]=s.useState(B),v=async()=>{const t=await L({_id:r});t.status===200?(l(t.data.user.firstName),u(t.data.user.lastName),c(t.data.user.email),p(t.data.user.phone),m(t.data.user.country)):(a(w()),i("/"))},y=async t=>{t.preventDefault();const x=await(await fetch("http://localhost:5000/api/user/update-profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:r,firstName:d,lastName:h,email:f,country:o,phone:g}),credentials:"include"})).json();x.status===200?b.success("Profile Updated!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}):b.error(x.message,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})};return s.useEffect(()=>{v()},[l,u,c,p,m]),e.jsxs(e.Fragment,{children:[e.jsx(j,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"}),e.jsxs("form",{onSubmit:y,className:"flex flex-col gap-6 lg:max-w-[432px] w-full",children:[e.jsx(n,{label:"First name",state:d,setState:l}),e.jsx(n,{label:"Last name",state:h,setState:u}),e.jsx(n,{label:"Email Address",type:"email",state:f,setState:c}),e.jsxs("div",{children:[e.jsx("label",{className:"text-b16 font-semibold text-xs block mb-2",children:"Country"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:o,onChange:t=>m(t.target.value),className:"border border-[rgba(0,0,0,0.16)] rounded-lg h-10 text-sm px-4 w-full outline-none appearance-none",children:[e.jsx("option",{value:o,default:!0,children:o}),C.map(t=>e.jsx("option",{children:t}))]}),e.jsx(E,{className:"absolute right-4 top-3"})]})]}),e.jsx(n,{label:"Phone",state:g,setState:p}),e.jsx(k,{ButtonName:"Save Changes"})]}),e.jsx(j,{})]})};export{D as ProfileData,K as default};
