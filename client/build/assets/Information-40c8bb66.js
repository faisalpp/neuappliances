import{r as a,a3 as p,u as re,a2 as ne,j as s,L as M,by as d,n as T,bG as ce,bH as oe,z as $,bI as de,ah as ue,bJ as H}from"./index-19898fbb.js";import{C as me,B as pe,L as he}from"./LeftArrowSvg-661cc38f.js";import{C as Q}from"./CustomSelect-0b030065.js";import{c as xe,a as r}from"./index.esm-1fbe94c9.js";import"./CustomInput-834e97b9.js";const Ne=()=>{const V=async()=>{const e=await oe();console.log(e)};a.useEffect(()=>{V()},[]);const W=[{name:"USA",value:"usa"}],X=[{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"}],Y=xe().shape({email:r().required("Email is Required!"),firstName:r().nullable(),lastName:r().required("Last Name is Required!"),address:r().required("Address is Required!"),appartment:r().nullable(),city:r().required("City is Required!"),country:r().required("Country is Required!"),province:r().required("Province is Required!"),postalCode:r().required("Postal Code is Required!"),phone:r().required("Phone is Required!")}),u=p(e=>e.cart.deliveryOrders),g=p(e=>e.cart.pickupOrders),t=p(e=>e.order.orderInfo),E=re();(u==null?void 0:u.length)===0&&(g==null?void 0:g.length)===0&&E("/mycart");const m=p(e=>e.cart.deliveryInfo),[P,f]=a.useState(""),[L,b]=a.useState(!1),[_,y]=a.useState(""),[F,v]=a.useState(""),[U,j]=a.useState(""),[z,N]=a.useState(""),[O,C]=a.useState(""),[I,S]=a.useState("usa"),[ee,q]=a.useState("alberta"),[n,x]=a.useState(""),[Z,w]=a.useState(""),[R,A]=a.useState(!1),D=p(e=>e.user.auth),se=()=>{const e=JSON.parse(localStorage.getItem("neu_customer_address"));!D&&e?(f(e.email),b(e.keepUpdates),y(e.firstName),v(e.lastName),j(e.address),N(e.appartment),C(e.city),S(e.country),q(e.province),x(e.postalCode),w(e.phone),A(e.saveAddress)):t!=null&&t.email?(f(t==null?void 0:t.email),b(!0),y(t==null?void 0:t.firstName),v(t==null?void 0:t.lastName),j(t==null?void 0:t.address),N(t==null?void 0:t.appartment),C(t==null?void 0:t.city),S(t==null?void 0:t.country),q(t==null?void 0:t.province),x(t==null?void 0:t.postalCode),w(t==null?void 0:t.phone),A(!0)):x(m.location)};a.useEffect(()=>{se()},[]);const[i,G]=a.useState([]),[J,ge]=a.useState(!1),k=ne(),B=e=>{const{name:c,checked:o}=e.target;c==="keepUpdates"&&b(o),c==="saveAddress"&&A(o)},te=async e=>{if(e.preventDefault(),(m==null?void 0:m.shipping)==="No Shipping Available!"){$("Shipping Not Available!","error",1e3);return}const c={email:P,firstName:_,lastName:F,address:U,appartment:z,city:O,country:I,postalCode:n,phone:Z,saveAddress:R,keepUpdates:L,province:ee};R&&(D||localStorage.setItem("neu_customer_address",JSON.stringify(c)));try{await Y.validate(c,{abortEarly:!1}),k(de(c)),E("/mycart/shipping")}catch(o){if(o){let l=o.errors;G(l),l.forEach(le=>{$(le,"error",1e3)})}else G([])}},[ae,h]=a.useState(!1),K=p(e=>e.cart.cartId),ie=async()=>{var c,o;h(!0);const e=await ue({zip:n});if(e.status==200){const l=await k(H({cartId:K,deliveryInfo:{...m,location:n,shipping:e.data.zip.location.rate}}));(c=l==null?void 0:l.payload)==null||c.status,h(!1)}else{const l=k(H({cartId:K,deliveryInfo:{...m,location:n,shipping:!1}}));(o=l==null?void 0:l.payload)==null||o.status,h(!1)}};return a.useEffect(()=>{(n==null?void 0:n.length)===5&&(u==null?void 0:u.length)>0&&ie()},[n]),s.jsx(s.Fragment,{children:s.jsxs(me,{children:[s.jsx(M,{to:"/",children:s.jsx("img",{src:"/login_logo.webp",alt:""})}),s.jsx(pe,{}),s.jsxs("fieldset",{className:"border border-b31 rounded-md pb-5 px-5 pt-2",children:[s.jsx("legend",{className:"mx-auto text-b16 font-medium text-sm px-3",children:"Express checkout"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsx("button",{className:"rounded text-white flex justify-center p-3 bg-[#5A31F4]",children:s.jsx("img",{src:"/payment/shoppay.webp",alt:"shoppay",className:"h-[23px] object-contain"})}),s.jsx("button",{className:"rounded text-white flex justify-center p-3 bg-[#113984]",children:s.jsx("img",{src:"/payment/paypal.webp",alt:"shoppay",className:"h-[23px] object-contain"})}),s.jsx("button",{className:"rounded text-white flex justify-center p-3 bg-black",children:s.jsx("img",{src:"/payment/pay.webp",alt:"shoppay",className:"h-[23px] object-contain"})})]})]}),s.jsx("div",{className:"text_between_line my-8",children:"OR"}),s.jsxs("form",{onSubmit:te,children:[s.jsxs("div",{className:"space-y-14px [&>*]:text-b16 [&>*]:text-sm",children:[s.jsx("h3",{className:"text-sm font-medium text-b16",children:"Contact information"}),s.jsx(d,{width:"full",name:"Email",title:"Email",iscompulsory:"false",type:"text",value:P,onChange:e=>f(e.target.value),error:!!(i&&i.includes("Email is Required!")),errormessage:"Email is Required!",placeholder:"abc@gmail.com"}),s.jsx(T.Checkbox,{onChange:e=>B(e),checked:L,defaultChecked:!1,name:"keepUpdates",id:"keep-me-update",label:"Keep me up to date on news and exclusive offers",className:"checked:bg-black border-b31",ripple:!1})]}),s.jsxs("div",{className:"space-y-14px mt-8",children:[s.jsx("h3",{className:"text-lg font-medium text-b16",children:"Shipping address"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx(d,{width:"full",name:"firstName",title:"",iscompulsory:"false",type:"text",value:_,onChange:e=>y(e.target.value),error:!!(i&&i.includes("First Name is Required!")),errormessage:"First Name is Required!",placeholder:"First Name (optional)"}),s.jsx(d,{width:"full",name:"lastName",title:"",iscompulsory:"false",type:"text",value:F,onChange:e=>v(e.target.value),error:!!(i&&i.includes("Last Name is Required!")),errormessage:"Last Name is Required!",placeholder:"Last Name"}),s.jsxs("div",{className:"col-span-2 space-y-3",children:[s.jsx(d,{width:"full",name:"address",title:"",iscompulsory:"false",type:"text",value:U,onChange:e=>j(e.target.value),error:!!(i&&i.includes("Address is Required!")),errormessage:"Address is Required!",placeholder:"Address"}),s.jsx(d,{width:"full",name:"appartment",title:"",iscompulsory:"false",type:"text",value:z,onChange:e=>N(e.target.value),error:!!(i&&i.includes("Apartment, suite is Required!")),errormessage:"Apartment, suite is Required!",placeholder:"Apartment, suite, etc. (optional)"}),s.jsx(d,{width:"full",name:"city",title:"",iscompulsory:"false",type:"text",value:O,onChange:e=>C(e.target.value),error:!!(i&&i.includes("City is Required!")),errormessage:"City is Required!",placeholder:"City"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-14px",children:[s.jsx(Q,{setState:S,id:"country_region",label:"Country / region",Options:W}),s.jsx(Q,{setState:q,id:"province",label:"Province",Options:X}),s.jsxs("div",{className:"relative  col-span-2 md:col-span-1 [&>*]:h-full",children:[ae?s.jsx("div",{className:"absolute z-40 flex rounded-lg items-center w-full justify-end px-2",children:s.jsx("img",{src:"/loader-bg.gif",className:"w-4 h-4"})}):null,s.jsx(d,{width:"full",name:"postalCode",title:"",iscompulsory:"false",type:"text",value:n,onChange:e=>x(e.target.value),error:!!(i&&i.includes("Postal Code is Required!")),errormessage:"Postal Code is Required!",placeholder:"Postal Code"})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(d,{width:"full",name:"phone",title:"",iscompulsory:"false",type:"text",value:Z,onChange:e=>w(e.target.value),error:!!(i&&i.includes("Phone is Required!")),errormessage:"Phone is Required!",placeholder:"Phone"}),s.jsx("div",{className:"absolute right-3 top-3",children:s.jsx(ce,{className:"text-2xl text-b3"})})]}),s.jsx("div",{className:"[&>*]:text-b16 [&>*]:text-sm",children:s.jsx(T.Checkbox,{onChange:e=>B(e),id:"save-information",name:"saveAddress",checked:R,defaultChecked:!1,label:"Save this information for next time",className:"checked:bg-black border-b31",ripple:!1})})]})]})]}),s.jsxs("div",{className:"flex justify-between items-center w-full mt-5",children:[s.jsxs(M,{to:"/mycart",className:"flex gap-1 items-center",children:[s.jsx(he,{}),s.jsx("span",{className:"text-sm font-medium text-b3",children:"Return to Cart"})]}),s.jsxs("button",{type:"submit",disabled:!!J,className:"flex items-center py-3 px-6 text-xs rounded-lg bg-b3 text-white",children:["Continue to Shipping ",J?s.jsx("img",{src:"/loader-bg.gif",className:"ml-2 w-4 h-4"}):null]})]})]})]})})};export{Ne as default};
