import{r as l,j as e,be as S,N as g,bn as D,bi as P,bj as O,bo as I,bp as n}from"./index-fce464d2.js";import{a as k,u as B,d as E}from"./category-5bc9538c.js";import{D as A,C as H,P as L}from"./react-beautiful-dnd.esm-87661644.js";const R=()=>{const[i,d]=l.useState([]),[m,c]=l.useState(!1),[h,f]=l.useState(""),x=async()=>{c(!0);const s=await k();console.log(s),s.status===200?(c(!1),d(s.data.categories)):(d([]),c(!1))};l.useEffect(()=>{x()},[]);const[b,u]=l.useState(!1),j=async()=>{u(!0);const s=await B(i);s.status===200?(u(!1),n.success(s.data.msg,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),x()):(u(!1),n.error(s.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}))},w=s=>s&&s.split("-").map(function(a){return a.charAt(0).toUpperCase()+a.slice(1)}).join(" "),N=s=>{const t=Array.from(i),[o]=t.splice(s.source.index,1);t.splice(s.destination.index,0,o);const r=t.map((a,y)=>({...a,index:y+1}));d(r)},[v,p]=l.useState(""),C=async(s,t)=>{s.preventDefault(),p(t);const r=await E({id:t});r.status===200?(p(!1),x(),n.success(r.data.msg,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})):(p(""),n.error(r.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}))};return e.jsx(e.Fragment,{children:e.jsxs(S,{children:[e.jsxs("div",{className:"flex items-center space-x-2 my-2 bg-white py-3 px-5 w-full",children:[e.jsx(g,{to:"/admin/create-category",className:"bg-b3 text-white text-xs px-3 rounded-2xl cursor-pointer py-2 font-bold",children:"CreateÂ Category"}),e.jsxs("div",{className:"flex w-full justify-end space-x-3",children:[e.jsx("input",{value:h,onChange:s=>f(s.target.value),placeholder:"Search Blog",className:"text-xs px-2 outline-none border border-b3 rounded-md"}),e.jsx("button",{className:"border border-b3 text-b3 text-xs px-2 rounded-md cursor-pointer py-1",children:"Search"})]})]}),m?e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("img",{src:"/loader-bg.gif",className:"w-10 h-10"})}):i.length>0?e.jsxs(A,{onDragEnd:N,className:"w-full h-full",children:[e.jsx(H,{droppableId:"categories",children:s=>e.jsxs("div",{...s.droppableProps,ref:s.innerRef,className:"grid  grid-cols-1 md:grid-cols-4 2xl:grid-cols-3 gap-2 xl:gap-5",children:[i.map((t,o)=>e.jsx(L,{draggableId:t._id,index:o,children:r=>e.jsx("div",{...r.draggableProps,...r.dragHandleProps,ref:r.innerRef,className:"populerbrands",children:e.jsxs("div",{className:"relative rounded-2xl border border-gray-300 p-3 h-fit w-fit flex flex-col justify-center items-center",children:[t.inMenu?e.jsx("span",{title:"In Navbar Menu",className:"cursor-help hover:shadow-lg absolute bg-b6/80 right-3 top-2 text-white px-1 py-1 rounded-full",children:e.jsx(D,{})}):null,e.jsx("img",{src:t.image,className:"max-w-full h-[133px] object-contain",alt:t.title}),e.jsxs("h3",{className:"font-semibold px-3 text-center text-xs",children:[w(t.title)," (",t.productCount,")"]}),e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsx(g,{to:`/admin/update-category/${t._id}`,title:"Edit Category",className:"flex items-center justify-center bg-b3 text-white hover:bg-white hover:text-b3 border-2 border-white hover:border-b3 text-sm px-2 rounded-full cursor-pointer py-2",children:e.jsx(P,{className:"text-base"})}),e.jsx("span",{onClick:a=>C(a,t._id),title:"Delete Category",className:"flex items-center justify-center bg-red-500/30 text-red-500 hover:bg-white hover:text-red-500 border-2 border-white hover:border-red-500 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:v===t._id?e.jsx("img",{src:"/loader-bg.gif",className:"w-4 h-4"}):e.jsx(O,{className:"text-base"})}),e.jsxs(g,{to:`/admin/manage-category-sections/${t.slug}`,title:"View Sections",className:"flex items-center justify-center bg-b7/30 text-b7 hover:bg-white hover:b7 border-2 border-white hover:border-b7 text-sm px-[7px] w-fit rounded-full cursor-pointer py-1",children:[" ",e.jsx(I,{className:"text-lg"})]})]})]})})},t._id)),s.placeholder]})}),e.jsx("div",{className:"flex justify-end w-full mt-5",children:e.jsx("button",{type:"button",onClick:j,className:"flex justify-center items-center cursor-pointer rounded-md py-1 w-fit bg-b3",children:b?e.jsx("img",{src:"/loader-bg.gif",className:"w-8"}):e.jsx("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:e.jsx("span",{className:"text-xs",children:"Save"})})})})]}):e.jsx("div",{className:"flex justify-center w-full h-full",children:e.jsx("img",{src:"/not-found.webp",className:"w-36 h-36"})})]})})};export{R as default};
