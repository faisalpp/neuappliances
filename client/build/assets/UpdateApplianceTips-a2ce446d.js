import{d as P,r as a,j as e,Q as C}from"./index-9086772f.js";import{A as U}from"./AdminAccount-c0a1c178.js";import{a as v}from"./index.esm-d1123c14.js";/* empty css                      */import{H as z}from"./admin-aebeea57.js";import{G as L}from"./category-f816177a.js";import{X as Q}from"./ScrollToTop-9454a300.js";import{B as V}from"./BlogEditor-a35ec26e.js";import{T as B}from"./TextInput-6ff12c7c.js";import{S as X}from"./SelectInput-abd85457.js";import{c as _,a as i}from"./index.esm-667a8c3e.js";import"./MainLayout-9f08b4ec.js";import"./index-57df3b0a.js";import"./index-da41181b.js";const ce=()=>{const N=_().shape({id:i().required("Id is required"),title:i().required("Title is required"),slug:i().required("Slug is required"),thumbnail:i().nullable(!0),tempImg:i().nullable(!0),category:i().required("Blog Category is required"),content:i().required("Blog Content is required")}),T=P(),[c,b]=a.useState([]),[q,E]=a.useState([]),y=a.useRef(),[I,u]=a.useState(!1),[j,D]=a.useState(),[m,d]=a.useState(""),[g,p]=a.useState(""),[l,f]=a.useState(""),[S,$]=a.useState(""),[o,w]=a.useState(""),[x,h]=a.useState(""),[k,J]=a.useState(),A=async()=>{const s={slug:T.slug},t=await Q(s);D(t.data.blog[0]._id),d(t.data.blog[0].title),p(t.data.blog[0].slug),h(t.data.blog[0].content),w(t.data.blog[0].category),f(t.data.blog[0].thumbnail)};a.useEffect(()=>{A()},[]);const O=async s=>{s.preventDefault(),u(!0);try{const t={id:j,title:m,slug:g,thumbnail:l,tempImg:S,isDuplicate:k,category:o,content:x},r=new FormData;r.set("id",j),r.set("title",m),r.set("slug",g),r.set("thumbnail",l),r.set("tempImg",S),r.set("category",o),r.set("content",x),await N.validate(t,{abortEarly:!1});const n=await z(r);n.status===200?(u(!1),C.success(n.data.msg,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),d(""),p(""),h("")):(u(!1),C.error(n.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}))}catch(t){console.log(t),u(!1),b(t?t.errors:[])}};a.useEffect(()=>{G()},[]);const G=async()=>{const s=await L();if(console.log(o),s.status===200){const t=s.data.categories.filter(H=>H.slug!==o),n=[{title:o[0].toUpperCase()+o.slice(1),slug:o},...t];E(n)}},R=s=>{s.preventDefault();const t=s.target.files[0];t?(f(t),$(l)):f(l)},F=()=>{y.current.click()};return e.jsx(e.Fragment,{children:e.jsx(U,{children:e.jsxs("form",{onSubmit:O,className:"flex flex-col space-y-5 w-full py-5 bg-white",children:[e.jsxs("div",{className:"flex w-full",children:[e.jsxs("div",{className:"flex flex-col space-y-10 w-1/2",children:[e.jsx(B,{width:"full",name:"title",title:"Blog Title",iscompulsory:"true",type:"text",value:m,onChange:s=>{d(s.target.value),p(s.target.value.toLowerCase().replace(/\s/g,"-").replace(/\./g,""))},error:!!(c&&c.includes("Title is required")),errormessage:"Title is required",placeholder:"Enter Blog Title"}),e.jsx(B,{width:"full",name:"slug",title:"Blog Slug",readOnly:!0,iscompulsory:"true",type:"text",value:g,error:!!(c&&c.includes("Slug is required")),errormessage:"Slug is required",placeholder:"Enter Blog Slug"})]}),e.jsxs("div",{className:"flex flex-col space-y-8 items-center w-1/2",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("img",{src:l!==""?`https://neu-appliance-outlet.s3.eu-north-1.amazonaws.com/${l}`:"/no-image.jfif",className:`self-center rounded-xl ${l?"h-28 w-36":"h-26 w-32"}`}),e.jsx("button",{onClick:F,type:"button",className:"flex justify-center items-center self-center cursor-pointer rounded-md py-1 w-fit bg-b3",children:e.jsxs("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:[e.jsx("span",{className:"text-xs",children:"Select Thumbnail"}),e.jsx(v,{className:"text-2xl"})]})}),e.jsx("input",{ref:y,name:"thumbnail",type:"file",className:"hidden",onChange:s=>R(s)})]}),e.jsx("div",{className:"flex justify-center space-x-5 w-full",children:e.jsx(X,{name:"categor",title:"Select Blog Category",iscompulsory:"true",onChange:s=>w(s.target.value),options:q})})]})]}),e.jsx(V,{state:x,setState:h}),e.jsx("button",{type:"submit",className:"flex justify-center items-center cursor-pointer rounded-md py-1 w-full bg-b3",children:I?e.jsx("img",{src:"/loader-bg.gif",className:"w-8"}):e.jsxs("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:[e.jsx("span",{className:"text-xs",children:"Create"}),e.jsx(v,{className:"text-2xl"})]})})]})})})};export{ce as default};
