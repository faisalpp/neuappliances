import{p as G,q as l,u as J,r as s,j as e,bo as P,av as m,bL as T,aV as W,bM as z,an as Q,f as U,w as f}from"./index-dd833a7c.js";import{B as X}from"./BlogEditor-100459f9.js";import{c as Y}from"./helpSupport-f64029a6.js";import{g as Z}from"./helpSupportTab-665b33f2.js";const re=()=>{const N=G().shape({title:l().required("Title is required"),slug:l().required("Slug is required"),shortDescription:l().required("Short Description is required"),category:l().required("Help Category is required"),content:l().required("Help Content is required"),metaTitle:l(),metaDescription:l(),metaKeywords:l()}),C=J(),[o,q]=s.useState([]),[D,u]=s.useState(!1),[H,E]=s.useState(""),[h,K]=s.useState(""),[a,d]=s.useState([]),[g,M]=s.useState(""),[y,A]=s.useState(""),[w,F]=s.useState(""),[R,S]=s.useState(""),[b,I]=s.useState(""),[n,j]=s.useState(""),p=s.useRef(),B=t=>{t.key===" "&&n.length>0&&((a==null?void 0:a.length)>0?d([...metaKeywords,n]):d([n]),setTimeout(()=>{j(""),p.current.focus(),p.current.setSelectionRange(0,0)},0))},L=(t,r)=>{t.preventDefault();const i=a.filter((x,c)=>c!==r);d(i)},O=async t=>{t.preventDefault(),u(!0);const r={title:g,slug:y,shortDescription:w,category:R,content:b,metaDescription:h,metaKeywords:JSON.stringify(a)};try{await N.validate(r,{abortEarly:!1})}catch(x){if(x){let c=x.errors;q(c),c.forEach(k=>{f(k,"error",1e3)})}}const i=await Y(r);i.status===200?(u(!1),C("/admin/manage-help-support"),f(i.data.msg,"success",1e3)):(u(!1),f(i.data.message,"error",1e3))},[V,v]=s.useState([]),$=async()=>{var r;const t=await Z();t.status===200?(v(t.data.helpTabs),S((r=t.data.helpTabs[0])==null?void 0:r.title.toLowerCase().replace(/\s/g,"-"))):v([])};return s.useEffect(()=>{$()},[]),e.jsx(e.Fragment,{children:e.jsx(P,{children:e.jsxs("form",{onSubmit:O,className:"flex flex-col space-y-5 w-full py-5 bg-white",children:[e.jsxs("div",{className:"flex w-full",children:[e.jsxs("div",{className:"flex flex-col space-y-10 w-1/2",children:[e.jsx(m,{width:"full",name:"title",title:"Help Title",iscompulsory:"true",type:"text",value:g,onChange:t=>{M(t.target.value),A(t.target.value.toLowerCase().replace(/\s/g,"-").replace(/\./g,""))},error:!!(o&&o.includes("Title is required")),errormessage:"Title is required",placeholder:"Enter Help Title"}),e.jsx(m,{width:"full",name:"slug",title:"Help Slug",readOnly:!0,iscompulsory:"true",type:"text",value:y,error:!!(o&&o.includes("Slug is required")),errormessage:"Slug is required",placeholder:"Enter Help Slug"})]}),e.jsxs("div",{className:"flex flex-col space-y-8 items-center w-1/2",children:[e.jsx("div",{className:"flex flex-col items-center space-x-5 w-72",children:e.jsx(T,{width:"full",name:"description",title:"Description",iscompulsory:"true",type:"text",value:w,onChange:t=>F(t.target.value),error:!!(o&&o.includes("Short Description is required")),errormessage:"Short Description is required",placeholder:"Enter Product Description"})}),e.jsx("div",{className:"flex flex-col items-center space-x-5 w-full",children:e.jsx(W,{name:"categor",title:"Select Tab",iscompulsory:"true",onChange:t=>S(t.target.value),options:V})})]})]}),e.jsx(X,{state:b,setState:I}),e.jsx(z,{title:"Help Seo",answer:e.jsxs("div",{className:"flex flex-col space-y-2 w-full",children:[e.jsx(m,{width:"full",name:"title",title:"Meta Title",type:"text",value:H,onChange:t=>E(t.target.value),placeholder:"Enter Meta Title"}),e.jsx(T,{width:"full",title:"Meta Description",value:h,onChange:t=>K(t.target.value),placeholder:"Write Meta Description Here.."}),e.jsx("h5",{className:"text-xs font-semibold",children:"Meta Keywords"}),e.jsx("div",{className:"flex flex-wrap w-full py-3 px-2 rounded-xl border-[1px] borders-[0,0,0,0,0.15]",children:e.jsxs("div",{className:"flex flex-wrap gap-y-2 items-center gap-x-2 w-full h-auto ",children:[a==null?void 0:a.map((t,r)=>e.jsxs("span",{className:"flex items-center bg-b6 text-sm px-2 py-1 text-white rounded-2xl",children:[t,e.jsx(Q,{onClick:i=>L(i,r),className:"text-white bg-red-500 ml-1 text-xs cursor-pointer rounded-full"})]},r)),e.jsx("div",{}),e.jsx("input",{ref:p,placeholder:"Hit Space To Insert",value:n,onKeyDown:t=>B(t),onChange:t=>j(t.target.value),className:"border-none outline-none mx-5 text-sm"})]})})]}),parent:"w-full [&>div]:py-4 [&>div]:px-6 [&>div]:border [&>div]:border-b33 [&>div]:rounded-xl h-auto border-0",icon:"text-xl",textStyle:"font-bold text-sm",child:"justify-center w-full [&>p]:text-sm !mt-0"}),e.jsx("button",{type:"submit",className:"flex justify-center items-center cursor-pointer rounded-md py-1 w-full bg-b3",children:D?e.jsx("img",{src:"/loader-bg.gif",className:"w-8"}):e.jsxs("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:[e.jsx("span",{className:"text-xs",children:"Create"}),e.jsx(U,{className:"text-2xl"})]})})]})})})};export{re as default};
