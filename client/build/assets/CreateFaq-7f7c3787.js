import{r,j as e,bh as V,bZ as I,aN as _,a1 as R,u as G,bv as k,bA as B,bB as Q,B as O,bd as L,bH as T,bE as Z,Q as i}from"./index-3a1d5092.js";import{a as z,A as J,B as K,C as M}from"./admin-39fabf3b.js";/* empty css                      */import{c as $,a as n}from"./index.esm-fd49ad57.js";const W=({DeleteFaq:q,setUpdatedFaqId:v,setUpdateQuestion:m,setUpdatedAnswer:F,setUpdatePopup:A,id:c,activeBg:h,activeText:d,title:f,textStyle:l,answer:u,parent:g,child:b,icon:j,isExpand:y})=>{const[a,p]=r.useState(!!y);return e.jsx(e.Fragment,{children:e.jsxs("div",{onClick:()=>{p(!a)},className:`duration-200 flex flex-col border-[1px] border-gray-200 cursor-pointer ${g} ${a?h:""}`,children:[e.jsxs("div",{className:"flex items-center justify-between w-full gap-1",children:[e.jsx("h6",{className:`${a?d:""} ${l}`,children:f}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{onClick:()=>{v(c),m(f),F(u),A(!0)},className:"p-1 bg-b6 hover:bg-white border-b3 border-2  rounded-full cursor-pointer group",children:e.jsx(V,{className:"text-white group-hover:text-b3 text-sm shadow-xl"})}),e.jsx("span",{onClick:x=>q(x,c),className:"p-1 bg-red-500 hover:bg-white border-red-500 border-2  rounded-full cursor-pointer group",children:e.jsx(I,{className:"text-red-300 group-hover:text-red-500 text-sm shadow-xl"})}),e.jsx(_,{className:`${j} ${a?`rotate-180 ${d}`:""} duration-200`})]})]}),e.jsx("div",{className:` ${a?`flex ${d}`:"hidden"} ${b} mt-1 duration-200`,children:e.jsx("p",{children:u})})]})})},te=()=>{const q=$().shape({question:n().required("Question is required"),answer:n().required("Answer is required"),slug:n().required("Slug is required")}),v=$().shape({question:n().required("Question is required"),answer:n().required("Answer is required"),_id:n().required("Slug is required")}),{slug:m}=R(),F=G(),[A,c]=r.useState([]),[h,d]=r.useState([]),[f,l]=r.useState(!1),[u,g]=r.useState(""),[b,j]=r.useState(""),[y,a]=r.useState(!1),[p,x]=r.useState(""),[S,N]=r.useState(""),[E,P]=r.useState(""),w=async()=>{const s=await z({slug:m});console.log(s),s.status===200&&d(s.data.faqs)};r.useEffect(()=>{w()},[]);const U=async s=>{s.preventDefault();try{const t={question:u,answer:b,slug:m};await q.validate(t,{abortEarly:!1});const o=await J(t);o.status===200?(l(!1),g(""),j(""),w(),i.success(o.msg,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})):(l(!1),i.error(o.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}))}catch(t){console.error("Validation errors:",t.errors),c(t.errors)}},H=async s=>{s.preventDefault();try{const t={question:p,answer:S,_id:E};await v.validate(t,{abortEarly:!1});const o=await K(t);o.status===200?(w(),x(""),N(""),P(""),a(!1),i.success(o.msg,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})):(a(!1),i.error(o.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}))}catch(t){console.error("Validation errors:",t.errors),c(t.errors)}},D=async(s,t)=>{s.preventDefault();try{const C=await M({_id:t});C.status===200?(w(),i.success(C.msg,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})):i.error(C.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(o){console.error("Validation errors:",o.errors)}};return e.jsxs(e.Fragment,{children:[e.jsx(k,{state:y,setState:a,children:e.jsxs("form",{className:"flex flex-col space-y-3 w-10/12",children:[e.jsx("h1",{className:"font-semibold",children:"Update FAQ"}),e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx(B,{width:"full",name:"question",title:"Faq Question",iscompulsory:"true",type:"text",value:p,onChange:s=>x(s.target.value),placeholder:"Enter Faq Question"}),e.jsx(Q,{name:"answer",title:"Faq Answer",iscompulsory:"true",type:"text",value:S,change:s=>N(s.target.value),placeholder:"Enter Faq Answer"}),e.jsx("button",{onClick:H,type:"submit",className:"flex justify-center items-center cursor-pointer rounded-md py-1 w-6/12 bg-b3",children:e.jsxs("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:[e.jsx("span",{className:"text-xs",children:"Update"}),e.jsx(O,{className:"text-2xl"})]})})]})]})}),e.jsx(k,{state:f,setState:l,children:e.jsxs("form",{className:"flex flex-col space-y-3 w-10/12",children:[e.jsx("h1",{className:"font-semibold",children:"Create FAQ"}),e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx(B,{width:"full",name:"question",title:"Faq Question",iscompulsory:"true",type:"text",value:u,onChange:s=>g(s.target.value),placeholder:"Enter Faq Question"}),e.jsx(Q,{name:"answer",title:"Faq Answer",iscompulsory:"true",type:"text",value:b,change:s=>j(s.target.value),placeholder:"Enter Faq Answer"}),e.jsx("button",{onClick:U,type:"submit",className:"flex justify-center items-center cursor-pointer rounded-md py-1 w-6/12 bg-b3",children:e.jsxs("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:[e.jsx("span",{className:"text-xs",children:"Create"}),e.jsx(O,{className:"text-2xl"})]})})]})]})}),e.jsxs(L,{children:[e.jsxs("div",{className:"flex w-full items-center space-x-3 mb-5",children:[e.jsx(T,{className:"text-2xl text-b3 cursor-pointer",onClick:()=>F(-1)}),e.jsx("div",{className:"flex w-full justify-end space-x-3",children:e.jsx(Z,{onClick:()=>l(!0),className:"text-b3 text-3xl shadow-xl rounded-full cursor-pointer"})})]}),e.jsx("div",{className:"flex flex-col justify-center space-y-3",children:h.length>0?h.map((s,t)=>e.jsx(W,{DeleteFaq:D,setUpdatedFaqId:P,setUpdatePopup:a,setUpdateQuestion:x,setUpdatedAnswer:N,id:s._id,title:s.question,parent:"gap-3 bg-[#F8FBFB] [&>div>h6]:maxmd:text-sm text-white p-4 md:px-8 md:py-6 rounded-xl border-none text-b18 h-auto",icon:"text-xl text-black",textStyle:"font-bold text-md text-b18",child:"[&>p]:text-sm text-b18 font-normal",answer:s.answer},t)):e.jsx("h1",{children:"No FAQ's Found!"})})]})]})};export{te as default};
