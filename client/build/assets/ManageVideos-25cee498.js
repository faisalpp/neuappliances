import{r as a,j as e,af as D,aV as p,av as y,f as O,bo as k,bO as H,bt as A,K as E,w as n}from"./index-fb6a0065.js";import{u as z,g as q,d as B}from"./videoMedia-656e7383.js";import{I as R}from"./Ifram-3bce5572.js";import"./index.esm-13a59451.js";const Q=()=>{const[S,o]=a.useState(!1),[i,b]=a.useState("upload"),[f,v]=a.useState("home-page-hero-section"),[g,h]=a.useState("home-page-hero-section"),[N,r]=a.useState(""),[j,P]=a.useState([]),[V,d]=a.useState(!1),M=async s=>{s.preventDefault(),d(!0);const l=new FormData;l.set("uploadMedia",N),l.set("section",f),l.set("type",i);const t=await z(l);t.status===200?(n(t.data.msg,"success",1e3),r(f),h(),m(),d(!1),o(!1)):(n(t.data.message,"error",1e3),d(!1),o(!1))},[c,F]=a.useState(1),[w,_]=a.useState(16),[C,I]=a.useState(0),[L,u]=a.useState(!1),m=async()=>{u(!0);const t=await q({page:c,limit:w},{section:g});t.status===200&&(P(t.data.media),I(Math.ceil(t.data.totalCount/w))),u(!1)};a.useEffect(()=>{m()},[g,c]);const[T,x]=a.useState(""),U=async(s,l)=>{s.preventDefault(),x(l);const t=await B({id:l});t.status===200?(n(t.data.msg,"success",1e3),m(),x("")):(n(t.data.message),x(""))};return e.jsxs(e.Fragment,{children:[e.jsx(D,{state:S,setState:o,zindex:"z-[99]",children:e.jsxs("form",{onSubmit:M,className:"flex flex-col space-y-3",children:[e.jsx("h1",{className:"font-semibold",children:"Upload Loop Media"}),e.jsx(p,{widthFull:"true",name:"type",title:"Upload Type",iscompulsory:"true",onChange:s=>b(s.target.value),options:["Upload","Link","Iframe"]}),e.jsx(p,{widthFull:"true",name:"section",title:"Select Page Section",iscompulsory:"true",onChange:s=>v(s.target.value),options:["Home Page Hero Section","Home Page Tour Section","Stay In Loop Videos","Faq's Page Video","Our Story Page Video","Our Showroom Page Video","Our Compnies Page Video"]}),i==="upload"?e.jsxs("div",{className:"flex items-end space-x-3",children:[e.jsx(y,{width:"full",name:"uploadUrl",title:"Video File",iscompulsory:"true",type:"file",accept:"video/*",onChange:s=>r(s.target.files[0])}),e.jsxs("a",{className:"flex items-center justify-center text-center  w-14 py-1 rounded-md text-white font-semibold",children:[e.jsx("span",{className:"text-xs",children:"Upload"})," "]})]}):null,i==="link"||i==="iframe"?e.jsx(y,{width:"full",name:"mediaUrl",title:"Media Link",iscompulsory:"true",type:"text",onChange:s=>r(s.target.value),placeholder:"Enter Media Url"}):null,e.jsx("button",{type:"submit",className:"flex justify-center items-center cursor-pointer rounded-md py-1 w-full bg-b3",children:V?e.jsx("img",{src:"/loader-bg.gif",className:"w-8"}):e.jsxs("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:[e.jsx("span",{className:"text-xs",children:"Create"}),e.jsx(O,{className:"text-2xl"})]})})]})}),e.jsxs(k,{children:[e.jsxs("div",{className:"flex items-center mb-5 py-3 rounded-3xl px-10 w-full",children:[e.jsx(p,{widthFull:"false",name:"sectionType",title:"Filter Section Videos",iscompulsory:"false",onChange:s=>h(s.target.value),options:["Home Page Hero Section","Home Page Tour Section","Stay In Loop Videos","Faq's Page Video","Our Story Page Video","Our Showroom Page Video","Our Compnies Page Video"]}),e.jsx("div",{className:"flex w-full justify-end space-x-3",children:e.jsx(H,{onClick:()=>o(!0),className:"text-b3 text-3xl shadow-xl rounded-full cursor-pointer"})})]}),L?e.jsx("div",{className:"flex justify-center w-full h-full",children:e.jsx("img",{src:"/loader-bg.gif",className:"w-12"})}):j.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-4 gap-x-2 gap-y-5 w-full",children:j.map((s,l)=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative  w-full",children:[s.section==="stay-in-loop-videos"?e.jsx("div",{className:"absolute right-3 bg-transparent z-30 h-8 w-8",children:e.jsx("div",{className:"flex  justify-end  w-10 h-10 mt-1 ",children:e.jsx("span",{title:"Delete Video",onClick:t=>U(t,s._id),className:"flex items-center justify-center bg-red-500 text-white hover:bg-white hover:text-red-500 hover:border-red-500 text-xs w-7 h-7 rounded-full cursor-pointer ",children:T===s._id?e.jsx("img",{src:"/loader-bg.gif",className:"w-4 h-4"}):e.jsx(A,{className:"text-sm"})})})}):null,s.type==="upload"||s.type==="link"?e.jsx("video",{controls:!0,className:"object-cover rounded-2xl xl:h-[150px] xl:w-[200px] lg:w-[200px] lg:h-32 w-32 h-32 ",src:s.url},l):null,s.type==="iframe"?e.jsx(R,{style:"h-32 w-full rounded-2xl",src:s.url,divId:`videos-manage-ifram-div-${l}`,frameId:`videos-manage-ifram-${l}`,thumbnail:s.thumbnail,icon:"text-5xl"}):null]})}))}),e.jsx(E,{page:c,setPage:F,totalPages:C})]}):e.jsx("div",{className:"flex justify-center items-center w-full h-full",children:e.jsx("img",{src:"/not-found.webp",className:"w-36 h-36"})})]})]})};export{Q as default};
