import{j as e,r as i,f as R,e as q,u as v,T as d,n as T}from"./index-8fa978d7.js";import{M as C}from"./MyAccount-881230fc.js";import{T as u}from"./TextInput-0681361f.js";import{c as S,a as m}from"./index.esm-1e9dfcd6.js";import{g as b}from"./profile-3ffce1bf.js";import{B as E}from"./BtnLoader-b8b0f3d1.js";import"./MainLayout-e7ebb6b6.js";import"./ScrollToTop-377155f7.js";import"./index.esm-4cafad3c.js";import"./index-b7b6efe6.js";const k=()=>e.jsx(e.Fragment,{children:e.jsx(C,{children:e.jsx(D,{})})}),D=()=>{const p=S().shape({password:m().required("Password is Required!"),confirmPassword:m().required("Re-Type Password is Required!")}),[t,n]=i.useState([]),[l,f]=i.useState(""),[c,w]=i.useState(""),[g,o]=i.useState(!1),h=R(s=>s.user._id),x=q(),P=v(),y=async s=>{s.preventDefault(),o(!0);try{const a={password:l,confirmPassword:c};await p.validate(a,{abortEarly:!1});const r=await b({...a,userId:h});console.log(r),r.status===200?(o(!1),d(r.data.msg,"success",1e3),x(T()),P("/login")):(o(!1),d(r.data.message,"error",1e3))}catch(a){if(o(!1),a){let r=a.errors;n(r),r.forEach(j=>{d(j,"error",1e3)})}else n([])}};return e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:y,className:"lg:max-w-[432px] w-full flex flex-col gap-6",children:[e.jsx(u,{title:"Password",type:"password",width:"full",value:l,onChange:s=>f(s.target.value),error:!!(t&&t.includes("Password is Required!")),errormessage:"Password is Required!",placeholder:"••••••••••••••"}),e.jsx(u,{title:"Re-Type Password",type:"password",width:"full",value:c,onChange:s=>w(s.target.value),error:!!(t&&t.includes("Re-Type Password is Required!")),errormessage:"Re-Type Password is Required!",placeholder:"••••••••••••••"}),e.jsx("button",{type:"submit",className:"flex justify-center items-center rounded-lg bg-b3 py-3 w-full text-white text-xs font-medium",children:g?e.jsx(E,{style:"w-4"}):"Change Password"})]})})};export{D as ChangePasswordData,k as default};
