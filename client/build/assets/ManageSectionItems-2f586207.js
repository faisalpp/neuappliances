import{r,j as e,N as oe,Q as m,d as ne,u as ce}from"./index-4f7bd113.js";import{A as de}from"./AdminAccount-4e8fd0d2.js";import{d as ue,al as me}from"./ScrollToTop-008a3bda.js";import{m as E,n as xe,a as G,p as pe}from"./index.esm-8e632965.js";import{p as ge,q as fe,r as he,s as be,t as je}from"./admin-50b6b4c1.js";import{P as J}from"./Popup-aa13a4ba.js";import{T as I}from"./TextInput-66b2915f.js";import{D as Ne,C as ve,P as we}from"./react-beautiful-dnd.esm-063df312.js";import"./MainLayout-ad0041ab.js";import"./index-dd138650.js";const ye=({getSectionItem:k,id:j,handleUpdateStates:o,ref:H,title:u,image:w,rating:f,brandimage:c,brandname:x,colorimage:i,colorname:P,updateUrl:R,viewUrl:d})=>{const y=({numberOfTimes:l})=>{const p=Array.from({length:l},(N,n)=>e.jsx(ue,{className:"text-b7"},n));return e.jsx("div",{className:"flex items-center",children:p})};function h(l){var p=l.split("-"),N=p.map(function(v){return v.charAt(0).toUpperCase()+v.slice(1)}),n=N.join(" ");return n}const[D,b]=r.useState(!1),C=async(l,p)=>{l.preventDefault(),b(!0);const n=await ge({id:p});n.status===200?(b(!1),k(),m.success(n.data.msg,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})):(b(!1),m.error(n.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}))};return e.jsxs("div",{ref:H,children:[u?e.jsxs("div",{className:"rounded-2xl maxmd:mx-auto maxmd:max-w-[330px] border border-gray-300 p-3",children:[e.jsx("img",{src:w,className:"xl:w-auto h-80 mx-auto",alt:u}),e.jsxs("div",{className:"flex flex-col w-full mt-2 items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:u}),f?e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx("span",{className:"font-semibold text-sm",children:"Cosmetic Rating:"}),e.jsx(y,{numberOfTimes:f})]}):null]})]}):null,c?e.jsx("div",{className:"populerbrands",children:e.jsxs("div",{className:"rounded-2xl border border-gray-300 p-3 h-fit w-fit flex flex-col justify-center items-center",children:[e.jsx("img",{src:c,className:"max-w-full h-[133px] object-contain",alt:x}),e.jsx("h3",{className:"font-semibold px-3 text-center text-xs",children:h(x)}),e.jsx("h3",{className:"font-semibold px-3 text-center text-xs",children:e.jsx(y,{numberOfTimes:f})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("span",{onClick:l=>o(l,c,x,f,j),title:"Edit Item",className:"flex items-center justify-center bg-b3 text-white hover:bg-white hover:text-b3 border-2 border-white hover:border-b3 text-sm px-2 rounded-full cursor-pointer py-2",children:e.jsx(E,{className:"text-base"})}),e.jsx("span",{title:"Delete Blog",onClick:l=>C(l,j),className:"flex items-center justify-center bg-red-500/30 text-red-500 hover:bg-white hover:text-red-500 border-2 border-white hover:border-red-500 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:D?e.jsx("img",{src:"/loader-bg.gif",className:"w-4 h-4"}):e.jsx(xe,{className:"text-base"})}),d?e.jsx(oe,{to:d,className:"bg-b3 text-white text-xs rounded-md cursor-pointer py-1 w-fit px-2 mt-1 text-center",children:"Edit"}):null]})]})}):null,i?e.jsxs("div",{className:"colortype",children:[e.jsx("img",{src:i,className:"h-44 xs:h-52 w-full sm:h-56 object-cover",alt:P}),e.jsx("h3",{className:"font-semibold px-2 text-center mt-3",children:P})]}):null]})},Be=()=>{const{style:k,sectionId:j}=ne(),[o,H]=r.useState(k),[u,w]=r.useState([]),f={sectionId:j},c=async()=>{const s=await fe(f);console.log(s),s.status===200&&w(s.data.sectionItems)};r.useEffect(()=>{c()},[]);const x=r.useRef(),[i,P]=r.useState([]),[R,d]=r.useState(!1),[y,h]=r.useState(!1),[D,b]=r.useState(""),[C,l]=r.useState(""),p=ce(),N=s=>{const t=s.target.files[0];t&&(b(t),l(window.URL.createObjectURL(t)))},[n,v]=r.useState(""),[L,M]=r.useState(""),K=async s=>{s.preventDefault(),d(!0);const t=new FormData;t.set("title",n),t.set("image",D),t.set("sectionId",j),t.set("rating",L);const a=await he(t);a.status===200?(d(!1),c(),h(!1),x.current.value=null,v(""),M(""),b(""),l(""),m.success(a.data.msg,{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})):(d(!1),h(!1),m.error(a.data.message,{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}))},O=r.useRef(),[V,S]=r.useState(!1),[_,T]=r.useState(""),[X,Y]=r.useState(""),[U,z]=r.useState(""),[Z,$]=r.useState(),ee=s=>{const t=s.target.files[0];t&&(T(t),z(window.URL.createObjectURL(t)))},[Q,B]=r.useState(""),[W,A]=r.useState(""),te=async s=>{s.preventDefault(),d(!0);const t=new FormData;t.set("title",Q),t.set("image",_),t.set("tempImg",U),t.set("oldImg",X),t.set("sectionItemId",Z),t.set("rating",W);const a=await be(t);a.status===200?(d(!1),c(),S(!1),O.current.value=null,B(""),T(""),A(""),z(""),m.success(a.data.msg,{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})):(d(!1),S(!1),m.error(a.data.message,{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}))},se=(s,t,a,g,q)=>{s.preventDefault(),Y(t),T(t),B(a),A(g),$(q),S(!0)},re=s=>{console.log(s);const t=Array.from(u),[a]=t.splice(s.source.index,1);t.splice(s.destination.index,0,a);const g=t.map((q,ie)=>({...q,index:ie+1}));w(g)},[ae,F]=r.useState(!1),le=async s=>{s.preventDefault(),F(!0);const t=await je({sectionItems:u});t.status===200?(F(!1),m.success(t.data.msg,{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),c()):(F(!1),m.error(t.data.message,{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}))};return e.jsxs(e.Fragment,{children:[e.jsx(J,{state:y,setState:h,children:e.jsxs("form",{className:"flex flex-col space-y-3",children:[e.jsx("h1",{className:"font-semibold",children:"Create Section Item"}),e.jsxs("div",{className:"relative rounded-2xl border border-gray-300 p-3 h-fit w-[200px] flex justify-center items-center self-center ",children:[e.jsx("div",{className:"absolute flex bg-transparent rounded-full w-full h-full",children:e.jsx("span",{onClick:()=>{x.current.click()},className:"absolute -right-3 -bottom-2 flex items-center h-fit justify-center bg-b3 text-white hover:bg-white hover:text-b3 border-2 border-white hover:border-b3 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:e.jsx(E,{className:"text-base"})})}),e.jsx("img",{src:C!=""?C:"/no-image.jfif",alt:""}),e.jsx("input",{ref:x,type:"file",name:"image",onChange:s=>N(s),className:"hidden"})]}),o==="head-rating-card"||o==="rating-card"?null:e.jsx(I,{width:"full",name:"title",title:"Title",iscompulsory:"true",type:"text",value:n,onChange:s=>v(s.target.value),error:!!(i&&i.includes("Title is required")),errormessage:"Title is Required",placeholder:"Cool Master"}),o==="head-rating-card"||o==="rating-card"?e.jsx(I,{width:"full",name:"rating",title:"Rating",iscompulsory:"true",type:"text",value:L,onChange:s=>M(s.target.value),error:!!(i&&i.includes("Name is required")),errormessage:"Title is Required",placeholder:"3"}):null,e.jsx("button",{type:"button",onClick:K,className:"flex justify-center items-center cursor-pointer rounded-md py-1 w-full bg-b3",children:R?e.jsx("img",{src:"/loader-bg.gif",className:"w-8"}):e.jsxs("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:[e.jsx("span",{className:"text-xs",children:"Create"}),e.jsx(G,{className:"text-2xl"})]})})]})}),e.jsx(J,{state:V,setState:S,children:e.jsxs("form",{className:"flex flex-col space-y-3",children:[e.jsx("h1",{className:"font-semibold",children:"Update Section Item"}),e.jsxs("div",{className:"relative rounded-2xl border border-gray-300 p-3 h-fit w-[200px] flex justify-center items-center self-center ",children:[e.jsx("div",{className:"absolute flex bg-transparent rounded-full w-full h-full",children:e.jsx("span",{onClick:()=>{O.current.click()},className:"absolute -right-3 -bottom-2 flex items-center h-fit justify-center bg-b3 text-white hover:bg-white hover:text-b3 border-2 border-white hover:border-b3 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:e.jsx(E,{className:"text-base"})})}),e.jsx("img",{src:U!==""?U:_,alt:""}),e.jsx("input",{ref:O,type:"file",name:"image",onChange:s=>ee(s),className:"hidden"})]}),o==="head-rating-card"||o==="rating-card"?null:e.jsx(I,{width:"full",name:"title",title:"Title",iscompulsory:"true",type:"text",value:Q,onChange:s=>B(s.target.value),error:!!(i&&i.includes("Name is required")),errormessage:"Title is Required",placeholder:"Cool Master"}),o==="head-rating-card"||o==="rating-card"?e.jsx(I,{width:"full",name:"rating",title:"Rating",iscompulsory:"true",type:"text",value:W,onChange:s=>A(s.target.value),error:!!(i&&i.includes("Name is required")),errormessage:"Title is Required",placeholder:"Cool Master"}):null,e.jsx("button",{type:"button",onClick:te,className:"flex justify-center items-center cursor-pointer rounded-md py-1 w-full bg-b3",children:R?e.jsx("img",{src:"/loader-bg.gif",className:"w-8"}):e.jsxs("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:[e.jsx("span",{className:"text-xs",children:"Create"}),e.jsx(G,{className:"text-2xl"})]})})]})}),e.jsxs(de,{children:[e.jsxs("div",{className:"flex mb-5 py-3 rounded-3xl px-10 w-full",children:[e.jsx(pe,{onClick:()=>p(-1),className:"text-b3 text-3xl shadow-xl rounded-full cursor-pointer"}),e.jsx("div",{className:"flex w-full justify-end space-x-3",children:e.jsx(me,{onClick:()=>h(!0),className:"text-b3 text-3xl shadow-xl rounded-full cursor-pointer"})})]}),u.length>0?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{onDragEnd:re,className:"w-full 3xl:max-w-1680px mx-auto",children:e.jsx(ve,{droppableId:"sectionItem",className:"3xl:px-[60px] flex flex-wrap justify-center 3xl:justify-start gap-10 3xl:gap-20",children:s=>e.jsxs("div",{...s.droppableProps,ref:s.innerRef,className:"grid grid-cols-1 md:grid-cols-4 2xl:grid-cols-3 gap-7 xl:gap-10",children:[u.map((t,a)=>e.jsx(we,{draggableId:t._id,index:a,children:g=>r.createElement("div",{className:"w-fit h-fit",...g.draggableProps,...g.dragHandleProps,ref:g.innerRef,title:"Draggable!",key:a},e.jsx(ye,{getSectionItem:c,id:t._id,handleUpdateStates:se,updateUrl:"",brandname:t.title,brandimage:t.image,rating:t.rating},a))},t._id)),s.placeholder]})})}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx("button",{type:"button",onClick:s=>le(s),className:"flex mt-2 items-center cursor-pointer rounded-md py-1 w-fit bg-b3",children:ae?e.jsx("img",{src:"/loader-bg.gif",className:"w-8"}):e.jsx("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:e.jsx("span",{className:"text-xs",children:"Save"})})})})]}):e.jsx("div",{className:"flex justify-center w-full h-full",children:e.jsx("img",{src:"/not-found.webp",className:"w-36 h-36"})})]})]})};export{Be as default};
