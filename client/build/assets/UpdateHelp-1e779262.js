import{d as I,r,j as e,Q as S}from"./index-9086772f.js";import{A as O}from"./AdminAccount-c0a1c178.js";import{a as P}from"./index.esm-d1123c14.js";/* empty css                      */import{g as U}from"./helpSupportTab-068fadc2.js";import{g as k,u as F}from"./helpSupport-75f26757.js";import{B as R}from"./BlogEditor-a35ec26e.js";import{T as j}from"./TextInput-6ff12c7c.js";import{S as $}from"./SelectInput-abd85457.js";import{c as G,a as l}from"./index.esm-667a8c3e.js";import{T as L}from"./TextAreaInput-39f5d958.js";import"./MainLayout-9f08b4ec.js";import"./ScrollToTop-9454a300.js";import"./index-57df3b0a.js";import"./index-da41181b.js";const ae=()=>{const C=G().shape({id:l().required("Id is required"),title:l().required("Title is required"),slug:l().required("Slug is required"),category:l().required("Blog Category is required"),content:l().required("Blog Content is required")}),w=I(),[a,p]=r.useState([]),[b,v]=r.useState([]),[q,i]=r.useState(!1),[T,B]=r.useState(),[g,n]=r.useState(""),[m,u]=r.useState(""),[f,h]=r.useState(""),[o,x]=r.useState(""),[y,d]=r.useState(""),N=async()=>{const s={slug:w.slug},t=await k(s);console.log(t.data.help),B(t.data.help[0]._id),n(t.data.help[0].title),u(t.data.help[0].slug),d(t.data.help[0].content),x(t.data.help[0].category),h(t.data.help[0].shortDescription)};r.useEffect(()=>{N()},[]);const E=async s=>{s.preventDefault(),i(!0);try{const t={id:T,title:g,slug:m,category:o,shortDescription:f,content:y};await C.validate(t,{abortEarly:!1});const c=await F(t);c.status===200?(i(!1),S.success(c.data.msg,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),n(""),u(""),d("")):(i(!1),S.error(c.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}))}catch(t){console.log(t),i(!1),p(t?t.errors:[])}};r.useEffect(()=>{D()},[]);const D=async()=>{const s=await U();if(console.log(s.data.helpTabs),s.status===200){const t=s.data.helpTabs.filter(A=>A.slug!==o);console.log(t);const H=[{title:o[0].toUpperCase()+o.slice(1),slug:o},...t];v(H)}};return e.jsx(e.Fragment,{children:e.jsx(O,{children:e.jsxs("form",{onSubmit:E,className:"flex flex-col space-y-5 w-full py-5 bg-white",children:[e.jsxs("div",{className:"flex w-full",children:[e.jsxs("div",{className:"flex flex-col space-y-10 w-1/2",children:[e.jsx(j,{width:"full",name:"title",title:"Blog Title",iscompulsory:"true",type:"text",value:g,onChange:s=>{n(s.target.value),u(s.target.value.toLowerCase().replace(/\s/g,"-").replace(/\./g,""))},error:!!(a&&a.includes("Title is required")),errormessage:"Title is required",placeholder:"Enter Blog Title"}),e.jsx(j,{width:"full",name:"slug",title:"Blog Slug",readOnly:!0,iscompulsory:"true",type:"text",value:m,error:!!(a&&a.includes("Slug is required")),errormessage:"Slug is required",placeholder:"Enter Blog Slug"})]}),e.jsxs("div",{className:"flex flex-col space-y-8 items-center w-1/2",children:[e.jsx("div",{className:"flex flex-col items-center space-x-5 w-full",children:e.jsx($,{name:"categor",title:"Select Category",iscompulsory:"true",onChange:s=>x(s.target.value),options:b})}),e.jsx("div",{className:"flex flex-col items-center space-x-5 w-72",children:e.jsx(L,{name:"description",title:"Description",iscompulsory:"true",type:"text",value:f,onChange:s=>h(s.target.value),error:!!(a&&a.includes("Short Description is required")),errormessage:"Short Description is required",placeholder:"Enter Product Description"})})]})]}),e.jsx(R,{state:y,setState:d}),e.jsx("button",{type:"submit",className:"flex justify-center items-center cursor-pointer rounded-md py-1 w-full bg-b3",children:q?e.jsx("img",{src:"/loader-bg.gif",className:"w-8"}):e.jsxs("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:[e.jsx("span",{className:"text-xs",children:"Create"}),e.jsx(P,{className:"text-2xl"})]})})]})})})};export{ae as default};
