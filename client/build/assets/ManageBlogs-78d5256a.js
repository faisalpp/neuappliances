import{r as s,j as e,N as B,Q as f}from"./index-51d5f935.js";import{A as D}from"./AdminAccount-4dd52de2.js";/* empty css                      */import{m as L,n as k}from"./index.esm-3769a322.js";import{t as O}from"./MainLayout-1d814bef.js";import{D as P,E as A,F as E}from"./admin-3ebfbcb2.js";import{P as F}from"./Pagination2-6342ec82.js";import{ap as H}from"./ScrollToTop-18281d88.js";import{G as T}from"./category-ff48cc30.js";import{S as G}from"./SelectInput-4529fb7d.js";import"./index-a38f3315.js";const M=({img:i,title:o,category:c,id:a,slug:r,getBlog:b,setPage:j})=>{const[x,m]=s.useState(!1),[n,u]=s.useState(!1),[w,p]=s.useState(!0),v=async(l,g)=>{l.preventDefault(),m(!0);const t=await P({slug:g});t.status===200?(m(!1),b(),f.success(t.data.msg,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})):(m(!1),f.error(t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}))},y=async(l,g)=>{l.preventDefault(),j(1),u(!0);const t=await A({id:g});t.status===200?(u(!1),b(1),f.success(t.data.msg,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})):(u(!1),f.error(t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}))},N=()=>{p(!1)};return e.jsxs("tr",{className:"border-b border-l border-r border-b6 text-xs",children:[e.jsx("td",{className:"px-5 py-3 capitalize",children:e.jsxs("div",{className:"relative",children:[w&&e.jsx("div",{className:"absolute flex items-center justify-center w-28 h-20",children:e.jsx("img",{src:"/loader-bg.gif",className:"w-5 h-5"})})," ",e.jsx("img",{src:i,onLoad:N,alt:"blog_thumbnail",className:"w-28 h-20"})]})}),e.jsxs("td",{className:"px-2 py-3 w-52 overflow-hidden",children:[o.substr(0,50),"..."]}),e.jsx("td",{className:"whitespace-nowrap  px-5 py-4 font-medium capitalize",children:c.replace(/-/g," ")}),e.jsxs("td",{className:"flex items-center justify-center mt-3 space-x-1 px-5 py-4",children:[e.jsx(B,{title:"Update blog",to:`/admin/update-blog/${r}`,className:"flex items-center justify-center bg-b3 text-white hover:bg-white hover:text-b3 border-2 border-white hover:border-b3 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:e.jsx(L,{className:"text-base"})}),e.jsx("span",{title:"Duplicate Blog",onClick:l=>v(l,r),className:"flex items-center justify-center bg-b7 text-white hover:bg-white hover:text-b7 border-2 border-white hover:border-b7 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:x?e.jsx("img",{src:"/loader-bg.gif",className:"w-4 h-4"}):e.jsx(O,{className:"text-lg"})}),e.jsx("span",{title:"Delete Blog",onClick:l=>y(l,a),className:"flex items-center justify-center bg-red-500/30 text-red-500 hover:bg-white hover:text-red-500 border-2 border-white hover:border-red-500 text-sm px-2 w-fit rounded-full cursor-pointer py-2",children:n?e.jsx("img",{src:"/loader-bg.gif",className:"w-4 h-4"}):e.jsx(k,{className:"text-base"})})]})]})},z=({data:i,setPage:o,getBlog:c})=>e.jsx("div",{className:"flex flex-col",children:e.jsx("div",{className:"overflow-x-auto sm:-mx-6 lg:-mx-8",children:e.jsx("div",{className:"inline-block min-w-full py-2 sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"min-w-full text-center text-sm font-light",children:[e.jsx("thead",{className:"border-b border-l border-b3 bg-b3 font-medium text-white",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-4 text-center",children:"Image"}),e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Title"}),e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Category"}),e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Action"})]})}),e.jsx("tbody",{children:i.map((a,r)=>e.jsx(M,{id:a._id,setPage:o,getBlog:c,img:a.thumbnail?a.thumbnail:"/no-image.jfif",title:a.title,slug:a.slug,category:a.category},r))})]})})})})}),X=()=>{const[i,o]=s.useState([]),[c,a]=s.useState(1),[r,b]=s.useState(8),[j,x]=s.useState(0),[m,n]=s.useState(!1);s.useState(!1),s.useState(!1);const[u,w]=s.useState("all-categories"),[p,v]=s.useState(""),[y,N]=s.useState([]);s.useEffect(()=>{l()},[u,c]);const l=async t=>{n(!0);let h;t?(a(t),h={page:t,limit:r}):h={page:c,limit:r};const d=await H({category:u},h);d.status===200?(n(!1),o(d.data.blogs),x(Math.ceil(d.data.totalCount/r))):(o([]),n(!1))};s.useEffect(()=>{g()},[]);const g=async()=>{const t=await T();t.status===200&&N([{title:"All Categories"},...t.data.categories])},C=async t=>{t.preventDefault();const d=await E({title:p},{page:1,limit:r});d.status===200?(n(!1),o(d.data.blogs),x(Math.ceil(d.data.totalCount/r))):(o([]),n(!1))};return e.jsx(e.Fragment,{children:e.jsxs(D,{children:[e.jsxs("div",{className:"flex items-center space-x-2 my-2 bg-white py-3 px-5 w-full",children:[e.jsx(B,{to:"/admin/create-blog",className:"bg-b3 text-white text-xs px-3 rounded-2xl cursor-pointer py-2 font-bold",children:"CreateÂ Blog"}),e.jsx(G,{onChange:t=>w(t.target.value),options:y}),e.jsxs("div",{className:"flex w-full justify-end space-x-3",children:[e.jsx("input",{value:p,onChange:t=>v(t.target.value),placeholder:"Search Blog",className:"text-xs px-2 outline-none border border-b3 rounded-md"}),e.jsx("button",{onClick:C,className:"border border-b3 text-b3 text-xs px-2 rounded-md cursor-pointer py-1",children:"Search"})]})]}),m?e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("img",{src:"/loader-bg.gif",className:"w-10 h-10"})}):i.length>0?e.jsx(z,{setPage:a,getBlog:l,data:i}):e.jsx("div",{className:"flex justify-center w-full h-full",children:e.jsx("img",{src:"/not-found.webp",className:"w-36 h-36"})}),i.length>r?e.jsx(F,{page:c,setPage:a,totalPages:j}):null]})})};export{X as default};
