import{r as l,al as K,am as w,an as X,ao as Z,ap as y,aq as de,ar as _,as as ee,at as R,au as re,av as P,aw as fe,ax as F,ay as ve,az as $,aA as te,aB as ne}from"./index-e60b0384.js";function Q(){let e=l.useRef(!1);return K(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function pe(e=0){let[r,t]=l.useState(e),a=Q(),f=l.useCallback(s=>{a.current&&t(i=>i|s)},[r,a]),p=l.useCallback(s=>!!(r&s),[r]),v=l.useCallback(s=>{a.current&&t(i=>i&~s)},[t,a]),c=l.useCallback(s=>{a.current&&t(i=>i^s)},[t]);return{flags:r,addFlag:f,hasFlag:p,removeFlag:v,toggleFlag:c}}function he(e){let r={called:!1};return(...t)=>{if(!r.called)return r.called=!0,e(...t)}}function q(e,...r){e&&r.length>0&&e.classList.add(...r)}function G(e,...r){e&&r.length>0&&e.classList.remove(...r)}function me(e,r){let t=X();if(!e)return t.dispose;let{transitionDuration:a,transitionDelay:f}=getComputedStyle(e),[p,v]=[a,f].map(s=>{let[i=0]=s.split(",").filter(Boolean).map(o=>o.includes("ms")?parseFloat(o):parseFloat(o)*1e3).sort((o,E)=>E-o);return i}),c=p+v;if(c!==0){t.group(i=>{i.setTimeout(()=>{r(),i.dispose()},c),i.addEventListener(e,"transitionrun",o=>{o.target===o.currentTarget&&i.dispose()})});let s=t.addEventListener(e,"transitionend",i=>{i.target===i.currentTarget&&(r(),s())})}else r();return t.add(()=>r()),t.dispose}function ge(e,r,t,a){let f=t?"enter":"leave",p=X(),v=a!==void 0?he(a):()=>{};f==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let c=w(f,{enter:()=>r.enter,leave:()=>r.leave}),s=w(f,{enter:()=>r.enterTo,leave:()=>r.leaveTo}),i=w(f,{enter:()=>r.enterFrom,leave:()=>r.leaveFrom});return G(e,...r.enter,...r.enterTo,...r.enterFrom,...r.leave,...r.leaveFrom,...r.leaveTo,...r.entered),q(e,...c,...i),p.nextFrame(()=>{G(e,...i),q(e,...s),me(e,()=>(G(e,...c),q(e,...r.entered),v()))}),p.dispose}function be({container:e,direction:r,classes:t,onStart:a,onStop:f}){let p=Q(),v=Z(),c=y(r);K(()=>{let s=X();v.add(s.dispose);let i=e.current;if(i&&c.current!=="idle"&&p.current)return s.dispose(),a.current(c.current),s.add(ge(i,t.current,c.current==="enter",()=>{s.dispose(),f.current(c.current)})),s.dispose},[r])}function S(e=""){return e.split(" ").filter(r=>r.trim().length>1)}let k=l.createContext(null);k.displayName="TransitionContext";var Ee=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Ee||{});function Te(){let e=l.useContext(k);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function Fe(){let e=l.useContext(A);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let A=l.createContext(null);A.displayName="NestingContext";function B(e){return"children"in e?B(e.children):e.current.filter(({el:r})=>r.current!==null).filter(({state:r})=>r==="visible").length>0}function le(e,r){let t=y(e),a=l.useRef([]),f=Q(),p=Z(),v=P((d,n=R.Hidden)=>{let h=a.current.findIndex(({el:u})=>u===d);h!==-1&&(w(n,{[R.Unmount](){a.current.splice(h,1)},[R.Hidden](){a.current[h].state="hidden"}}),p.microTask(()=>{var u;!B(a)&&f.current&&((u=t.current)==null||u.call(t))}))}),c=P(d=>{let n=a.current.find(({el:h})=>h===d);return n?n.state!=="visible"&&(n.state="visible"):a.current.push({el:d,state:"visible"}),()=>v(d,R.Unmount)}),s=l.useRef([]),i=l.useRef(Promise.resolve()),o=l.useRef({enter:[],leave:[],idle:[]}),E=P((d,n,h)=>{s.current.splice(0),r&&(r.chains.current[n]=r.chains.current[n].filter(([u])=>u!==d)),r==null||r.chains.current[n].push([d,new Promise(u=>{s.current.push(u)})]),r==null||r.chains.current[n].push([d,new Promise(u=>{Promise.all(o.current[n].map(([m,x])=>x)).then(()=>u())})]),n==="enter"?i.current=i.current.then(()=>r==null?void 0:r.wait.current).then(()=>h(n)):h(n)}),T=P((d,n,h)=>{Promise.all(o.current[n].splice(0).map(([u,m])=>m)).then(()=>{var u;(u=s.current.shift())==null||u()}).then(()=>h(n))});return l.useMemo(()=>({children:a,register:c,unregister:v,onStart:E,onStop:T,wait:i,chains:o}),[c,v,a,E,T,o,i])}function Ce(){}let $e=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function Y(e){var r;let t={};for(let a of $e)t[a]=(r=e[a])!=null?r:Ce;return t}function we(e){let r=l.useRef(Y(e));return l.useEffect(()=>{r.current=Y(e)},[e]),r}let Re="div",ae=de.RenderStrategy;function Pe(e,r){let{beforeEnter:t,afterEnter:a,beforeLeave:f,afterLeave:p,enter:v,enterFrom:c,enterTo:s,entered:i,leave:o,leaveFrom:E,leaveTo:T,...d}=e,n=l.useRef(null),h=ee(n,r),u=d.unmount?R.Unmount:R.Hidden,{show:m,appear:x,initial:b}=Te(),[g,M]=l.useState(m?"visible":"hidden"),W=Fe(),{register:H,unregister:N}=W,U=l.useRef(null);l.useEffect(()=>H(n),[H,n]),l.useEffect(()=>{if(u===R.Hidden&&n.current){if(m&&g!=="visible"){M("visible");return}return w(g,{hidden:()=>N(n),visible:()=>H(n)})}},[g,n,H,N,m,u]);let j=y({enter:S(v),enterFrom:S(c),enterTo:S(s),entered:S(i),leave:S(o),leaveFrom:S(E),leaveTo:S(T)}),D=we({beforeEnter:t,afterEnter:a,beforeLeave:f,afterLeave:p}),z=re();l.useEffect(()=>{if(z&&g==="visible"&&n.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[n,g,z]);let I=b&&!x,se=(()=>!z||I||U.current===m?"idle":m?"enter":"leave")(),L=pe(0),ue=P(C=>w(C,{enter:()=>{L.addFlag($.Opening),D.current.beforeEnter()},leave:()=>{L.addFlag($.Closing),D.current.beforeLeave()},idle:()=>{}})),oe=P(C=>w(C,{enter:()=>{L.removeFlag($.Opening),D.current.afterEnter()},leave:()=>{L.removeFlag($.Closing),D.current.afterLeave()},idle:()=>{}})),O=le(()=>{M("hidden"),N(n)},W);be({container:n,classes:j,direction:se,onStart:y(C=>{O.onStart(n,C,ue)}),onStop:y(C=>{O.onStop(n,C,oe),C==="leave"&&!B(O)&&(M("hidden"),N(n))})}),l.useEffect(()=>{I&&(u===R.Hidden?U.current=null:U.current=m)},[m,I,g]);let V=d,ce={ref:h};return x&&m&&b&&(V={...V,className:fe(d.className,...j.current.enter,...j.current.enterFrom)}),F.createElement(A.Provider,{value:O},F.createElement(ve,{value:w(g,{visible:$.Open,hidden:$.Closed})|L.flags},te({ourProps:ce,theirProps:V,defaultTag:Re,features:ae,visible:g==="visible",name:"Transition.Child"})))}function Se(e,r){let{show:t,appear:a=!1,unmount:f,...p}=e,v=l.useRef(null),c=ee(v,r);re();let s=ne();if(t===void 0&&s!==null&&(t=(s&$.Open)===$.Open),![!0,!1].includes(t))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[i,o]=l.useState(t?"visible":"hidden"),E=le(()=>{o("hidden")}),[T,d]=l.useState(!0),n=l.useRef([t]);K(()=>{T!==!1&&n.current[n.current.length-1]!==t&&(n.current.push(t),d(!1))},[n,t]);let h=l.useMemo(()=>({show:t,appear:a,initial:T}),[t,a,T]);l.useEffect(()=>{if(t)o("visible");else if(!B(E))o("hidden");else{let b=v.current;if(!b)return;let g=b.getBoundingClientRect();g.x===0&&g.y===0&&g.width===0&&g.height===0&&o("hidden")}},[t,E]);let u={unmount:f},m=P(()=>{var b;T&&d(!1),(b=e.beforeEnter)==null||b.call(e)}),x=P(()=>{var b;T&&d(!1),(b=e.beforeLeave)==null||b.call(e)});return F.createElement(A.Provider,{value:E},F.createElement(k.Provider,{value:h},te({ourProps:{...u,as:l.Fragment,children:F.createElement(ie,{ref:c,...u,...p,beforeEnter:m,beforeLeave:x})},theirProps:{},defaultTag:l.Fragment,features:ae,visible:i==="visible",name:"Transition"})))}function xe(e,r){let t=l.useContext(k)!==null,a=ne()!==null;return F.createElement(F.Fragment,null,!t&&a?F.createElement(J,{ref:r,...e}):F.createElement(ie,{ref:r,...e}))}let J=_(Se),ie=_(Pe),Le=_(xe),He=Object.assign(J,{Child:Le,Root:J});export{He as $};
