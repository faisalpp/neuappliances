import{r as s,a0 as se,a1 as ae,j as e,a2 as re,T as x,a3 as ie,f as m,u as le,e as ne,L as _,a4 as oe,E as F}from"./index-86a49321.js";import{k as ce}from"./MainLayout-477decf2.js";import{r as T,H as de}from"./ScrollToTop-89a98e42.js";import{C as ue,B as me,L as pe}from"./LeftArrowSvg-360046df.js";import{C as U}from"./CustomSelect-a09e27c6.js";import{T as u}from"./TextInput-362da2b7.js";import{c as he,a as i}from"./index.esm-c338f731.js";import"./index.esm-5246d67b.js";import"./index-a127e608.js";import"./CustomInput-7bb8f61a.js";const fe=()=>{const[g,N]=s.useState(null),y=se(),c=ae(),p=async b=>{if(b.preventDefault(),!y&&!c){x("Stripe Not Loaded!","error",100);return}const l=await ie({price:200*100,mode:["card"],currency:"usd",description:"Neuappliance Outlet Card Transaction"});console.log(l.data),l.status===200?y.confirmPayPalPayment(l.data.payIntent.client_secret,{return_url:"https://example.com/setup/complete"}).then(function(h){h.error,console.log(h)}):x("Payment Intent Error!","error",1e3)};return e.jsxs("fieldset",{className:"border border-b31 rounded-md pb-5 px-5 pt-2",children:[e.jsx("legend",{className:"mx-auto text-b16 font-medium text-sm px-3",children:"Express checkout"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("button",{className:"rounded text-white flex justify-center p-3 bg-[#5A31F4]",children:e.jsx("img",{src:"/payment/shoppay.webp",alt:"shoppay",className:"h-[23px] object-contain"})}),e.jsx("button",{onClick:p,className:"rounded text-white flex justify-center p-3 bg-[#113984]",children:e.jsx("img",{src:"/payment/paypal.webp",alt:"shoppay",className:"h-[23px] object-contain"})}),g&&e.jsx(re,{options:{paymentRequest:g}})]})]})},Re=()=>{const g=[{name:"USA",value:"usa"}],N=[{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"},{name:"Alberta",value:"alberta"}],y=he().shape({email:i().required("Email is Required!"),firstName:i().nullable(),lastName:i().required("Last Name is Required!"),address:i().required("Address is Required!"),appartment:i().nullable(),city:i().required("City is Required!"),country:i().required("Country is Required!"),province:i().required("Province is Required!"),postalCode:i().required("Postal Code is Required!"),phone:i().required("Phone is Required!")}),c=m(t=>t.cart.deliveryOrders),p=m(t=>t.cart.pickupOrders);m(t=>t.order.orderInfo);const b=le();s.useEffect(()=>{(c==null?void 0:c.length)===0&&(p==null?void 0:p.length)===0&&(x("Cart is Empty","error",1e3),b("/mycart"))},[]);const l=m(t=>t.cart.deliveryInfo),[h,D]=s.useState(""),[C,O]=s.useState(!1),[q,z]=s.useState(""),[S,B]=s.useState(""),[R,Z]=s.useState(""),[w,K]=s.useState(""),[k,$]=s.useState(""),[H,J]=s.useState("usa"),[P,Q]=s.useState("alberta"),[n,V]=s.useState(""),[A,G]=s.useState(""),[v,M]=s.useState(!1),W=m(t=>t.user.auth);s.useEffect(()=>{},[]);const[a,E]=s.useState([]),j=ne(),I=t=>{const{name:o,checked:d}=t.target;o==="keepUpdates"&&O(d),o==="saveAddress"&&M(d)},X=async t=>{if(t.preventDefault(),!(l!=null&&l.shipping)){x("Shipping Not Available!","error",1e3);return}const o={email:h,firstName:q,lastName:S,address:R,appartment:w,city:k,country:H,state:P,postalCode:n,phone:A,saveAddress:v,keepUpdates:C,province:P};v&&(W||localStorage.setItem("neu_customer_address",JSON.stringify(o)));try{await y.validate(o,{abortEarly:!1}),j(oe(o)),b("/mycart/shipping")}catch(d){if(d){let r=d.errors;E(r),r.forEach(te=>{x(te,"error",1e3)})}else E([])}},[Y,f]=s.useState(!1),L=m(t=>t.cart.cartId),ee=async()=>{var o,d;f(!0);const t=await de({zip:n});if(t.status==200){const r=await j(F({cartId:L,deliveryInfo:{...l,location:n,shipping:t.data.zip.location.rate}}));(o=r==null?void 0:r.payload)==null||o.status,f(!1)}else{const r=j(F({cartId:L,deliveryInfo:{...l,location:n,shipping:!1}}));(d=r==null?void 0:r.payload)==null||d.status,f(!1)}};return s.useEffect(()=>{(n==null?void 0:n.length)===5&&(c==null?void 0:c.length)>0&&ee()},[n]),e.jsx(e.Fragment,{children:e.jsxs(ue,{children:[e.jsx(_,{to:"/",children:e.jsx("img",{src:"/login_logo.webp",alt:""})}),e.jsx(me,{}),e.jsx(fe,{}),e.jsx("div",{className:"text_between_line my-8",children:"OR"}),e.jsxs("form",{onSubmit:X,children:[e.jsxs("div",{className:"space-y-14px [&>*]:text-b16 [&>*]:text-sm",children:[e.jsx("h3",{className:"text-sm font-medium text-b16",children:"Contact information"}),e.jsx(u,{width:"full",name:"Email",title:"Email",iscompulsory:"false",type:"text",value:h,onChange:t=>D(t.target.value),error:!!(a&&a.includes("Email is Required!")),errormessage:"Email is Required!",placeholder:"abc@gmail.com"}),e.jsx(T.Checkbox,{onChange:t=>I(t),checked:C,defaultChecked:!1,name:"keepUpdates",id:"keep-me-update",label:"Keep me up to date on news and exclusive offers",className:"checked:bg-black border-b31",ripple:!1})]}),e.jsxs("div",{className:"space-y-14px mt-8",children:[e.jsx("h3",{className:"text-lg font-medium text-b16",children:"Shipping address"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(u,{width:"full",name:"firstName",title:"",iscompulsory:"false",type:"text",value:q,onChange:t=>z(t.target.value),error:!!(a&&a.includes("First Name is Required!")),errormessage:"First Name is Required!",placeholder:"First Name (optional)"}),e.jsx(u,{width:"full",name:"lastName",title:"",iscompulsory:"false",type:"text",value:S,onChange:t=>B(t.target.value),error:!!(a&&a.includes("Last Name is Required!")),errormessage:"Last Name is Required!",placeholder:"Last Name"}),e.jsxs("div",{className:"col-span-2 space-y-3",children:[e.jsx(u,{width:"full",name:"address",title:"",iscompulsory:"false",type:"text",value:R,onChange:t=>Z(t.target.value),error:!!(a&&a.includes("Address is Required!")),errormessage:"Address is Required!",placeholder:"Address"}),e.jsx(u,{width:"full",name:"appartment",title:"",iscompulsory:"false",type:"text",value:w,onChange:t=>K(t.target.value),error:!!(a&&a.includes("Apartment, suite is Required!")),errormessage:"Apartment, suite is Required!",placeholder:"Apartment, suite, etc. (optional)"}),e.jsx(u,{width:"full",name:"city",title:"",iscompulsory:"false",type:"text",value:k,onChange:t=>$(t.target.value),error:!!(a&&a.includes("City is Required!")),errormessage:"City is Required!",placeholder:"City"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-14px",children:[e.jsx(U,{setState:J,id:"country_region",label:"Country / region",Options:g}),e.jsx(U,{setState:Q,id:"province",label:"Province",Options:N}),e.jsxs("div",{className:"relative  col-span-2 md:col-span-1 [&>*]:h-full",children:[Y?e.jsx("div",{className:"absolute z-40 flex rounded-lg items-center w-full justify-end px-2",children:e.jsx("img",{src:"/loader-bg.gif",className:"w-4 h-4"})}):null,e.jsx(u,{width:"full",name:"postalCode",title:"",iscompulsory:"false",type:"text",value:n,onChange:t=>V(t.target.value),error:!!(a&&a.includes("Postal Code is Required!")),errormessage:"Postal Code is Required!",placeholder:"Postal Code"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{width:"full",name:"phone",title:"",iscompulsory:"false",type:"text",value:A,onChange:t=>G(t.target.value),error:!!(a&&a.includes("Phone is Required!")),errormessage:"Phone is Required!",placeholder:"Phone"}),e.jsx("div",{className:"absolute right-3 top-3",children:e.jsx(ce,{className:"text-2xl text-b3"})})]}),e.jsx("div",{className:"[&>*]:text-b16 [&>*]:text-sm",children:e.jsx(T.Checkbox,{onChange:t=>I(t),id:"save-information",name:"saveAddress",checked:v,defaultChecked:!1,label:"Save this information for next time",className:"checked:bg-black border-b31",ripple:!1})})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center w-full mt-5",children:[e.jsxs(_,{to:"/mycart",className:"flex gap-1 items-center",children:[e.jsx(pe,{}),e.jsx("span",{className:"text-sm font-medium text-b3",children:"Return to Cart"})]}),e.jsx("button",{type:"submit",className:"flex items-center py-3 px-6 text-xs rounded-lg bg-b3 text-white",children:"Continue to Shipping"})]})]})]})})};export{Re as default};
