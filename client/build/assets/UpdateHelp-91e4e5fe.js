import{p as G,q as i,V as J,r as s,u as W,j as t,bo as z,av as g,aV as Q,bL as F,bM as X,an as Y,f as Z,w as h}from"./index-fb6a0065.js";import{g as _}from"./helpSupportTab-f9755f3d.js";import{g as ee,u as te}from"./helpSupport-83626f09.js";import{B as se}from"./BlogEditor-78485c71.js";const oe=()=>{const H=G().shape({id:i().required("Id is required"),title:i().required("Title is required"),slug:i().required("Slug is required"),category:i().required("Category is required"),content:i().required("Content is required"),metaTitle:i(),metaDescription:i(),metaKeywords:i()}),{id:y}=J(),[o,w]=s.useState([]),[I,K]=s.useState([]),[R,d]=s.useState(!1),[S,j]=s.useState(""),[v,b]=s.useState(""),[C,T]=s.useState(""),[n,N]=s.useState(""),[q,D]=s.useState(""),[E,B]=s.useState(""),[f,M]=s.useState(""),[a,p]=s.useState([]),[x,A]=s.useState(""),m=s.useRef(),k=e=>{e.key===" "&&x.length>0&&((a==null?void 0:a.length)>0?p([...a,x]):p([x]),setTimeout(()=>{var r;A(""),(r=m.current)==null||r.focus(),m.current.setSelectionRange(0,0)},0))},L=(e,r)=>{e.preventDefault();const l=a.filter((u,c)=>c!==r);p(l)},U=async()=>{const e=await ee({id:y});e.status===200&&(j(e.data.help.title),b(e.data.help.slug),D(e.data.help.content),N(e.data.help.category),T(e.data.help.shortDescription),B(e.data.help.metaTitle),M(e.data.help.metaDescription),p(e.data.help.metaKeywords))};s.useEffect(()=>{U()},[]);const V=async()=>{const e=await _();if(e.status===200){const r=e.data.helpTabs.filter(c=>c.title.toLowerCase()!==n),u=[n[0].toUpperCase()+n.slice(1),...r];K(u)}};s.useEffect(()=>{n.length>0&&V()},[n]);const O=W(),P=async e=>{e.preventDefault(),d(!0);const r={id:y,title:S,slug:v,category:n,shortDescription:C,content:q,metaTitle:E,metaDescription:f,metaKeywords:JSON.stringify(a)};try{await H.validate(r,{abortEarly:!1})}catch(u){if(d(!1),u){let c=u.errors;w(c),c.forEach($=>{h($,"error",1e3)})}else w([])}const l=await te(r);l.status===200?(d(!1),h(l.data.msg,"success",1e3),O("/admin/manage-help-support")):(d(!1),h(l.data.message,"error",1e3))};return t.jsx(t.Fragment,{children:t.jsx(z,{children:t.jsxs("form",{onSubmit:P,className:"flex flex-col space-y-5 w-full py-5 bg-white",children:[t.jsxs("div",{className:"flex w-full",children:[t.jsxs("div",{className:"flex flex-col space-y-10 w-1/2",children:[t.jsx(g,{width:"full",name:"title",title:"Blog Title",iscompulsory:"true",type:"text",value:S,onChange:e=>{j(e.target.value),b(e.target.value.toLowerCase().replace(/\s/g,"-").replace(/\./g,""))},error:!!(o&&o.includes("Title is required")),errormessage:"Title is required",placeholder:"Enter Blog Title"}),t.jsx(g,{width:"full",name:"slug",title:"Blog Slug",readOnly:!0,iscompulsory:"true",type:"text",value:v,error:!!(o&&o.includes("Slug is required")),errormessage:"Slug is required",placeholder:"Enter Blog Slug"})]}),t.jsxs("div",{className:"flex flex-col space-y-8 items-center w-1/2",children:[t.jsx("div",{className:"flex flex-col items-center space-x-5 w-full",children:t.jsx(Q,{name:"categor",title:"Select Category",iscompulsory:"true",onChange:e=>N(e.target.value),options:I})}),t.jsx("div",{className:"flex flex-col items-center space-x-5 w-72",children:t.jsx(F,{width:"full",name:"description",title:"Description",iscompulsory:"true",type:"text",value:C,onChange:e=>T(e.target.value),error:!!(o&&o.includes("Short Description is required")),errormessage:"Short Description is required",placeholder:"Enter Product Description"})})]})]}),f,t.jsx(se,{state:q,setState:D}),t.jsx(X,{title:"Blog Seo",answer:t.jsxs("div",{className:"flex flex-col space-y-2 w-full",children:[t.jsx(g,{width:"full",name:"title",title:"Meta Title",type:"text",value:E,onChange:e=>B(e.target.value),placeholder:"Enter Meta Title"}),t.jsx(F,{width:"full",title:"Meta Description",value:f,onChange:e=>M(e.target.value),placeholder:"Write Meta Description Here.."}),t.jsx("h5",{className:"text-xs font-semibold",children:"Meta Keywords"}),t.jsx("div",{className:"flex flex-wrap w-full py-3 px-2 rounded-xl border-[1px] borders-[0,0,0,0,0.15]",children:t.jsxs("div",{className:"flex flex-wrap gap-y-2 items-center gap-x-2 w-full h-auto ",children:[(a==null?void 0:a.length)>0?a==null?void 0:a.map((e,r)=>t.jsxs("span",{className:"flex items-center bg-b6 text-sm px-2 py-1 text-white rounded-2xl",children:[e,t.jsx(Y,{onClick:l=>L(l,r),className:"text-white bg-red-500 ml-1 text-xs cursor-pointer rounded-full"})]},r)):null,t.jsx("div",{}),t.jsx("input",{ref:m,placeholder:"Hit Space To Insert",value:x,onKeyDown:e=>k(e),onChange:e=>A(e.target.value),className:"border-none outline-none mx-5 text-sm"})]})})]}),parent:"w-full [&>div]:py-4 [&>div]:px-6 [&>div]:border [&>div]:border-b33 [&>div]:rounded-xl h-auto border-0",icon:"text-xl",textStyle:"font-bold text-sm",child:"justify-center w-full [&>p]:text-sm !mt-0"}),t.jsx("button",{type:"submit",className:"flex justify-center items-center cursor-pointer rounded-md py-1 w-full bg-b3",children:R?t.jsx("img",{src:"/loader-bg.gif",className:"w-8"}):t.jsxs("a",{className:"flex items-center text-center  w-fit px-4 py-1 rounded-md text-white font-semibold",children:[t.jsx("span",{className:"text-xs",children:"Create"}),t.jsx(Z,{className:"text-2xl"})]})})]})})})};export{oe as default};
